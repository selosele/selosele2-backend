"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[278],{2278:function(t,e,s){s.r(e),s.d(e,{default:function(){return Et}});var o=s(3396),i=s(7139);const l=t=>((0,o.dD)("data-v-4f50c3d4"),t=t(),(0,o.Cn)(),t),n={class:"post-view__wrapper"},a=["innerHTML"],p={key:0,class:"post__contents__like-wrapper"},r={class:"post__contents__like-cnt"},_={class:"post__contents__date-wrapper"},d={class:"post__contents__date post__contents__date--create-at"},u=l((()=>(0,o._)("strong",null,[(0,o._)("i",{class:"xi-time-o","aria-hidden":"true"}),(0,o.Uk)(" 등록일 ")],-1))),c=["datetime"],m={key:1,class:"post__contents__info-wrapper"},h={class:"post__contents__btns"},y={key:2,class:"post__contents__paginations"},w=l((()=>(0,o._)("h2",{class:"sr-only"},"이전/다음 포스트",-1)));function P(t,e,s,l,P,g){const v=(0,o.up)("ui-hidden-field"),f=(0,o.up)("ui-icon-button"),k=(0,o.up)("router-link"),b=(0,o.up)("app-add-post-reply"),R=(0,o.up)("ui-form"),x=(0,o.up)("app-content-wrapper");return(0,o.wg)(),(0,o.j4)(x,null,{default:(0,o.w5)((()=>[(0,o._)("div",n,[P.dataLoaded?((0,o.wg)(),(0,o.j4)(R,{key:0,name:"postForm",onOnsubmit:g.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{name:"id",value:P.post?.id},null,8,["value"]),(0,o._)("div",{class:"post__contents__body line-numbers",innerHTML:P.post?.cont},null,8,a),g.isPostPage?((0,o.wg)(),(0,o.iD)("div",p,[(0,o.Wm)(f,{icon:P.isPostLiked?"xi-heart":"xi-heart-o",text:"추천수",class:(0,i.C_)("post__contents__like-btn"),title:P.isPostLiked?"포스트 추천 해제하기":"포스트 추천하기",onClick:e[0]||(e[0]=t=>g.savePostLike(P.post?.id))},{default:(0,o.w5)((()=>[(0,o._)("span",r,(0,i.zw)(P.postLikeCnt),1)])),_:1},8,["icon","title"])])):(0,o.kq)("",!0),(0,o._)("div",_,[(0,o._)("span",d,[u,(0,o._)("time",{datetime:P.post?.regDate},(0,i.zw)(P.post?.regDate),9,c)])]),g.isPostPage?((0,o.wg)(),(0,o.iD)("div",m,[0<P.post?.postCategory.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(P.post?.postCategory,((t,e)=>((0,o.wg)(),(0,o.j4)(f,{key:e,routerLink:`/category/${t.category.id}`,icon:"xi-folder-open",text:"카테고리",class:(0,i.C_)("post__contents__info post__contents__info--category")},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(t.category.nm),1)])),_:2},1032,["routerLink"])))),128)):(0,o.kq)("",!0),0<P.post?.postTag.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(P.post?.postTag,((t,e)=>((0,o.wg)(),(0,o.j4)(f,{key:e,routerLink:`/tag/${t.tag.id}`,icon:"xi-tags",text:"태그",class:(0,i.C_)("post__contents__info post__contents__info--tag")},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(t.tag.nm),1)])),_:2},1032,["routerLink"])))),128)):(0,o.kq)("",!0)])):(0,o.kq)("",!0),(0,o._)("div",h,[g.isPostPage?((0,o.wg)(),(0,o.j4)(f,{key:0,icon:"xi-backspace",color:"secondary",text:"목록으로",class:(0,i.C_)("post__contents__btn post__contents__btn--list"),onClick:g.goToList},null,8,["onClick"])):(0,o.kq)("",!0),(0,o.Wm)(f,{icon:"xi-link",color:"dark",text:"URL 복사",class:(0,i.C_)("post__contents__btn post__contents__btn--copy"),onClick:g.copyPostUrl},null,8,["onClick"]),(0,o.Wm)(f,{href:`https://twitter.com/intent/tweet?text=${encodeURI(P.post?.title)}%20${encodeURI(P.postUrl)}`,target:"_blank",title:"새창",rel:"noopener noreferrer nofollow",type:"link",color:"twitter",icon:"xi-twitter",text:"트위터 공유",class:(0,i.C_)("post__contents__sns")},null,8,["href"]),(0,o.Wm)(f,{href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURI(P.postUrl)}`,target:"_blank",title:"새창",rel:"noopener noreferrer nofollow",type:"link",color:"facebook",icon:"xi-facebook-official",text:"페이스북 공유",class:(0,i.C_)("post__contents__sns")},null,8,["href"]),t.isAdmin?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Wm)(f,{routerLink:g.isPostPage?"/add-post":"/add-content",color:"primary",icon:"xi-pen",text:(g.isPostPage?"포스트 ":"콘텐츠 ")+" 작성",showText:!0,class:(0,i.C_)("post__contents__btn")},null,8,["routerLink","text"]),(0,o.Wm)(f,{routerLink:g.isPostPage?`/edit-post/${P.post?.id}`:`/edit-content${P.post?.link}`,color:"success",icon:"xi-pen",text:(g.isPostPage?"포스트 ":"콘텐츠 ")+" 수정",showText:!0,class:(0,i.C_)("post__contents__btn")},null,8,["routerLink","text"]),(0,o.Wm)(f,{type:"submit",color:"dark",icon:"xi-trash",text:(g.isPostPage?"포스트 ":"콘텐츠 ")+" 삭제",showText:!0,class:(0,i.C_)("post__contents__btn")},null,8,["text"])],64)):(0,o.kq)("",!0)]),g.isPostPage?((0,o.wg)(),(0,o.iD)("nav",y,[w,null!==P.prevPost?((0,o.wg)(),(0,o.j4)(k,{key:0,to:`/post/${P.prevPost.id}`,rel:"prev",title:"이전 포스트",class:"post__contents__pagination post__contents__pagination--prev"},{default:(0,o.w5)((()=>[(0,o._)("strong",null,(0,i.zw)(P.prevPost.title),1)])),_:1},8,["to"])):(0,o.kq)("",!0),null!==P.nextPost?((0,o.wg)(),(0,o.j4)(k,{key:1,to:`/post/${P.nextPost.id}`,rel:"next",title:"다음 포스트",class:"post__contents__pagination post__contents__pagination--next"},{default:(0,o.w5)((()=>[(0,o._)("strong",null,(0,i.zw)(P.nextPost.title),1)])),_:1},8,["to"])):(0,o.kq)("",!0)])):(0,o.kq)("",!0),g.isPostPage?((0,o.wg)(),(0,o.j4)(b,{key:3,id:P.post?.id,list:P.post.postReply},null,8,["id","list"])):(0,o.kq)("",!0)])),_:1},8,["onOnsubmit"])):(0,o.kq)("",!0)])])),_:1})}var g=s(8822);const v=t=>((0,o.dD)("data-v-20534200"),t=t(),(0,o.Cn)(),t),f={class:"post__reply__wrapper"},k=v((()=>(0,o._)("h2",null,"댓글 남기기",-1))),b={class:"post__reply__write__inputs"},R={class:"post__reply__write__input-box"},x=v((()=>(0,o._)("label",{for:"addPostReplyAuthor",class:"post__reply__write__label"},"닉네임",-1))),L={class:"post__reply__write__input-box"},D=v((()=>(0,o._)("label",{for:"addPostReplyAuthorPw",class:"post__reply__write__label"},"비밀번호",-1))),$={class:"post__reply__write__btns"},C={key:0,class:"post__reply__no-data"};function A(t,e,s,l,n,a){const p=(0,o.up)("ui-hidden-field"),r=(0,o.up)("ui-textarea"),_=(0,o.up)("ui-text-field"),d=(0,o.up)("ui-button"),u=(0,o.up)("ui-form"),c=(0,o.up)("app-post-reply-list");return(0,o.wg)(),(0,o.iD)("div",f,[k,(0,o.Wm)(u,{name:"addPostReplyForm",class:(0,i.C_)("post__reply__write-frm"),onOnsubmit:a.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"parentId",id:"addPostReplyParentId",value:s.id},null,8,["value"]),(0,o.Wm)(p,{name:"title",id:"addPostReplyTitle",value:""}),(0,o.Wm)(p,{name:"crudType",id:"addPostReplyCrudType",value:"E01001"}),(0,o.Wm)(r,{name:"cont",id:"addReplyCont",title:"댓글 내용 입력",placeholder:"하고싶은 말을 남겨주세요.",cols:"30",rows:"4",resize:"vertical",rules:"required|max:1000"},null,8,["placeholder"]),(0,o._)("div",b,[(0,o._)("div",R,[x,(0,o.Wm)(_,{name:"author",id:"addPostReplyAuthor",clazz:["post__reply__input"],rules:"required|max:20",readonly:t.isAdmin,value:t.isAdmin?n.adminNickName:""},null,8,["readonly","value"])]),(0,o._)("div",L,[D,(0,o.Wm)(_,{type:"password",name:"authorPw",id:"addPostReplyAuthorPw",clazz:["post__reply__input"],rules:"required|min:8|max:15"})]),(0,o._)("div",$,[(0,o.Wm)(d,{type:"submit",color:"primary",text:"저장",class:(0,i.C_)("post__reply__btn--write")})])])])),_:1},8,["onOnsubmit"]),0===n.replyList.length?((0,o.wg)(),(0,o.iD)("p",C," 댓글이 없습니다. 제일 먼저 댓글을 작성해보세요. ")):((0,o.wg)(),(0,o.j4)(c,{key:n.replyList,replyList:n.replyList,onRefreshList:a.listPostReply,onRemoveReply:a.listPostReply,onUpdateReply:a.onUpdateReply},null,8,["replyList","onRefreshList","onRemoveReply","onUpdateReply"]))])}var W=s(9242);const T=t=>((0,o.dD)("data-v-ad55352e"),t=t(),(0,o.Cn)(),t),Y={class:"post__reply__list__wrapper"},E={class:"d-flex-w flex--between mb--10"},I={class:"post__reply__count"},M=(0,o.Uk)("댓글 "),S={class:"post__reply__depth1"},U=["data-depth","id"],H=["innerHTML"],q={class:"post__reply__info"},z={class:"post__reply__author"},O=T((()=>(0,o._)("i",{class:"xi-user-o","aria-hidden":"true"},null,-1))),N={class:"post__reply__author-to"},j={class:"post__reply__reg-date"},F=T((()=>(0,o._)("strong",null,[(0,o._)("i",{class:"xi-time-o","aria-hidden":"true"}),(0,o.Uk)(" 등록일 : ")],-1))),B={key:0,class:"post__reply__info-inner"},Z={key:1,class:"post__reply__toggle"},V={key:0,class:"post__reply__toggle-list"};function G(t,e,s,l,n,a){const p=(0,o.up)("ui-icon-button"),r=(0,o.up)("ui-button"),_=(0,o.up)("app-add-post-reply-depth");return(0,o.wg)(),(0,o.iD)("div",Y,[(0,o._)("div",E,[(0,o._)("div",null,[(0,o._)("strong",I,[M,(0,o._)("span",null,(0,i.zw)(n.realReplyList.length),1)]),(0,o.Wm)(p,{color:"primary",icon:"xi-refresh",text:"댓글 목록 새로고침",title:"댓글 목록 새로고침",class:(0,i.C_)("post__reply__btn--refresh"),onClick:a.refreshList},null,8,["onClick"])]),(0,o._)("div",null,[t.isAdmin?((0,o.wg)(),(0,o.j4)(r,{key:0,color:"secondary",text:"댓글 관리",routerLink:"/admin/post-reply"})):(0,o.kq)("",!0)])]),(0,o._)("ul",S,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.replyList,((e,s)=>((0,o.wg)(),(0,o.iD)("li",{key:s,"data-depth":e.depth,class:(0,i.C_)({post__reply__list:!0,"post__reply__list--deleted":"Y"===e.delYn,"post__reply__list--admin":"Y"===e.adminYn}),id:`postReply${e.id}`,ref_for:!0,ref:`postReply${e.id}`},[(0,o._)("p",{class:"post__reply__cont",innerHTML:e.cont},null,8,H),(0,o._)("div",q,[(0,o._)("p",z,[O,(0,o._)("span",N,(0,i.zw)(e.author),1)]),(0,o._)("p",j,[F,(0,o._)("span",null,(0,i.zw)(e.regDate),1)]),"N"===e.delYn&&1===e.depth?((0,o.wg)(),(0,o.iD)("div",B,[(0,o.Wm)(p,{color:"secondary",icon:"xi-pen",text:"댓글 남기기",title:"댓글 남기기",class:(0,i.C_)("post__reply__btn--show"),onClick:t=>a.toggleDepth(s)},null,8,["onClick"])])):(0,o.kq)("",!0)]),s===n.depthActiveIndex?((0,o.wg)(),(0,o.j4)(_,{key:e,reply:e,onRefreshList:a.refreshList},null,8,["reply","onRefreshList"])):(0,o.kq)("",!0),"N"===e.delYn?((0,o.wg)(),(0,o.iD)("div",Z,[(0,o.Wm)(p,{icon:"xi-cog",text:"포스트 댓글 수정/삭제",title:"포스트 댓글 수정/삭제",class:(0,i.C_)("post__reply__btn--toggle"),onClick:(0,W.iM)((t=>a.toggleMenu(s)),["stop"])},null,8,["onClick"]),s===n.menuActiveIndex?((0,o.wg)(),(0,o.iD)("div",V,[(0,o._)("ul",null,[(0,o._)("li",null,[(0,o.Wm)(p,{icon:"xi-pen-o",text:"댓글 수정",showText:!0,class:(0,i.C_)("post__reply__btn--edit"),ref_for:!0,ref:"postReplyMenuBtn",onClick:s=>a.openModal("E01003",e,t.isAdmin)},null,8,["onClick"])]),(0,o._)("li",null,[(0,o.Wm)(p,{icon:"xi-trash-o",text:"댓글 삭제",showText:!0,class:(0,i.C_)("post__reply__btn--delete"),ref_for:!0,ref:"postReplyMenuBtn",onClick:s=>a.openModal("E01004",e,t.isAdmin)},null,8,["onClick"])])])])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)],10,U)))),128))])])}const K=t=>((0,o.dD)("data-v-30fdea30"),t=t(),(0,o.Cn)(),t),J={class:"post-reply__write__inputs"},Q={class:"post-reply__write__input-box"},X=K((()=>(0,o._)("label",{for:"updatePostReplyAuthor",class:"post-reply__write__label"},"닉네임",-1))),tt={class:"post-reply__write__input-box"},et=K((()=>(0,o._)("label",{for:"updatePostReplyPw",class:"post-reply__write__label"},"비밀번호",-1))),st={class:"post-reply__write__btns"};function ot(t,e,s,l,n,a){const p=(0,o.up)("ui-hidden-field"),r=(0,o.up)("ui-textarea"),_=(0,o.up)("ui-text-field"),d=(0,o.up)("ui-button"),u=(0,o.up)("ui-form"),c=(0,o.up)("ui-modal");return(0,o.wg)(),(0,o.j4)(c,{title:"포스트 댓글 수정",name:this.$options.name,class:"post-reply-modal__wrapper"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"updatePostReplyForm",onOnsubmit:a.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"id",id:"updatePostReplyId",value:s.reply.id},null,8,["value"]),(0,o.Wm)(p,{name:"parentId",id:"updatePostReplyParentId",value:s.reply.parentId},null,8,["value"]),(0,o.Wm)(p,{name:"crudType",id:"updatePostReplyCrudType",value:"E01003"}),(0,o.Wm)(r,{name:"cont",id:"updatePostReplyCont",title:"포스트 내용 입력",placeholder:"하고싶은 말을 남겨주세요.",cols:"30",rows:"4",resize:"vertical",rules:"required",value:n.replacedCont},null,8,["placeholder","value"]),(0,o._)("div",J,[(0,o._)("div",Q,[X,(0,o.Wm)(_,{name:"author",id:"updatePostReplyAuthor",clazz:["post-reply__input"],rules:"required|max:20",readonly:"Y"===s.reply.adminYn,value:s.reply.author},null,8,["readonly","value"])]),(0,o._)("div",tt,[et,(0,o.Wm)(_,{type:"password",name:"authorPw",id:"updatePostReplyPw",clazz:["post-reply__input"],rules:"required|min:8|max:15"})]),(0,o._)("div",st,[(0,o.Wm)(d,{type:"submit",color:"primary",text:"수정",class:(0,i.C_)("post-reply__btn post-reply__btn--write")})])])])),_:1},8,["onOnsubmit"])])),_:1},8,["name"])}var it={name:"AppUpdatePostReplyModal",props:{reply:Object},data(){return{replacedCont:""}},created(){this.replacedCont=this.reply.cont.replaceAll("<br>","\r\n")},methods:{async onSubmit(t){const e=await g.wW.confirmSuccess("저장하시겠습니까?");e&&this.$http.put("/postreply",t).then((t=>{g.wW.toastSuccess("저장되었습니다."),this.$modal.hide(this.$options.name),this.$store.dispatch("Post/FETCH_UPDATED_POST_REPLY",t.data)}))}}},lt=s(89);const nt=(0,lt.Z)(it,[["render",ot],["__scopeId","data-v-30fdea30"]]);var at=nt;const pt={class:"post-reply__write__input-box no-width"},rt={class:"post-reply__write__btns"};function _t(t,e,s,l,n,a){const p=(0,o.up)("ui-hidden-field"),r=(0,o.up)("ui-text-field"),_=(0,o.up)("ui-button"),d=(0,o.up)("ui-form"),u=(0,o.up)("ui-modal");return(0,o.wg)(),(0,o.j4)(u,{title:"포스트 댓글 삭제",name:this.$options.name,class:"post-reply-modal__wrapper"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"removePostReplyForm",onOnsubmit:a.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"id",id:"removePostReplyId",value:s.reply.id},null,8,["value"]),(0,o.Wm)(p,{name:"parentId",id:"removePostReplyParentId",value:s.reply.parentId},null,8,["value"]),(0,o.Wm)(p,{name:"author",id:"removePostReplyAuthor",value:s.reply.author},null,8,["value"]),(0,o.Wm)(p,{name:"crudType",id:"removePostReplyCrudType",value:"E01004"}),(0,o._)("div",pt,[(0,o.Wm)(r,{type:"password",name:"authorPw",id:"removePostReplyPw",clazz:["post-reply__input"],title:"비밀번호 입력",placeholder:"비밀번호 입력",disabled:t.isAdmin,rules:t.isAdmin?"":"required|min:8|max:15"},null,8,["disabled","rules"]),(0,o._)("div",rt,[(0,o.Wm)(_,{type:"submit",color:"primary",text:"삭제",class:(0,i.C_)("post-reply__btn post-reply__btn--write")})])])])),_:1},8,["onOnsubmit"])])),_:1},8,["name"])}var dt={name:"AppRemovePostReplyModal",props:{reply:Object},methods:{async onSubmit(t){const e=await g.wW.confirmSuccess("삭제하시겠습니까?");if(!e)return;const s=await this.$store.dispatch("Auth/HAS_ROLE","ROLE_ADMIN");s&&delete t.authorPw,this.$http.post("/postreply/remove",t).then((e=>{g.wW.toastSuccess("삭제되었습니다."),this.$modal.hide(this.$options.name),this.$store.dispatch("Post/FETCH_REMOVED_POST_REPLY",t)}))}}};const ut=(0,lt.Z)(dt,[["render",_t],["__scopeId","data-v-cd5ae2dc"]]);var ct=ut;const mt={class:"post__reply__write-depth"},ht={class:"post__reply__write-to"},yt={class:"post__reply__write__inputs"},wt={class:"post__reply__write__input-box"},Pt=["for"],gt={class:"post__reply__write__input-box"},vt=["for"],ft={class:"post__reply__write__btns"};function kt(t,e,s,l,n,a){const p=(0,o.up)("ui-hidden-field"),r=(0,o.up)("ui-textarea"),_=(0,o.up)("ui-text-field"),d=(0,o.up)("ui-button"),u=(0,o.up)("ui-form");return(0,o.wg)(),(0,o.iD)("div",mt,[(0,o._)("div",ht,[(0,o.Wm)(u,{name:"addPostReplyDepthForm",class:(0,i.C_)("post__reply__list-frm"),onOnsubmit:a.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"parentId",id:"addPostReplyParentId",value:s.reply.parentId},null,8,["value"]),(0,o.Wm)(p,{name:"parentReplyId",id:"addPostReplyParentReplyId",value:s.reply.id},null,8,["value"]),(0,o.Wm)(p,{name:"title",id:"addPostReplyTitle",value:""}),(0,o.Wm)(p,{name:"group",id:"addPostReplyGroup",value:s.reply.id},null,8,["value"]),(0,o.Wm)(p,{name:"depth",id:"addPostReplyDepth",value:s.reply.depth+1},null,8,["value"]),(0,o.Wm)(p,{name:"crudType",id:"addPostReplyCrudType",value:"E01001"}),(0,o.Wm)(r,{name:"cont",title:"댓글 내용 입력",placeholder:"하고싶은 말을 남겨주세요.",cols:"30",rows:"4",rules:"required|max:1000"},null,8,["placeholder"]),(0,o._)("div",yt,[(0,o._)("div",wt,[(0,o._)("label",{for:`addPostReplyAuthor${s.reply.id}`,class:"post__reply__write__label"},"닉네임",8,Pt),(0,o.Wm)(_,{name:"author",id:`addPostReplyAuthor${s.reply.id}`,clazz:["post__reply__input"],rules:"required|max:20",tooltip:!0,readonly:t.isAdmin,value:t.isAdmin?n.adminNickName:""},null,8,["id","readonly","value"])]),(0,o._)("div",gt,[(0,o._)("label",{for:`addPostReplyAuthorPw${s.reply.id}`,class:"post__reply__write__label"},"비밀번호",8,vt),(0,o.Wm)(_,{type:"password",name:"authorPw",id:`addPostReplyAuthorPw${s.reply.id}`,clazz:["post__reply__input"],rules:"required|min:8|max:15",tooltip:!0},null,8,["id"])]),(0,o._)("div",ft,[(0,o.Wm)(d,{type:"submit",color:"primary",text:"저장",class:(0,i.C_)("post__reply__btn--write post__reply__btn--write-depth")})])])])),_:1},8,["onOnsubmit"])])])}var bt={name:"AppAddPostReplyDepth",props:{reply:Object},data(){return{adminNickName:""}},created(){this.adminNickName=this.$store.state.Post.code.find((t=>"F01001"===t.id)).nm},methods:{async onSubmit(t){const e=await g.wW.confirmSuccess("저장하시겠습니까?");e&&(t.title=this.$store.state.Breadcrumb.pageTitle,this.$http.post("/postreply",t).then((t=>{g.wW.toastSuccess("저장되었습니다."),this.$emit("refreshList")})))}}};const Rt=(0,lt.Z)(bt,[["render",kt],["__scopeId","data-v-a8ccc57c"]]);var xt=Rt,Lt={name:"AppPostReplyList",components:{AppUpdatePostReplyModal:at,AppRemovePostReplyModal:ct,AppAddPostReplyDepth:xt},props:{replyList:Array},watch:{"$store.state.Post.updatedPostReply"(t){0<Object.values(t).length&&(this.$store.dispatch("Post/FETCH_UPDATED_POST_REPLY",{}),this.$emit("updateReply",t))},"$store.state.Post.removedPostReply"(t){0<Object.values(t).length&&(this.$store.dispatch("Post/FETCH_REMOVED_POST_REPLY",{}),this.$emit("removeReply"))}},data(){return{realReplyList:[],menuActiveIndex:-1,depthActiveIndex:-1,isEmpty:g.xb}},created(){(0,g.kJ)(this.replyList)&&(this.realReplyList=this.replyList.filter((t=>"N"===t.delYn)))},mounted(){document.addEventListener("click",this.closeMenu),this.scrollToReply()},unmounted(){document.removeEventListener("click",this.closeMenu)},methods:{refreshList(){this.$emit("refreshList")},toggleDepth(t){t!==this.depthActiveIndex?this.depthActiveIndex=t:this.depthActiveIndex=-1},toggleMenu(t){t!==this.menuActiveIndex?this.menuActiveIndex=t:this.menuActiveIndex=-1},closeMenu(t){(0,g.UE)(this.$refs["postReplyMenuBtn"])&&!this.$refs["postReplyMenuBtn"].includes(t.target)&&(this.menuActiveIndex=-1)},openModal(t,e,s){s||"Y"!==e.adminYn?"E01003"===t?this.$modal.show({component:at,bind:{reply:e}}):"E01004"===t&&this.$modal.show({component:ct,bind:{reply:e}}):g.wW.toastError("수정/삭제 권한이 없습니다.")},scrollToReply(){if((0,g.UE)(window.location.hash)){const t=document.getElementById(window.location.hash.replace("#",""));t?.scrollIntoView()}}}};const Dt=(0,lt.Z)(Lt,[["render",G],["__scopeId","data-v-ad55352e"]]);var $t=Dt,Ct={name:"AppAddPostReply",components:{AppPostReplyList:$t},props:{id:Number,list:Array},data(){return{replyList:this.list,adminNickName:""}},created(){this.adminNickName=this.$store.state.Post.code.find((t=>"F01001"===t.id)).nm},methods:{async onSubmit(t){const e=await g.wW.confirmSuccess("저장하시겠습니까?");e&&(t.title=this.$store.state.Breadcrumb.pageTitle,this.$http.post("/postreply",t).then((t=>{g.wW.toastSuccess("저장되었습니다."),this.listPostReply()})))},listPostReply(){return this.$http.get(`/postreply/list/${this.id}`).then((t=>{this.replyList=[],t.data.forEach((t=>{this.setData(t),this.replyList.push(t)}))}))},onUpdateReply(t){const{id:e,author:s,cont:o,modDate:i}=t;this.replyList.forEach((t=>{t.id===e&&(t.author=s,t.cont=o,t.cont=this.setData(t).cont,t.modDate=this.$moment(i).format("YYYY-MM-DD HH:mm:ss"))}))},setData(t){return t.cont=t.cont.replace(/\r\n|\n/g,"<br>"),t.cont=t.cont.replaceAll("\\r\\n","<br>"),t.regDate=this.$moment(t.regDate).format("YYYY-MM-DD HH:mm:ss"),(0,g.UE)(t.modDate)&&(t.modDate=this.$moment(t.modDate).format("YYYY-MM-DD HH:mm:ss")),t}}};const At=(0,lt.Z)(Ct,[["render",A],["__scopeId","data-v-20534200"]]);var Wt=At,Tt={name:"AppPostView",components:{AppAddPostReply:Wt},data(){return{pageTitle:"",page:this.$route.query.page,post:null,prevPost:null,nextPost:null,postUrl:"",postLikeCnt:0,isPostLiked:!1,dataLoaded:!1}},created(){this.init(this.$route.params.id)},watch:{"$route.params.id"(t){this.init(t)}},computed:{isPostPage:{get(){return"D01002"===this.$route.meta.pageType},set(t){}},isContentPage:{get(){return"D01003"===this.$route.meta.pageType},set(t){}}},methods:{async init(t){this.post=null,this.prevPost=null,this.nextPost=null,this.postUrl=window.location.href,this.isPostPage?(await this.getPost(t),this.postLikeCnt=this.post.postLike.length):this.isContentPage&&await this.getPost(t)},getPost(t){let e=this.isPostPage?`/post/${t}`:`/content/${t}`;return this.$http.get(e).then((t=>{this.dataLoaded=!0,this.post={...t.data},this.post.regDate=this.$moment(this.post.regDate).format("YYYY-MM-DD HH:mm:ss"),(0,g.SL)(this.post.modDate)&&(this.post.modDate=this.$moment(this.post.modDate).format("YYYY-MM-DD HH:mm:ss")),(0,g.UE)(this.post.userPostLike)?this.isPostLiked=!0:this.isPostLiked=!1,this.isPostPage&&(this.prevPost=this.post?.prevAndNext[0]||null,this.nextPost=this.post?.prevAndNext[1]||null),this.isPostPage&&0<this.post.postReply.length&&this.post.postReply.forEach((t=>{t.cont=t.cont.replace(/\r\n|\n/g,"<br>"),t.cont=t.cont.replaceAll("\\r\\n","<br>"),t.regDate=this.$moment(t.regDate).format("YYYY-MM-DD HH:mm:ss"),(0,g.UE)(t.modDate)&&(t.modDate=this.$moment(t.modDate).format("YYYY-MM-DD HH:mm:ss"))})),this.pageTitle=this.post.title,this.$store.dispatch("Breadcrumb/FETCH_PAGE_TITLE",this.pageTitle)}))},getPostLike(t){return this.$http.get(`/postlike/${t}`).then((t=>{(0,g.UE)(t.data)?this.isPostLiked=!0:this.isPostLiked=!1}))},savePostLike(t){const e={postId:t,title:this.$store.state.Breadcrumb.pageTitle};return this.$store.commit("Loading/SET_USE_LOADING",!1),this.$http.post("/postlike",e).then((e=>{0===this.postLikeCnt&&-1===e.data||(this.getPostLike(t),this.postLikeCnt+=e.data)}))},async onSubmit(t){const e=await g.wW.confirmSuccess("삭제하시겠습니까?");if(!e)return;let s=this.isPostPage?`/post/${t.id}`:`/content/${t.id}`;this.$http.delete(s).then((t=>{g.wW.toastSuccess("삭제되었습니다."),this.goToList()}))},goToList(){this.$store.dispatch("Post/FETCH_MAIN_POSTLIST",{}),this.$store.dispatch("Layout/FETCH_SIDEBAR",{}),this.$router.push({path:"/",query:{page:this.page}})},async copyPostUrl(){await navigator.clipboard.writeText(window.location.href),g.wW.toastSuccess((this.isPostPage?"포스트":"콘텐츠")+" URL이 복사되었습니다.")}}};const Yt=(0,lt.Z)(Tt,[["render",P],["__scopeId","data-v-4f50c3d4"]]);var Et=Yt}}]);