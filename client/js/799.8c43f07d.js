"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[799],{6597:function(t,s,e){e.d(s,{a:function(){return l}});var i=e(9266),a=e(8822);class o{constructor(){}setPageTitle(t){(0,a.UE)(t)?document.title=`${t} - ${i.Z.state.BlogConfig.data.title}`:document.title=i.Z.state.BlogConfig.data.title}}const l=new o},6406:function(t,s,e){e.d(s,{Z:function(){return A}});var i=e(3396),a=e(7139);const o=t=>((0,i.dD)("data-v-36360169"),t=t(),(0,i.Cn)(),t),l={key:0,class:"post__check only-input"},n=["aria-labelledby","aria-describedby"],r=["id"],c={key:0,class:"post__og-image"},p={class:"post__og-image__box"},d=["src"],_=["id"],g={class:"post__box__item-wrapper"},u={class:"post__box__item post__box__item--regdate"},h=o((()=>(0,i._)("i",{class:"xi-time-o","aria-hidden":"true"},null,-1))),m=o((()=>(0,i._)("span",{class:"sr-only"},"등록일",-1))),y=["datetime"],k=o((()=>(0,i._)("span",{class:"sr-only"},"카테고리",-1))),L={key:1,class:"post__box__item post__box__item--like-count"},C=o((()=>(0,i._)("i",{class:"xi-heart-o","aria-hidden":"true"},null,-1))),w=o((()=>(0,i._)("span",{class:"sr-only"},"추천수",-1))),P={key:2,class:"post__box__item post__box__item--comment-count"},b=o((()=>(0,i._)("i",{class:"xi-speech-o","aria-hidden":"true"},null,-1))),f=o((()=>(0,i._)("span",{class:"sr-only"},"댓글수",-1)));function v(t,s,e,o,v,$){const D=(0,i.up)("ui-checkbox"),Y=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("ul",{class:(0,a.C_)(["post__wrapper",{search__results:"search"===e.type}])},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.postList,((o,v)=>((0,i.wg)(),(0,i.iD)("li",{class:"post__wrapper__list",key:v},[(0,i._)("div",{class:(0,a.C_)(["post__wrapper__list__item",{"post__wrapper__list__item--logined":t.isLogin&&"main"===e.type},{"post__wrapper__list__item--pin":"Y"===o.pinYn&&"main"===e.type},{"post__wrapper__list__item--secret":"Y"===o.secretYn},{"post__wrapper__list__item--new":$.isNewPost(o.regDate)}])},[t.isLogin&&"main"===e.type?((0,i.wg)(),(0,i.iD)("span",l,[(0,i.Wm)(D,{name:"checkPost",id:`checkPost${o.id}`,class:(0,a.C_)("post__checkbox"),label:"포스트 삭제",labelHidden:!0,value:o.id,modelValue:$.chkList,"onUpdate:modelValue":s[0]||(s[0]=t=>$.chkList=t),onClick:s[1]||(s[1]=t=>$.onClick(t))},null,8,["id","value","modelValue"])])):(0,i.kq)("",!0),(0,i._)("article",{"aria-labelledby":`title${o.id}`,"aria-describedby":`cont${o.id}`,class:"post__box"},[(0,i._)("h2",{id:`title${o.id}`,class:"post__title"},["main"===e.type?((0,i.wg)(),(0,i.j4)(Y,{key:0,to:{path:`/post/${o.id}`,query:{page:e.page}}},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(o.title),1)])),_:2},1032,["to"])):((0,i.wg)(),(0,i.j4)(Y,{key:1,to:`/post/${o.id}`,onClick:t.saveToStorage},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(o.title),1)])),_:2},1032,["to","onClick"]))],8,r),o.ogImgUrl?((0,i.wg)(),(0,i.iD)("p",c,[(0,i._)("span",p,[(0,i._)("img",{src:o.ogImgUrl,alt:""},null,8,d)])])):(0,i.kq)("",!0),(0,i._)("p",{id:`cont${o.id}`,class:"post__cont"},(0,a.zw)(o.rawText),9,_),(0,i._)("div",g,[(0,i._)("span",u,[h,m,(0,i._)("time",{datetime:t.$moment(o.regDate).format("YYYY-MM-DD HH:mm:ss")},(0,a.zw)(t.$moment(o.regDate).format("YYYY.MM.DD")),9,y)]),0<o.postCategory.length?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(o.postCategory,((t,s)=>((0,i.wg)(),(0,i.iD)("span",{class:"post__box__item post__box__item--category",key:s},[k,(0,i.Uk)(" "+(0,a.zw)(t.category.nm),1)])))),128)):(0,i.kq)("",!0),"main"===e.type?((0,i.wg)(),(0,i.iD)("span",L,[C,w,(0,i.Uk)(" "+(0,a.zw)(o.likeCnt),1)])):(0,i.kq)("",!0),"main"===e.type?((0,i.wg)(),(0,i.iD)("span",P,[b,f,(0,i.Uk)(" "+(0,a.zw)(o.replyCnt),1)])):(0,i.kq)("",!0)])],8,n)],2)])))),128))],2)}var $={name:"app-post-list-detail",props:{type:String,page:Number,postList:Array,checkList:Array,checkAll:{type:Boolean,default:!1}},data(){return{nowDate:this.$moment().format("YYYYMMDD")}},computed:{chkList:{get(){return this.checkAll?this.checkList:[]},set(t){}}},methods:{isNewPost(t){return this.nowDate===this.$moment(t).format("YYYYMMDD")},onClick(t){t.target.checked}}},D=e(89);const Y=(0,D.Z)($,[["render",v],["__scopeId","data-v-36360169"]]);var A=Y},799:function(t,s,e){e.r(s),e.d(s,{default:function(){return H}});var i=e(3396);function a(t,s,e,a,o,l){const n=(0,i.up)("ui-loading"),r=(0,i.up)("ui-pagination"),c=(0,i.up)("app-post-list"),p=(0,i.up)("app-widget-config"),d=(0,i.up)("app-content-wrapper");return(0,i.wg)(),(0,i.j4)(d,{pageTitle:o.pageTitle},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{activeModel:!o.dataLoaded,fullPage:!0},null,8,["activeModel"]),o.dataLoaded?((0,i.wg)(),(0,i.j4)(c,{key:0,type:"main",page:o.page,postList:o.pagingPostList,categoryList:o.categoryList,onListPost:l.listPostByCategory,onRemovePost:l.refreshPostList},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(r,{value:o.postList,key:o.postList,total:o.listCnt,first:o.page,rows:5,size:10,pinColumn:"pinYn",onPage:l.onPage},null,8,["value","total","first","onPage"]))])),_:1},8,["page","postList","categoryList","onListPost","onRemovePost"])):(0,i.kq)("",!0),t.isLogin?((0,i.wg)(),(0,i.j4)(p,{key:1})):(0,i.kq)("",!0)])),_:1},8,["pageTitle"])}var o=e(7139),l=e(9242);const n=t=>((0,i.dD)("data-v-73cc7bce"),t=t(),(0,i.Cn)(),t),r={class:"post-list__wrapper"},c={class:"post__category-filter d-flex-w gap--10 mb--15"},p={key:0,class:"post__btn-wrapper mt--15"},d=n((()=>(0,i._)("i",{class:"xi-pen","aria-hidden":"true"},null,-1))),_=n((()=>(0,i._)("i",{class:"xi-trash","aria-hidden":"true"},null,-1))),g={class:"post__check-all"};function u(t,s,e,a,n,u){const h=(0,i.up)("ui-select"),m=(0,i.up)("ui-form"),y=(0,i.up)("ui-button"),k=(0,i.up)("ui-checkbox"),L=(0,i.up)("app-post-list-detail");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i.Wm)(m,{name:"postListForm",onSubmit:u.removePost},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{name:"postCategoryForm",ref:"postCategoryForm",onSubmit:u.listPostByCategory},{default:(0,i.w5)((()=>[(0,i._)("div",c,[(0,i.Wm)(h,{name:"categoryId",id:"categoryId",class:(0,o.C_)("post__category-filter-select"),title:"카테고리 선택",defaultValue:"카테고리 선택",data:e.categoryList,rules:"required",modelValue:n.selectedCategoryId,"onUpdate:modelValue":s[0]||(s[0]=t=>n.selectedCategoryId=t),onOnChange:u.listPostByCategory},null,8,["data","modelValue","onOnChange"])])])),_:1},8,["onSubmit"]),t.isLogin&&"main"===e.type?((0,i.wg)(),(0,i.iD)("div",p,[(0,i.Wm)(y,{routerLink:"/add-post",color:"light",class:(0,o.C_)("post__btn")},{default:(0,i.w5)((()=>[d,(0,i.Uk)(" 포스트 작성 ")])),_:1}),(0,i.Wm)(y,{type:"submit",color:"dark",class:(0,o.C_)("post__btn")},{default:(0,i.w5)((()=>[_,(0,i.Uk)(" 포스트 삭제 ")])),_:1}),(0,i._)("span",g,[(0,i.Wm)(k,{name:"checkAll",id:"checkAll",label:"포스트 전체 선택",values:"Y,N",modelValue:u.checkAll,"onUpdate:modelValue":s[1]||(s[1]=t=>u.checkAll=t),onClick:s[2]||(s[2]=(0,l.iM)((t=>u.onClick(t)),["self"]))},null,8,["modelValue"])])])):(0,i.kq)("",!0),((0,i.wg)(),(0,i.j4)(L,{type:e.type,page:e.page,key:e.postList,postList:e.postList,checkList:u.checkList,checkAll:u.isCheckAll},null,8,["type","page","postList","checkList","checkAll"]))])),_:1},8,["onSubmit"]),(0,i.WI)(t.$slots,"default",{},void 0,!0)])}var h=e(6406),m=e(8822),y={name:"app-post-list",components:{AppPostListDetail:h.Z},props:{type:String,page:Number,postList:Array,categoryList:Array},data(){return{selectedCategoryId:this.$store.state.Post.selectedCategoryId}},mounted(){(0,m.SL)(this.$store.state.Post.selectedCategoryId)&&this.$store.dispatch("Post/FETCH_SELECTED_CATEGORY_ID","")},computed:{checkAll:{get(){return!!((0,m.UE)(this.postList)&&0<this.postList.length)&&this.isCheckAll},set(t){let s=[];"Y"===t&&this.postList.map((t=>{s.push(t.id)})),this.$store.dispatch("Post/FETCH_CHECKLIST",s)}},checkList:{get(){return this.$store.state.Post.checkList},set(t){}},isCheckAll:{get(){return this.$store.state.Post.checkAll},set(t){}}},methods:{async removePost(t){if(0===t.checkPost.length)return void m.wW.toastWarning("삭제할 포스트를 선택하세요.");const s=t.checkPost.map((t=>{let s={};return s.id=t,s})),e=await m.wW.confirmSuccess("포스트를 삭제하시겠습니까?");e&&this.$http.delete("/post",{data:s}).then((t=>{m.wW.toastSuccess("삭제되었습니다."),this.$emit("removePost")}))},async listPostByCategory(t){const s=await this.$refs["postCategoryForm"].validateAll();s.valid&&this.$http.get("/post",{params:{categoryId:t}}).then((s=>{this.$store.dispatch("Post/FETCH_SELECTED_CATEGORY_ID",t),this.$emit("listPost",s.data)}))},onClick(t){this.$store.dispatch("Post/FETCH_CHECKALL",t.target.checked)}}},k=e(89);const L=(0,k.Z)(y,[["render",u],["__scopeId","data-v-73cc7bce"]]);var C=L;const w=t=>((0,i.dD)("data-v-4b72f48c"),t=t(),(0,i.Cn)(),t),P={class:"widget__wrapper"},b={class:"widget__config"},f={key:1,class:"widget__list"},v=w((()=>(0,i._)("h2",null,"미사용 위젯",-1)));function $(t,s,e,a,l,n){const r=(0,i.up)("ui-button"),c=(0,i.up)("ui-checkbox");return(0,i.wg)(),(0,i.iD)("div",P,[(0,i._)("div",b,[(0,i.Wm)(r,{class:(0,o.C_)("widget__btn widget__btn--config"),onClick:n.toggleList},{default:(0,i.w5)((()=>[(0,i.Uk)("위젯관리 ")])),_:1},8,["onClick"]),l.listHidden?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:0,class:(0,o.C_)("widget__btn widget__btn--save"),onClick:n.onSubmit},{default:(0,i.w5)((()=>[(0,i.Uk)("저장 ")])),_:1},8,["onClick"])),l.listHidden?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",f,[v,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.noUseWidgetList,((t,s)=>((0,i.wg)(),(0,i.j4)(c,{key:s,name:"useYn",id:`useYn${s}`,label:t.title,values:"Y,N"},null,8,["id","label"])))),128))]))])])}var D={name:"app-widget-config",data(){return{noUseWidgetList:[],listHidden:!0}},created(){this.listWidget()},methods:{listWidget(){const t={useYn:"N"};return this.$http.get("/widget",{params:t}).then((t=>{this.noUseWidgetList=[...t.data]}))},async onSubmit(){await m.wW.confirmSuccess("저장하시겠습니까?")},toggleList(){this.listHidden=!this.listHidden}}};const Y=(0,k.Z)(D,[["render",$],["__scopeId","data-v-4b72f48c"]]);var A=Y,x=e(6597),T={name:"app-index",components:{AppPostList:C,AppWidgetConfig:A},data(){return{pageTitle:"",page:null,listCnt:null,postList:[],pagingPostList:[],categoryList:[],dataLoaded:!1}},async created(){x.a.setPageTitle(this.pageTitle),this.page=parseInt(this.$route.query.page)||1,this.listCategoryAndCount(),this.init()},computed:{storePostList(){return this.$store.state.Post.mainPostObj.postList},storePostListCnt(){return this.$store.state.Post.mainPostObj.listCnt},hasStorePostList(){return(0,m.UE)(this.storePostList)&&0<this.storePostList.length}},methods:{onPage(t){this.page=t.page,this.pagingPostList=[...t.pageData],this.$store.dispatch("Post/FETCH_CHECKLIST",[]),this.$store.dispatch("Post/FETCH_CHECKALL",!1)},async init(){if(!this.hasStorePostList)return await this.listPost(),void this.dataLoading();this.dataLoaded=!0,this.postList=[...this.storePostList],this.listCnt=this.storePostListCnt},async listPost(){const t=await this.$http.get("/post");return t.data[0].map((t=>{this.postList.push(t)})),this.listCnt=t.data[1],this.$store.dispatch("Post/FETCH_MAIN_POSTLIST",{postList:this.postList,listCnt:this.listCnt}),t},async refreshPostList(){const t=await this.listPost();this.listPostByCategory(t.data)},async listPostByCategory(t){await(()=>(this.dataLoaded=!1,this.postList=[...t[0]],this.listCnt=t[1],Promise.resolve()))(),this.dataLoading()},listCategoryAndCount(){return this.categoryList.push({value:"0",text:"전체"}),this.$http.get("/category").then((t=>{t.data.map((t=>{this.categoryList.push({value:t.id,text:t.nm})}))}))},dataLoading(){0<this.postList.length&&(this.dataLoaded=!0)}}};const E=(0,k.Z)(T,[["render",a]]);var H=E}}]);
//# sourceMappingURL=799.8c43f07d.js.map