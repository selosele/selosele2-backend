"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[282],{6597:function(t,e,s){s.d(e,{a:function(){return i}});var o=s(9266),n=s(8822);class l{constructor(){}setPageTitle(t){(0,n.UE)(t)?document.title=`${t} - ${o.Z.state.BlogConfig.data?.title}`:document.title=o.Z.state.BlogConfig.data?.title}}const i=new l},2282:function(t,e,s){s.r(e),s.d(e,{default:function(){return jt}});var o=s(3396),n=s(7139);const l=t=>((0,o.dD)("data-v-fba1f7d2"),t=t(),(0,o.Cn)(),t),i={class:"post-view__wrapper"},a=["innerHTML"],p={class:"post__contents__like-wrapper"},r={class:"post__contents__like-cnt"},d={class:"post__contents__date-wrapper"},_={class:"post__contents__date post__contents__date--create-at"},u=l((()=>(0,o._)("strong",null,[(0,o._)("i",{class:"xi-time-o","aria-hidden":"true"}),(0,o.Uk)(" 등록일 ")],-1))),c=["datetime"],m={key:0,class:"post__contents__date post__contents__date--modified-at"},h=l((()=>(0,o._)("strong",null,[(0,o._)("i",{class:"xi-time","aria-hidden":"true"}),(0,o.Uk)(" 수정일 ")],-1))),y=["datetime"],w={class:"post__contents__info-wrapper"},g={class:"post__contents__btns"},v=(0,o.Uk)("포스트 작성 "),f=(0,o.Uk)("포스트 수정 "),k=(0,o.Uk)("포스트 삭제 "),P={class:"post__contents__paginations"},b=l((()=>(0,o._)("h2",{class:"sr-only"},"이전/다음 포스트",-1)));function L(t,e,s,l,L,x){const R=(0,o.up)("ui-skeletor"),C=(0,o.up)("ui-hidden-field"),$=(0,o.up)("ui-icon-button"),W=(0,o.up)("router-link"),D=(0,o.up)("app-add-post-reply"),U=(0,o.up)("ui-form"),T=(0,o.up)("app-content-wrapper");return(0,o.wg)(),(0,o.j4)(T,{pageTitle:L.pageTitle},{default:(0,o.w5)((()=>[(0,o._)("div",i,[L.dataLoaded?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(R,{height:"1.3rem"},null,8,["height"]),(0,o.Wm)(R,{height:"1.3rem"},null,8,["height"]),(0,o.Wm)(R,{height:"1.3rem"},null,8,["height"])],64)),L.dataLoaded?((0,o.wg)(),(0,o.j4)(U,{key:1,name:"postForm",onOnsubmit:x.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{name:"id",value:L.post?.id},null,8,["value"]),(0,o._)("div",{class:"post__contents__body line-numbers",innerHTML:L.post?.cont},null,8,a),(0,o._)("div",p,[(0,o.Wm)($,{icon:L.isPostLiked?"xi-heart":"xi-heart-o",text:"추천수",class:(0,n.C_)("post__contents__like-btn"),title:L.isPostLiked?"포스트 추천 해제하기":"포스트 추천하기",onClick:e[0]||(e[0]=t=>x.savePostLike(L.post?.id))},{default:(0,o.w5)((()=>[(0,o._)("span",r,(0,n.zw)(L.postLikeCnt),1)])),_:1},8,["icon","title"])]),(0,o._)("div",d,[(0,o._)("span",_,[u,(0,o._)("time",{datetime:L.post?.regDate},(0,n.zw)(L.post?.regDate),9,c)]),L.post?.modDate?((0,o.wg)(),(0,o.iD)("span",m,[h,(0,o._)("time",{datetime:L.post?.modDate},(0,n.zw)(L.post?.modDate),9,y)])):(0,o.kq)("",!0)]),(0,o._)("div",w,[0<L.post?.postCategory.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(L.post?.postCategory,((t,e)=>((0,o.wg)(),(0,o.j4)($,{key:e,routerLink:`/category/${t.category.id}`,icon:"xi-folder-open",text:"카테고리",class:(0,n.C_)("post__contents__info post__contents__info--category")},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.category.nm),1)])),_:2},1032,["routerLink"])))),128)):(0,o.kq)("",!0),0<L.post?.postTag.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(L.post?.postTag,((t,e)=>((0,o.wg)(),(0,o.j4)($,{key:e,routerLink:`/tag/${t.tag.id}`,icon:"xi-tags",text:"태그",class:(0,n.C_)("post__contents__info post__contents__info--tag")},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.tag.nm),1)])),_:2},1032,["routerLink"])))),128)):(0,o.kq)("",!0)]),(0,o._)("div",g,[(0,o.Wm)($,{icon:"xi-backspace",color:"secondary",text:"목록으로",class:(0,n.C_)("post__contents__btn post__contents__btn--list"),onClick:x.goToList},null,8,["onClick"]),(0,o.Wm)($,{icon:"xi-link",color:"dark",text:"URL 복사",class:(0,n.C_)("post__contents__btn post__contents__btn--copy"),onClick:x.copyPostUrl},null,8,["onClick"]),(0,o.Wm)($,{href:`https://twitter.com/intent/tweet?text=${encodeURI(L.post?.title)}%20${encodeURI(t.$nowUrl)}`,target:"_blank",title:"새창",rel:"noopener noreferrer nofollow",type:"link",color:"twitter",icon:"xi-twitter",text:"트위터 공유",class:(0,n.C_)("post__contents__sns")},null,8,["href"]),(0,o.Wm)($,{href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURI(t.$nowUrl)}`,target:"_blank",title:"새창",rel:"noopener noreferrer nofollow",type:"link",color:"facebook",icon:"xi-facebook-official",text:"페이스북 공유",class:(0,n.C_)("post__contents__sns")},null,8,["href"]),t.isLogin?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)($,{routerLink:"/add-post",color:"primary",icon:"xi-pen",class:(0,n.C_)("post__contents__btn")},{default:(0,o.w5)((()=>[v])),_:1}),(0,o.Wm)($,{routerLink:`/edit-post/${L.post?.id}`,color:"success",icon:"xi-pen",class:(0,n.C_)("post__contents__btn")},{default:(0,o.w5)((()=>[f])),_:1},8,["routerLink"]),(0,o.Wm)($,{type:"submit",color:"dark",icon:"xi-trash",class:(0,n.C_)("post__contents__btn")},{default:(0,o.w5)((()=>[k])),_:1})],64)):(0,o.kq)("",!0)]),(0,o._)("nav",P,[b,null!==L.prevPost?((0,o.wg)(),(0,o.j4)(W,{key:0,to:`/post/${L.prevPost.id}`,rel:"prev",title:"이전 포스트",class:"post__contents__pagination post__contents__pagination--prev"},{default:(0,o.w5)((()=>[(0,o._)("strong",null,(0,n.zw)(L.prevPost.title),1)])),_:1},8,["to"])):(0,o.kq)("",!0),null!==L.nextPost?((0,o.wg)(),(0,o.j4)(W,{key:1,to:`/post/${L.nextPost.id}`,rel:"next",title:"다음 포스트",class:"post__contents__pagination post__contents__pagination--next"},{default:(0,o.w5)((()=>[(0,o._)("strong",null,(0,n.zw)(L.nextPost.title),1)])),_:1},8,["to"])):(0,o.kq)("",!0)]),(0,o.Wm)(D,{id:L.post?.id},null,8,["id"])])),_:1},8,["onOnsubmit"])):(0,o.kq)("",!0)])])),_:1},8,["pageTitle"])}var x=s(8822),R=s(6597);const C=t=>((0,o.dD)("data-v-58b79a02"),t=t(),(0,o.Cn)(),t),$={class:"post__reply__wrapper"},W=C((()=>(0,o._)("h2",null,"댓글 남기기",-1))),D={class:"post__reply__write__inputs"},U={class:"post__reply__write__btns"},T=(0,o.Uk)("다시작성 "),Y=(0,o.Uk)("저장 "),I={key:0,class:"post__reply__no-data"};function A(t,e,s,l,i,a){const p=(0,o.up)("ui-hidden-field"),r=(0,o.up)("ui-textarea"),d=(0,o.up)("ui-text-field"),_=(0,o.up)("ui-button"),u=(0,o.up)("ui-form"),c=(0,o.up)("app-post-reply-list");return(0,o.wg)(),(0,o.iD)("div",$,[W,(0,o.Wm)(u,{name:"addPostReplyForm",class:(0,n.C_)("post__reply__write-frm"),onOnsubmit:a.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"parentId",id:"addPostReplyParentId",value:s.id},null,8,["value"]),(0,o.Wm)(p,{name:"crudType",id:"addPostReplyCrudType",value:"E01001"}),(0,o.Wm)(r,{name:"cont",id:"addReplyCont",title:"댓글 내용 입력",placeholder:"하고싶은 말을 남겨주세요.",cols:"30",rows:"4",resize:"vertical",rules:"required|max:1000"},null,8,["placeholder"]),(0,o._)("div",D,[(0,o.Wm)(d,{type:"text",name:"author",id:"addPostReplyAuthor",class:(0,n.C_)("post__reply__input"),label:"닉네임",rules:"required|max:20",readonly:t.isLogin,value:t.isLogin?"관리자":""},null,8,["readonly","value"]),(0,o.Wm)(d,{type:"password",name:"authorPw",id:"addPostReplyAuthorPw",class:(0,n.C_)("post__reply__input"),label:"비밀번호",rules:"required|min:8|max:15"}),(0,o._)("div",U,[(0,o.Wm)(_,{type:"reset",class:(0,n.C_)("post__reply__btn--reset")},{default:(0,o.w5)((()=>[T])),_:1}),(0,o.Wm)(_,{type:"submit",class:(0,n.C_)("post__reply__btn--write")},{default:(0,o.w5)((()=>[Y])),_:1})])])])),_:1},8,["onOnsubmit"]),0===i.replyList.length?((0,o.wg)(),(0,o.iD)("p",I,"댓글이 없습니다. 제일 먼저 댓글을 작성해보세요.")):((0,o.wg)(),(0,o.j4)(c,{key:i.replyList,replyList:i.replyList,onRefreshList:a.listPostReply,onRemoveReply:a.listPostReply,onUpdateReply:a.onUpdateReply},null,8,["replyList","onRefreshList","onRemoveReply","onUpdateReply"]))])}var E=s(9242);const M=t=>((0,o.dD)("data-v-11b59fbe"),t=t(),(0,o.Cn)(),t),S={class:"post__reply__list__wrapper"},q={class:"d-flex-w flex--between mb--10"},H={class:"post__reply__count"},O=(0,o.Uk)("댓글 "),j=(0,o.Uk)("댓글 관리 "),z={class:"post__reply__depth1"},F=["data-depth"],Z=["innerHTML"],B={class:"post__reply__info"},N={class:"post__reply__author"},K=M((()=>(0,o._)("i",{class:"xi-user-o","aria-hidden":"true"},null,-1))),V={class:"post__reply__author-to"},G={class:"post__reply__reg-date"},J=M((()=>(0,o._)("strong",null,[(0,o._)("i",{class:"xi-time-o","aria-hidden":"true"}),(0,o.Uk)(" 등록일 : ")],-1))),Q={key:0,class:"post__reply__info-inner"},X={key:1,class:"post__reply__toggle"},tt={key:0,class:"post__reply__toggle-list"},et=["onClick"],st=M((()=>(0,o._)("i",{class:"xi-pen-o","aria-hidden":"true"},null,-1))),ot=(0,o.Uk)(" 댓글 수정 "),nt=[st,ot],lt=["onClick"],it=M((()=>(0,o._)("i",{class:"xi-trash-o","aria-hidden":"true"},null,-1))),at=(0,o.Uk)(" 댓글 삭제 "),pt=[it,at];function rt(t,e,s,l,i,a){const p=(0,o.up)("ui-icon-button"),r=(0,o.up)("ui-button"),d=(0,o.up)("app-add-post-reply-depth");return(0,o.wg)(),(0,o.iD)("div",S,[(0,o._)("div",q,[(0,o._)("div",null,[(0,o._)("strong",H,[O,(0,o._)("span",null,(0,n.zw)(i.realReplyList.length),1)]),(0,o.Wm)(p,{type:"button",color:"primary",icon:"xi-refresh",text:"댓글 목록 새로고침",title:"댓글 목록 새로고침",class:(0,n.C_)("post__reply__btn--refresh"),onClick:a.refreshList},null,8,["onClick"])]),(0,o._)("div",null,[t.isLogin?((0,o.wg)(),(0,o.j4)(r,{key:0,type:"button",color:"secondary",routerLink:"/admin/post-reply"},{default:(0,o.w5)((()=>[j])),_:1})):(0,o.kq)("",!0)])]),(0,o._)("ul",z,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.replyList,((e,s)=>((0,o.wg)(),(0,o.iD)("li",{key:s,"data-depth":e.depth,class:(0,n.C_)({post__reply__list:!0,"post__reply__list--deleted":"Y"===e.delYn,"post__reply__list--admin":"Y"===e.adminYn})},[(0,o._)("p",{class:"post__reply__cont",innerHTML:e.cont},null,8,Z),(0,o._)("div",B,[(0,o._)("p",N,[K,(0,o._)("span",V,(0,n.zw)(e.author),1)]),(0,o._)("p",G,[J,(0,o._)("span",null,(0,n.zw)(e.regDate),1)]),"N"===e.delYn&&1===e.depth?((0,o.wg)(),(0,o.iD)("div",Q,[(0,o.Wm)(p,{type:"button",color:"secondary",icon:"xi-pen",text:"댓글 남기기",title:"댓글 남기기",class:(0,n.C_)("post__reply__btn--show"),onClick:t=>a.toggleDepth(s)},null,8,["onClick"])])):(0,o.kq)("",!0)]),s===i.depthActiveIndex?((0,o.wg)(),(0,o.j4)(d,{key:e,reply:e,onRefreshList:a.refreshList},null,8,["reply","onRefreshList"])):(0,o.kq)("",!0),"N"===e.delYn?((0,o.wg)(),(0,o.iD)("div",X,[(0,o.Wm)(p,{type:"button",icon:"xi-cog",text:"포스트 댓글 수정/삭제",title:"포스트 댓글 수정/삭제",class:(0,n.C_)("post__reply__btn--toggle"),onClick:(0,E.iM)((t=>a.toggleMenu(s)),["stop"])},null,8,["onClick"]),s===i.menuActiveIndex?((0,o.wg)(),(0,o.iD)("div",tt,[(0,o._)("ul",null,[(0,o._)("li",null,[(0,o._)("button",{type:"button",class:"post__reply__btn--edit",ref_for:!0,ref:"postReplyMenuBtn",onClick:s=>a.openModal("E01003",e,t.isLogin)},nt,8,et)]),(0,o._)("li",null,[(0,o._)("button",{type:"button",class:"post__reply__btn--delete",ref_for:!0,ref:"postReplyMenuBtn",onClick:s=>a.openModal("E01004",e,t.isLogin)},pt,8,lt)])])])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)],10,F)))),128))])])}const dt={class:"d-flex-w gap--15 mt--20"},_t=(0,o._)("label",{for:"updatePostReplyAuthor",class:"pt--5"},"닉네임",-1),ut=(0,o._)("label",{for:"updatePostReplyPw",class:"pt--5"},"비밀번호",-1),ct=(0,o.Uk)("수정 ");function mt(t,e,s,n,l,i){const a=(0,o.up)("ui-hidden-field"),p=(0,o.up)("ui-textarea"),r=(0,o.up)("ui-text-field"),d=(0,o.up)("ui-button"),_=(0,o.up)("ui-form"),u=(0,o.up)("ui-modal");return(0,o.wg)(),(0,o.j4)(u,{title:"포스트 댓글 수정",name:this.$options.name},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{name:"updatePostReplyForm",onOnsubmit:i.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(a,{name:"id",id:"updatePostReplyId",value:s.reply.id},null,8,["value"]),(0,o.Wm)(a,{name:"parentId",id:"updatePostReplyParentId",value:s.reply.parentId},null,8,["value"]),(0,o.Wm)(a,{name:"crudType",id:"updatePostReplyCrudType",value:"E01003"}),(0,o.Wm)(p,{name:"cont",id:"updatePostReplyCont",title:"포스트 내용 입력",placeholder:"하고싶은 말을 남겨주세요.",cols:"30",rows:"4",resize:"vertical",rules:"required",value:l.replacedCont},null,8,["placeholder","value"]),(0,o._)("div",dt,[_t,(0,o.Wm)(r,{type:"text",name:"author",id:"updatePostReplyAuthor",rules:"required|max:20",readonly:"Y"===s.reply.adminYn,value:s.reply.author},null,8,["readonly","value"]),ut,(0,o.Wm)(r,{type:"password",name:"authorPw",id:"updatePostReplyPw",rules:"required|min:8|max:15"}),(0,o.Wm)(d,{type:"submit",color:"primary"},{default:(0,o.w5)((()=>[ct])),_:1})])])),_:1},8,["onOnsubmit"])])),_:1},8,["name"])}var ht={name:"app-update-post-reply-modal",props:{reply:Object},data(){return{replacedCont:""}},created(){this.replacedCont=this.reply.cont.replaceAll("<br>","\r\n")},methods:{async onSubmit(t){const e=await x.wW.confirmSuccess("저장하시겠습니까?");e&&this.$http.put("/postReply",t).then((t=>{x.wW.toastSuccess("저장되었습니다."),this.$modal.hide(this.$options.name),this.$store.dispatch("Post/FETCH_UPDATED_POST_REPLY",t.data)}))}}},yt=s(89);const wt=(0,yt.Z)(ht,[["render",mt]]);var gt=wt;const vt={class:"d-flex-w gap--10"},ft=(0,o.Uk)("삭제 ");function kt(t,e,s,n,l,i){const a=(0,o.up)("ui-hidden-field"),p=(0,o.up)("ui-text-field"),r=(0,o.up)("ui-button"),d=(0,o.up)("ui-form"),_=(0,o.up)("ui-modal");return(0,o.wg)(),(0,o.j4)(_,{title:"포스트 댓글 삭제",name:this.$options.name},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"removePostReplyForm",onOnsubmit:i.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(a,{name:"id",id:"removePostReplyId",value:s.reply.id},null,8,["value"]),(0,o.Wm)(a,{name:"parentId",id:"removePostReplyParentId",value:s.reply.parentId},null,8,["value"]),(0,o.Wm)(a,{name:"author",id:"removePostReplyAuthor",value:s.reply.author},null,8,["value"]),(0,o.Wm)(a,{name:"crudType",id:"removePostReplyCrudType",value:"E01004"}),(0,o._)("div",vt,[(0,o.Wm)(p,{type:"password",name:"authorPw",id:"removePostReplyPw",title:"비밀번호 입력",placeholder:"비밀번호 입력",disabled:t.isLogin,rules:t.isLogin?"":"required|min:8|max:15"},null,8,["disabled","rules"]),(0,o.Wm)(r,{type:"submit",color:"primary"},{default:(0,o.w5)((()=>[ft])),_:1})])])),_:1},8,["onOnsubmit"])])),_:1},8,["name"])}var Pt={name:"app-remove-post-reply-modal",props:{reply:Object},methods:{async onSubmit(t){const e=await x.wW.confirmSuccess("삭제하시겠습니까?");e&&this.$http.post("/postreply/remove",t).then((e=>{x.wW.toastSuccess("삭제되었습니다."),this.$modal.hide(this.$options.name),this.$store.dispatch("Post/FETCH_REMOVED_POST_REPLY",t)}))}}};const bt=(0,yt.Z)(Pt,[["render",kt]]);var Lt=bt;const xt={class:"post__reply__write-depth"},Rt={class:"post__reply__write-to"},Ct={class:"post__reply__write__inputs"},$t={class:"post__reply__write__inputs-inner"},Wt=(0,o.Uk)("등록 ");function Dt(t,e,s,l,i,a){const p=(0,o.up)("ui-hidden-field"),r=(0,o.up)("ui-textarea"),d=(0,o.up)("ui-text-field"),_=(0,o.up)("ui-button"),u=(0,o.up)("ui-form");return(0,o.wg)(),(0,o.iD)("div",xt,[(0,o._)("div",Rt,[(0,o.Wm)(u,{name:"addPostReplyDepthForm",class:(0,n.C_)("post__reply__list-frm"),onOnsubmit:a.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"parentId",id:"addPostReplyParentId",value:s.reply.parentId},null,8,["value"]),(0,o.Wm)(p,{name:"parentReplyId",id:"addPostReplyParentReplyId",value:s.reply.id},null,8,["value"]),(0,o.Wm)(p,{name:"group",id:"addPostReplyGroup",value:s.reply.id},null,8,["value"]),(0,o.Wm)(p,{name:"depth",id:"addPostReplyDepth",value:s.reply.depth+1},null,8,["value"]),(0,o.Wm)(p,{name:"crudType",id:"addPostReplyCrudType",value:"E01001"}),(0,o.Wm)(r,{name:"cont",title:"댓글 내용 입력",placeholder:"하고싶은 말을 남겨주세요.",cols:"30",rows:"4",rules:"required|max:1000"},null,8,["placeholder"]),(0,o._)("div",Ct,[(0,o._)("div",$t,[(0,o.Wm)(d,{type:"text",name:"author",id:`depthAuthor${s.reply.id}`,class:(0,n.C_)("post__reply__input"),label:"닉네임",rules:"required|max:20",readonly:t.isLogin,value:t.isLogin?"관리자":""},null,8,["id","readonly","value"]),(0,o.Wm)(d,{type:"password",name:"authorPw",id:"addPostReplyAuthorPw",class:(0,n.C_)("post__reply__input"),label:"비밀번호",rules:"required|min:8|max:15"})]),(0,o.Wm)(_,{type:"submit",class:(0,n.C_)("post__reply__btn--write post__reply__btn--write-depth")},{default:(0,o.w5)((()=>[Wt])),_:1})])])),_:1},8,["onOnsubmit"])])])}var Ut={name:"app-add-post-reply-depth",props:{reply:Object},methods:{async onSubmit(t){const e=await x.wW.confirmSuccess("저장하시겠습니까?");e&&this.$http.post("/postreply",t).then((t=>{x.wW.toastSuccess("저장되었습니다."),this.$emit("refreshList")}))}}};const Tt=(0,yt.Z)(Ut,[["render",Dt],["__scopeId","data-v-71021340"]]);var Yt=Tt,It={name:"app-post-reply-list",components:{AppUpdatePostReplyModal:gt,AppRemovePostReplyModal:Lt,AppAddPostReplyDepth:Yt},props:{replyList:Array},watch:{"$store.state.Post.updatedPostReply"(t){0<Object.values(t).length&&(this.$store.dispatch("Post/FETCH_UPDATED_POST_REPLY",{}),this.$emit("updateReply",t))},"$store.state.Post.removedPostReply"(t){0<Object.values(t).length&&(this.$store.dispatch("Post/FETCH_REMOVED_POST_REPLY",{}),this.$emit("removeReply"))}},data(){return{realReplyList:[],menuActiveIndex:-1,depthActiveIndex:-1,isEmpty:x.xb}},created(){(0,x.kJ)(this.replyList)&&(this.realReplyList=this.replyList.filter((t=>"N"===t.delYn)))},mounted(){document.addEventListener("click",this.closeMenu)},unmounted(){document.removeEventListener("click",this.closeMenu)},methods:{refreshList(){this.$emit("refreshList")},toggleDepth(t){t!==this.depthActiveIndex?this.depthActiveIndex=t:this.depthActiveIndex=-1},toggleMenu(t){t!==this.menuActiveIndex?this.menuActiveIndex=t:this.menuActiveIndex=-1},closeMenu(t){(0,x.UE)(this.$refs["postReplyMenuBtn"])&&!this.$refs["postReplyMenuBtn"].includes(t.target)&&(this.menuActiveIndex=-1)},openModal(t,e,s){s||"Y"!==e.adminYn?"E01003"===t?this.$modal.show({component:gt,bind:{reply:e}}):"E01004"===t&&this.$modal.show({component:Lt,bind:{reply:e}}):x.wW.toastError("수정/삭제 권한이 없습니다.")}}};const At=(0,yt.Z)(It,[["render",rt],["__scopeId","data-v-11b59fbe"]]);var Et=At,Mt={name:"app-add-post-reply",components:{AppPostReplyList:Et},props:{id:Number},data(){return{replyList:Array}},created(){this.listPostReply()},methods:{async onSubmit(t){const e=await x.wW.confirmSuccess("저장하시겠습니까?");e&&this.$http.post("/postreply",t).then((t=>{x.wW.toastSuccess("저장되었습니다."),this.listPostReply()}))},listPostReply(){return this.$http.get(`/postreply/list/${this.id}`).then((t=>{t.data[0].map((t=>{this.setData(t)})),this.replyList=[...t.data[0]]}))},onUpdateReply(t){const{id:e,author:s,cont:o,modDate:n}=t;this.replyList.map((t=>{t.id===e&&(t.author=s,t.cont=o,t.cont=this.setData(t).cont,t.modDate=this.$moment(n).format("YYYY-MM-DD HH:mm:ss"))}))},setData(t){return t.cont=t.cont.replace(/\r\n|\n/g,"<br>"),t.cont=t.cont.replaceAll("\\r\\n","<br>"),t.regDate=this.$moment(t.regDate).format("YYYY-MM-DD HH:mm:ss"),(0,x.UE)(t.modDate)&&(t.modDate=this.$moment(t.modDate).format("YYYY-MM-DD HH:mm:ss")),t}}};const St=(0,yt.Z)(Mt,[["render",A],["__scopeId","data-v-58b79a02"]]);var qt=St,Ht={name:"app-post-view",components:{AppAddPostReply:qt},data(){return{pageTitle:"",page:this.$route.query.page,post:null,prevPost:null,nextPost:null,postUrl:null,postLikeCnt:0,isPostLiked:!1,snsCodeList:[],dataLoaded:!1}},created(){this.init(this.$route.params.id)},watch:{"$route.params.id"(t){this.init(t)}},methods:{async init(t){this.dataLoaded=!1,this.post=null,this.prevPost=null,this.nextPost=null,this.postUrl=null,await Promise.all([this.getPost(t),this.getPostLike(t),this.listPrevAndNextPost(t)]),this.dataLoading(),this.postUrl=this.$nowUrl,this.postLikeCnt=this.post.postLike.length,this.snsCodeList=this.$store.state.Code.data.filter((t=>"C01"===t.prefix))},getPost(t){return this.$http.get(`/post/${t}`).then((t=>{this.post={...t.data},this.post.regDate=this.$moment(this.post.regDate).format("YYYY-MM-DD HH:mm:ss"),(0,x.SL)(this.post.modDate)&&(this.post.modDate=this.$moment(this.post.modDate).format("YYYY-MM-DD HH:mm:ss")),this.pageTitle=this.post.title,R.a.setPageTitle(this.pageTitle)}))},listPrevAndNextPost(t){return this.$http.get(`/post/prevnext/${t}`).then((t=>{const[e,s]=t.data;this.prevPost=e||null,this.nextPost=s||null}))},getPostLike(t){return this.$http.get(`/postlike/${t}`).then((t=>{(0,x.UE)(t.data)?this.isPostLiked=!0:this.isPostLiked=!1}))},savePostLike(t){return this.$http.post(`/postlike/${t}`).then((e=>{0===this.postLikeCnt&&-1===e.data||(this.getPostLike(t),this.postLikeCnt+=e.data)}))},async onSubmit(t){const e=await x.wW.confirmSuccess("삭제하시겠습니까?");e&&this.$http.delete(`/post/${t.id}`).then((async t=>{x.wW.toastSuccess("삭제되었습니다."),this.goToList()}))},goToList(){this.$store.dispatch("Post/FETCH_MAIN_POSTLIST",{}),this.$store.dispatch("Layout/FETCH_SIDEBAR",{}),this.$router.push({path:"/",query:{page:this.page}})},copyPostUrl(){navigator.clipboard.writeText(this.postUrl),x.wW.toastSuccess("URL이 복사되었습니다.")},dataLoading(){(0,x.UE)(this.post)&&(this.dataLoaded=!0)}}};const Ot=(0,yt.Z)(Ht,[["render",L],["__scopeId","data-v-fba1f7d2"]]);var jt=Ot}}]);
//# sourceMappingURL=282.a4e14930.js.map