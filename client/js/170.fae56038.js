"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[170],{6597:function(e,t,a){a.d(t,{a:function(){return r}});var o=a(9803),n=a(4722);class i{constructor(){}setPageTitle(e){(0,n.UE)(e)?document.title=`${e} - ${o.Z.state.BlogConfig.data.title}`:document.title=o.Z.state.BlogConfig.data.title}}const r=new i},5170:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var o=a(3396);const n={class:"d-flex flex--right gap--10 mb--15"},i=(0,o.Uk)("추가 ");function r(e,t,a,r,l,s){const d=(0,o.up)("ui-skeletor"),c=(0,o.up)("ui-button"),u=(0,o.up)("ui-tree"),g=(0,o.up)("ui-pane"),p=(0,o.up)("app-save-category"),h=(0,o.up)("ui-split-pane"),m=(0,o.up)("ui-tab"),y=(0,o.up)("ui-tabs"),f=(0,o.up)("app-content-wrapper");return(0,o.wg)(),(0,o.j4)(f,{pageTitle:l.pageTitle},{default:(0,o.w5)((()=>[l.dataLoaded?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o._)("div",n,[(0,o.Wm)(c,{color:"primary",onClick:s.addCategory},{default:(0,o.w5)((()=>[i])),_:1},8,["onClick"])]),(0,o.Wm)(y,{onOnTabChanged:s.onTabChanged},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{name:"카테고리"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,{isTransparent:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{nodes:l.categoryTree,useCheckbox:!1,filter:!0,placeholder:"카테고리/포스트 제목 입력",onOnNodeClick:s.onNodeClick},null,8,["nodes","onOnNodeClick"])])),_:1}),e.isSplitterActive?((0,o.wg)(),(0,o.j4)(g,{key:0},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)(p,{category:l.category,key:l.type+l.category.id},null,8,["category"]))])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(m,{name:"태그"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,{isTransparent:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{nodes:l.tagTree,useCheckbox:!1,filter:!0,placeholder:"태그/포스트 제목 입력",onOnNodeClick:s.onNodeClick},null,8,["nodes","onOnNodeClick"])])),_:1}),e.isSplitterActive?((0,o.wg)(),(0,o.j4)(g,{key:0},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)(p,{category:l.category,key:l.type+l.category.id},null,8,["category"]))])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["onOnTabChanged"])],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(d,{height:"1.3rem"},null,8,["height"]),(0,o.Wm)(d,{height:"1.3rem"},null,8,["height"]),(0,o.Wm)(d,{height:"1.3rem"},null,8,["height"])],64))])),_:1},8,["pageTitle"])}const l=(0,o._)("label",{for:"codeId"},"카테고리 명",-1),s=(0,o._)("label",{for:"codeId"},"카테고리 등록일시",-1);function d(e,t,a,n,i,r){const d=(0,o.up)("ui-hidden-field"),c=(0,o.up)("ui-text-field"),u=(0,o.up)("ui-split-form");return(0,o.wg)(),(0,o.j4)(u,{name:"saveCodeForm",onOnSubmit:r.onSubmit,onOnRemove:r.onRemove,btnRemove:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"id",value:a.category.id},null,8,["value"]),l,(0,o._)("div",null,[(0,o.Wm)(c,{type:"text",name:"nm",id:"categoryNm",rules:"required",value:a.category.nm},null,8,["value"])]),s,(0,o._)("div",null,[(0,o.Wm)(c,{type:"text",name:"regDate",id:"categoryRegDate",value:a.category.regDate},null,8,["value"])])])),_:1},8,["onOnSubmit","onOnRemove"])}var c=a(2222),u={name:"app-save-category",props:{category:Object},methods:{async onSubmit(e){console.log(e);await c.w.confirmSuccess("저장하시겠습니까?")},async onRemove(){await c.w.confirmSuccess("삭제하시겠습니까?")}}},g=a(89);const p=(0,g.Z)(u,[["render",d]]);var h=p,m=a(6597),y=a(4722),f={name:"app-admin-category",components:{AppSaveCategory:h},data(){return{pageTitle:"카테고리/태그 관리",dataLoaded:!1,categoryTree:[],tagTree:[],category:{},type:"",activeIndex:-1}},created(){this.init()},methods:{async init(){m.a.setPageTitle(this.pageTitle),await Promise.all([this.listTreeCategoryAndPost(),this.listTreeTagAndPost()]),this.$store.commit("Splitter/TOGGLE",!0),this.dataLoaded=!0},listTreeCategoryAndPost(){return this.$http.get("/category/list/tree").then((e=>{this.createTree(e.data,"category")}))},listTreeTagAndPost(){return this.$http.get("/tag/list/tree").then((e=>{this.createTree(e.data,"tag")}))},createTree(e,t){e.forEach((e=>{let a=[];a="category"===t?e.postCategory:e.postTag;let o={id:e.id,label:this.getTreeLabel(e.nm,t),nodes:a.map(((e,t,a)=>{if(0===a.length)return{};let o={id:e.postId,label:e.post.title};return o}))};this.pushNode(o,t)}))},getTreeLabel(e,t){return"category"===t?e:`#${e}`},pushNode(e,t){"category"===t?this.categoryTree.push(e):this.tagTree.push(e)},onNodeClick(e){this.$store.commit("Splitter/TOGGLE",!0),(0,y.UE)(e.nodes)&&this.getCategory(e)},onTabChanged(e){this.activeIndex=e.tab.index},getCategory(e){return 0===this.activeIndex&&(this.type="category"),1===this.activeIndex&&(this.type="tag"),this.$http.get(`/${this.type}/${e.id}`).then((e=>{this.category={...e.data},this.category.regDate=this.$moment(this.category.regDate).format("YYYY-MM-DD HH:mm:ss")}))},addCategory(){this.category={},this.category.id=null}}};const T=(0,g.Z)(f,[["render",r]]);var v=T}}]);
//# sourceMappingURL=170.fae56038.js.map