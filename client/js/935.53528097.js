"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[935],{4935:function(e,a,t){t.r(a),t.d(a,{default:function(){return E}});var r=t(3396);const o={class:"d-flex flex--right gap--10 mb--15"};function m(e,a,t,m,l,i){const d=(0,r.up)("ui-icon-button"),n=(0,r.up)("ui-grid"),s=(0,r.up)("app-content-wrapper");return(0,r.wg)(),(0,r.j4)(s,null,{default:(0,r.w5)((()=>[(0,r._)("div",o,[(0,r.Wm)(d,{color:"primary",icon:"xi-pen",text:"그룹 생성",showText:!0,onClick:a[0]||(a[0]=e=>i.openModal("E01001"))}),(0,r.Wm)(d,{color:"dark",icon:"xi-trash",text:"그룹 삭제",showText:!0,onClick:i.removePrograms},null,8,["onClick"])]),(0,r.Wm)(n,{columnDefs:l.columnDefs,rowData:l.rowData,checkboxIndex:0,rowNumIndex:1,pagination:!0,onGridready:i.onGridReady,onCellclicked:i.onCellClicked},null,8,["columnDefs","rowData","onGridready","onCellclicked"])])),_:1})}var l=t(8822),i=t(7139);const d=e=>((0,r.dD)("data-v-f873efc0"),e=e(),(0,r.Cn)(),e),n={class:"program__write__inputs"},s={class:"program__write__input-box"},u=d((()=>(0,r._)("label",{for:"programNm",class:"program__write__label"},"프로그램 그룹 명",-1))),p={class:"program__write__btns"},c={key:1};function h(e,a,t,o,m,l){const d=(0,r.up)("ui-hidden-field"),h=(0,r.up)("ui-text-field"),g=(0,r.up)("ui-button"),D=(0,r.up)("ui-grid"),w=(0,r.up)("ui-pane"),f=(0,r.up)("app-save-program-detail"),_=(0,r.up)("ui-split-pane"),b=(0,r.up)("ui-form"),Y=(0,r.up)("ui-modal");return(0,r.wg)(),(0,r.j4)(Y,{title:t.program?m.programNm:"프로그램 그룹 등록",name:this.$options.name,full:!0,class:"program-modal__wrapper"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{name:"programForm",onOnsubmit:l.onSubmit},{default:(0,r.w5)((()=>[t.program?((0,r.wg)(),(0,r.j4)(d,{key:0,name:"id",value:t.program.id},null,8,["value"])):(0,r.kq)("",!0),(0,r._)("div",n,[(0,r._)("div",s,[u,(0,r.Wm)(h,{name:"nm",id:"programNm",rules:"required|max:50",value:t.program?.nm,modelValue:m.programNm,"onUpdate:modelValue":a[0]||(a[0]=e=>m.programNm=e)},null,8,["value","modelValue"])]),(0,r._)("div",p,[(0,r.Wm)(g,{type:"submit",color:"primary",text:"저장",class:(0,i.C_)("program__btn program__btn--write")}),t.program?((0,r.wg)(),(0,r.j4)(g,{key:0,type:"button",color:"dark",text:"삭제",class:(0,i.C_)("program__btn program__btn--write"),onClick:a[1]||(a[1]=e=>l.removePost(t.program.id))})):(0,r.kq)("",!0)])]),"E01002"===t.crudType?((0,r.wg)(),(0,r.iD)("p",c," 총 "+(0,i.zw)(this.rowData.length)+"개의 하위 프로그램 ",1)):(0,r.kq)("",!0),(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[(0,r.Wm)(D,{columnDefs:m.columnDefs,rowData:m.rowData,checkboxIndex:0,pagination:!0,onGridready:l.onGridReady,onCellclicked:l.onCellClicked},null,8,["columnDefs","rowData","onGridready","onCellclicked"])])),_:1}),e.isSplitterActive?((0,r.wg)(),(0,r.j4)(w,{key:0},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)(f,{programDetail:m.programDetail,key:m.programDetail.id},null,8,["programDetail"]))])),_:1})):(0,r.kq)("",!0)])),_:1})])),_:1},8,["onOnsubmit"])])),_:1},8,["title","name"])}function g(e,a,t,o,m,l){const i=(0,r.up)("ui-text-field"),d=(0,r.up)("ui-radio"),n=(0,r.up)("ui-radio-group"),s=(0,r.up)("ui-split-form");return(0,r.wg)(),(0,r.j4)(s,{name:"saveProgramForm"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"nm",id:"programNm",label:"프로그램 명",rules:"required|max:50",block:!0,modelValue:m.nm,"onUpdate:modelValue":a[0]||(a[0]=e=>m.nm=e)},null,8,["modelValue"]),(0,r.Wm)(i,{name:"method",id:"programMethod",label:"요청 메소드",rules:"required|max:7",block:!0,modelValue:m.method,"onUpdate:modelValue":a[1]||(a[1]=e=>m.method=e)},null,8,["modelValue"]),(0,r.Wm)(i,{name:"routePath",id:"programRoutePath",label:"요청 URL ROUTE PATH",rules:"required|max:100",block:!0,modelValue:m.routePath,"onUpdate:modelValue":a[2]||(a[2]=e=>m.routePath=e)},null,8,["modelValue"]),(0,r.Wm)(i,{name:"regDate",id:"programRegDate",label:"프로그램 등록일시",readonly:!0,block:!0,modelValue:m.regDate,"onUpdate:modelValue":a[3]||(a[3]=e=>m.regDate=e)},null,8,["modelValue"]),(0,r.Wm)(i,{name:"modDate",id:"programModDate",label:"프로그램 수정일시",readonly:!0,block:!0,modelValue:m.modDate,"onUpdate:modelValue":a[4]||(a[4]=e=>m.modDate=e)},null,8,["modelValue"]),(0,r.Wm)(n,{label:"프로그램 사용 여부"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{id:"programUseYn1",name:"useYn",label:"사용",value:"Y",rules:"required",modelValue:m.useYn,"onUpdate:modelValue":a[5]||(a[5]=e=>m.useYn=e)},null,8,["modelValue"]),(0,r.Wm)(d,{id:"programUseYn2",name:"useYn",label:"미사용",value:"N",rules:"required",modelValue:m.useYn,"onUpdate:modelValue":a[6]||(a[6]=e=>m.useYn=e)},null,8,["modelValue"])])),_:1})])),_:1})}var D={name:"AppSaveProgram",props:{programDetail:{type:Object,default:()=>({})}},data(){return{nm:"",method:"",routePath:"",regDate:"",modDate:"",useYn:""}},created(){this.nm=this.programDetail.nm,this.method=this.programDetail.method,this.routePath=this.programDetail.routePath,this.regDate=this.programDetail.regDate,this.modDate=this.programDetail?.modDate,this.useYn=this.programDetail.useYn}},w=t(89);const f=(0,w.Z)(D,[["render",g]]);var _=f,b={name:"AppProgramModal",components:{AppSaveProgramDetail:_},props:{crudType:String,program:Object},data(){return{columnDefs:[{},{headerName:"프로그램 명",field:"nm"},{headerName:"요청 메소드",field:"method",width:80},{headerName:"ROUTE PATH",field:"routePath"},{headerName:"사용 여부",field:"useYnNm",width:80},{headerName:"등록일시",field:"regDate",width:100}],rowData:[],gridApi:null,programNm:"",programDetail:{}}},created(){(0,l.UE)(this.program)&&this.program.programDetail.forEach((e=>{e.useYnNm=this.getUseYn(e.useYn),e.regDate=this.$moment(e.regDate).format("YYYY-MM-DD HH:mm:ss"),this.rowData.push(e)}))},methods:{onGridReady(e){this.gridApi=e},onCellClicked(e){this.programDetail=this.program.programDetail.find((a=>a.id===e.data.id)),this.$store.commit("Splitter/TOGGLE",!0)},getModalTitle(){switch(this.crudType){case"E01001":return"프로그램 그룹 등록";case"E01002":return this.programNm}},getUseYn(e){switch(e){case"Y":return"사용";case"N":return"미사용"}},async onSubmit(e){const a=await l.wW.confirmSuccess("그룹을 저장하시겠습니까?");a&&("E01001"!==this.crudType&&"E01002"!==this.crudType||this.$http.post("/program",e).then((e=>{l.wW.toastSuccess("저장되었습니다."),this.$modal.hide(this.$options.name),this.$store.dispatch("Program/FETCH_SAVED_PROGRAM",e.data)})))},async removePost(e){const a=await l.wW.confirmSuccess("그룹을 삭제하시겠습니까?");a&&this.$http.delete(`/program/${e}`).then((e=>{l.wW.toastSuccess("삭제되었습니다."),this.$modal.hide(this.$options.name),this.$store.dispatch("Program/FETCH_REMOVED_PROGRAM",e.data)}))}}};const Y=(0,w.Z)(b,[["render",h],["__scopeId","data-v-f873efc0"]]);var P=Y,k={name:"AppAdminProgram",components:{AppProgramModal:P},data(){return{columnDefs:[{},{},{headerName:"프로그램 그룹 명",field:"nm"},{headerName:"등록일시",field:"regDate",width:100},{headerName:"수정일시",field:"modDate",width:100}],rowData:[],gridApi:null}},async created(){this.$store.dispatch("Breadcrumb/FETCH_PAGE_TITLE","프로그램 관리"),await this.listProgram()},watch:{async"$store.state.Program.savedProgram"(e){0<Object.values(e).length&&(await this.listProgram(),this.$store.dispatch("Program/FETCH_SAVED_PROGRAM",{}))},async"$store.state.Program.removedProgram"(e){0<Object.values(e).length&&(await this.listProgram(),this.$store.dispatch("Program/FETCH_REMOVED_PROGRAM",{}))}},methods:{onGridReady(e){this.gridApi=e},onCellClicked(e){this.$store.commit("Loading/SET_USE_LOADING",!1),this.$http.get(`/program/${e.data.id}`).then((e=>{e.data.regDate=this.$moment(e.data.regDate).format("YYYY-MM-DD HH:mm:ss"),(0,l.SL)(e.data.modDate)&&(e.data.modDate=this.$moment(e.data.modDate).format("YYYY-MM-DD HH:mm:ss")),this.openModal("E01002",e.data)}))},listProgram(){return this.$http.get("/program").then((e=>{e.data.forEach((e=>{e.regDate=this.$moment(e.regDate).format("YYYY-MM-DD HH:mm:ss"),(0,l.SL)(e.modDate)&&(e.modDate=this.$moment(e.modDate).format("YYYY-MM-DD HH:mm:ss"))})),this.rowData=[...e.data]}))},openModal(e,a=null){this.$store.commit("Splitter/TOGGLE",!1),"E01001"===e?this.$modal.show({component:P,bind:{crudType:e}}):"E01002"===e&&this.$modal.show({component:P,bind:{crudType:e,program:a}}),this.$store.commit("Loading/SET_USE_LOADING",!0)},async removePrograms(){const e=this.gridApi.getSelectedRows();if(0===e.length)return void l.wW.toastWarning("삭제할 그룹을 선택하세요.");const a=await l.wW.confirmQuestion("하위 프로그램도 삭제됩니다. 계속하시겠습니까?");if(!a)return;let t=[];e.forEach((e=>{t.push({id:e.id})})),this.$http.post("/program/remove",t).then((e=>{this.gridApi.removeSelectedRows(),l.wW.toastSuccess("삭제되었습니다.")}))}}};const v=(0,w.Z)(k,[["render",m]]);var E=v}}]);