"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[906],{272:function(t,s,i){i.r(s),i.d(s,{default:function(){return lt}});var a=i(3396);function e(t,s,i,e,n,o){const l=(0,a.up)("ui-loading"),p=(0,a.up)("ui-pagination"),r=(0,a.up)("app-post-list"),c=(0,a.up)("app-widget-config"),g=(0,a.up)("app-content-wrapper");return(0,a.wg)(),(0,a.j4)(g,{pageTitle:n.pageTitle},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{activeModel:!n.dataLoaded,fullPage:!0},null,8,["activeModel"]),n.dataLoaded?((0,a.wg)(),(0,a.j4)(r,{key:0,type:"main",page:n.page,postList:n.pagingPostList,categoryList:n.categoryList,onListPost:o.listPostByCategory,onRemovePost:o.refreshPostList},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)(p,{value:n.postList,key:n.postList,total:n.listCnt,first:n.page,rows:5,size:10,onOnPage:o.onPage},null,8,["value","total","first","onOnPage"]))])),_:1},8,["page","postList","categoryList","onListPost","onRemovePost"])):(0,a.kq)("",!0),t.isLogin?((0,a.wg)(),(0,a.j4)(c,{key:1})):(0,a.kq)("",!0)])),_:1},8,["pageTitle"])}var n=i(6880),o=i(7139);const l=t=>((0,a.dD)("data-v-4c967dec"),t=t(),(0,a.Cn)(),t),p={class:"pagination"},r={class:"pagination__list pagination__list--first"},c=l((()=>(0,a._)("i",{class:"xi-step-backward","aria-hidden":"true"},null,-1))),g=l((()=>(0,a._)("span",{class:"sr-only"},"첫 번째 페이지",-1))),d=[c,g],h={class:"pagination__list pagination__list--prev"},u=l((()=>(0,a._)("i",{class:"xi-angle-left","aria-hidden":"true"},null,-1))),_=l((()=>(0,a._)("span",{class:"sr-only"},"이전 페이지",-1))),m=[u,_],L=["title","onClick"],k={class:"pagination__list pagination__list--next"},P=l((()=>(0,a._)("i",{class:"xi-angle-right","aria-hidden":"true"},null,-1))),y=l((()=>(0,a._)("span",{class:"sr-only"},"다음 페이지",-1))),C=[P,y],b={class:"pagination__list pagination__list--last"},w=l((()=>(0,a._)("i",{class:"xi-step-forward","aria-hidden":"true"},null,-1))),v=l((()=>(0,a._)("span",{class:"sr-only"},"마지막 페이지",-1))),f=[w,v];function A(t,s,i,e,n,l){return(0,a.wg)(),(0,a.iD)("nav",p,[(0,a._)("ul",null,[(0,a._)("li",r,[(0,a._)("span",{class:(0,o.C_)(["link",{"link--disabled":l.page<=1}]),onClick:s[0]||(s[0]=t=>l.onPage(1))},d,2)]),(0,a._)("li",h,[(0,a._)("span",{class:(0,o.C_)(["link",{"link--disabled":l.page<=1}]),onClick:s[1]||(s[1]=t=>l.onPage(l.page-1))},m,2)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.pages,((t,s)=>((0,a.wg)(),(0,a.iD)("li",{key:s,class:(0,o.C_)(["pagination__list","pagination__list--num",{"pagination__list--active":l.page===t}])},[(0,a._)("span",{title:""+(l.page===t?"현재 페이지":""),class:"link",onClick:s=>l.onPage(t)},(0,o.zw)(t),9,L)],2)))),128)),(0,a._)("li",k,[(0,a._)("span",{class:(0,o.C_)(["link",{"link--disabled":l.page>=l.paginationTotal}]),onClick:s[2]||(s[2]=t=>l.onPage(l.page+1))},C,2)]),(0,a._)("li",b,[(0,a._)("span",{class:(0,o.C_)(["link",{"link--disabled":l.page>=l.paginationTotal}]),onClick:s[3]||(s[3]=t=>l.onPage(l.paginationTotal))},f,2)])])])}var T={name:"ui-pagination",props:{value:Array,total:Number,first:{type:Number,default:1},rows:{type:Number,default:10},size:{type:Number,default:5}},data(){return{pageNum:this.first}},created(){this.onPage(this.page)},computed:{page:{get(){return this.pageNum},set(t){this.pageNum=t}},pages(){let t=[];for(let s=this.paginationStart;s<=this.paginationEnd;s++)t.push(s);return t},paginationSkip(){return(this.page-1)*this.rows},paginationRows(){return Math.ceil(this.paginationSkip/this.rows)*this.rows+this.rows},paginationStart(){const t=parseInt(this.page/this.size-1)*this.size+1;return this.page>=this.size?this.size-1:t},paginationEnd(){const t=parseInt(this.page/this.size)*this.size+this.size;return t<=this.paginationTotal?t:this.paginationTotal},paginationTotal(){return Math.ceil(this.total/this.rows)}},methods:{onPage(t){if(0===this.value.length)return void this.$emit("onPage",{page:1,pageData:[]});this.page=t;let s=this.value.slice(this.paginationSkip,this.paginationRows);0!==s.length?this.$emit("onPage",{page:this.page,pageData:s}):this.onPage(1)}}},S=i(89);const $=(0,S.Z)(T,[["render",A],["__scopeId","data-v-4c967dec"]]);var x=$;const E=t=>((0,a.dD)("data-v-646b39c0"),t=t(),(0,a.Cn)(),t),I={class:"post-list__wrapper"},Z={class:"post__category-filter d-flex-w gap--10 mb--15"},D=E((()=>(0,a._)("i",{class:"xi-check","aria-hidden":"true"},null,-1))),W={key:0,class:"post__btn-wrapper mt--15"},z=E((()=>(0,a._)("i",{class:"xi-pen","aria-hidden":"true"},null,-1))),H=(0,a.Uk)(" 포스트 작성 "),N=E((()=>(0,a._)("i",{class:"xi-trash","aria-hidden":"true"},null,-1))),U=(0,a.Uk)(" 포스트 삭제 "),O={class:"post__check-all"};function F(t,s,i,e,n,l){const p=(0,a.up)("ui-select"),r=(0,a.up)("ui-button"),c=(0,a.up)("ui-form"),g=(0,a.up)("ui-checkbox"),d=(0,a.up)("app-post-list-detail");return(0,a.wg)(),(0,a.iD)("div",I,[(0,a.Wm)(c,{name:"postListForm",onOnSubmit:l.removePost},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{name:"postCategoryForm",onOnSubmit:l.listPostByCategory},{default:(0,a.w5)((()=>[(0,a._)("div",Z,[(0,a._)("div",null,[(0,a.Wm)(p,{name:"categoryId",id:"categoryId",class:(0,o.C_)("post__category-filter-select"),title:"카테고리 선택",defaultValue:"카테고리 선택",data:i.categoryList,rules:"required"},null,8,["data"])]),(0,a.Wm)(r,{type:"submit",color:"dark",title:"선택한 카테고리로 포스트 조회",class:(0,o.C_)("post__category-filter-btn")},{default:(0,a.w5)((()=>[D])),_:1})])])),_:1},8,["onOnSubmit"]),t.isLogin&&"main"===i.type?((0,a.wg)(),(0,a.iD)("div",W,[(0,a.Wm)(r,{routerLink:"/add-post",color:"light",class:(0,o.C_)("post__btn")},{default:(0,a.w5)((()=>[z,H])),_:1}),(0,a.Wm)(r,{type:"submit",color:"dark",class:(0,o.C_)("post__btn")},{default:(0,a.w5)((()=>[N,U])),_:1}),(0,a._)("span",O,[(0,a.Wm)(g,{name:"checkAll",id:"checkAll",label:"포스트 전체 선택",values:"Y,N",modelValue:l.checkAll,"onUpdate:modelValue":s[0]||(s[0]=t=>l.checkAll=t),onClick:s[1]||(s[1]=t=>l.onClick(t))},null,8,["modelValue"])])])):(0,a.kq)("",!0),((0,a.wg)(),(0,a.j4)(d,{type:i.type,page:i.page,key:i.postList,postList:i.postList,checkList:l.checkList,checkAll:l.isCheckAll},null,8,["type","page","postList","checkList","checkAll"]))])),_:1},8,["onOnSubmit"]),(0,a.WI)(t.$slots,"default",{},void 0,!0)])}var j=i(2430),q=i(5351),B=i(7393),K=i(2075),M=i(4722),Y=i(1197),R={name:"app-post-list",components:{UiForm:j.Z,UiSelect:q.Z,UiCheckbox:B.Z,AppPostListDetail:K.Z},props:{type:String,page:Number,postList:Array,categoryList:Array},data(){return{initList:[]}},computed:{checkAll:{get(){return!!((0,M.UE)(this.postList)&&0<this.postList.length)&&this.isCheckAll},set(t){let s=[];"Y"===t&&this.postList.map((t=>{s.push(t.id)})),this.$store.dispatch("Post/FETCH_CHECKLIST",s)}},checkList:{get(){return this.$store.state.Post.checkList},set(t){}},isCheckAll:{get(){return this.$store.state.Post.checkAll},set(t){}}},methods:{async removePost(t){if(0===t.checkPost.length)return void Y.Z.toastWarning("삭제할 포스트를 선택하세요.");const s=t.checkPost.map((t=>{let s={};return s.id=t,s})),i=await Y.Z.confirmSuccess("포스트를 삭제하시겠습니까?");i&&this.$http.delete("/post",{data:s}).then((t=>{Y.Z.toastSuccess("삭제되었습니다."),this.$emit("removePost")}))},listPostByCategory(t){this.$http.get("/post",{params:t}).then((t=>{this.$emit("listPost",t.data)}))},onClick(t){this.$store.dispatch("Post/FETCH_CHECKALL",t.target.checked)}}};const V=(0,S.Z)(R,[["render",F],["__scopeId","data-v-646b39c0"]]);var G=V;const J={class:"widget__config"},Q=(0,a.uE)('<button type="button" id="widget" class="btn widget__btn widget__btn--config" data-v-607b26c3>위젯관리</button><button type="button" id="widget_save" class="btn widget__btn widget__btn--save" data-v-607b26c3>저장</button><div id="widget_use" class="widget__list" hidden="" data-v-607b26c3><h2 data-v-607b26c3>미사용 위젯</h2><input type="checkbox" name="widget_use" data-id="4" id="widget_use4" value="Y" data-v-607b26c3><label for="widget_use4" data-v-607b26c3>방문자 정보</label><input type="checkbox" name="widget_use" data-id="3" id="widget_use3" value="Y" data-v-607b26c3><label for="widget_use3" data-v-607b26c3>인기글</label></div>',3),X=[Q];function tt(t,s,i,e,n,o){return(0,a.wg)(),(0,a.iD)("div",J,X)}var st={name:"app-widget-config"};const it=(0,S.Z)(st,[["render",tt],["__scopeId","data-v-607b26c3"]]);var at=it,et=i(821),nt={name:"app-index",components:{UiLoading:n.Z,UiPagination:x,AppPostList:G,AppWidgetConfig:at},data(){return{pageTitle:"",page:null,listCnt:null,postList:[],pagingPostList:[],categoryList:[],dataLoaded:!1}},async created(){et.Z.setPageTitle(this.pageTitle),this.page=parseInt(this.$route.query.page)||1,this.listCategoryAndCount(),this.init()},computed:{storePostList(){return this.$store.state.Post.mainPostObj.postList},storePostListCnt(){return this.$store.state.Post.mainPostObj.listCnt},hasStorePostList(){return(0,M.UE)(this.storePostList)&&0<this.storePostList.length}},methods:{onPage(t){this.page=t.page,this.pagingPostList=[...t.pageData],this.$store.dispatch("Post/FETCH_CHECKLIST",[]),this.$store.dispatch("Post/FETCH_CHECKALL",!1)},async init(){if(!this.hasStorePostList)return await this.listPost(),void this.dataLoading();this.dataLoaded=!0,this.postList=[...this.storePostList],this.listCnt=this.storePostListCnt},async listPost(){const t=await this.$http.get("/post");return t.data[0].map((t=>{this.postList.push(t)})),this.listCnt=t.data[1],this.$store.dispatch("Post/FETCH_MAIN_POSTLIST",{postList:this.postList,listCnt:this.listCnt}),t},async refreshPostList(){const t=await this.listPost();this.listPostByCategory(t.data)},listPostByCategory(t){this.postList=[...t[0]],this.listCnt=t[1]},listCategoryAndCount(){return this.categoryList.push({value:"0",text:"전체"}),this.$http.get("/category").then((t=>{t.data.map((t=>{this.categoryList.push({value:t.id,text:t.nm})}))}))},dataLoading(){0<this.postList.length&&(this.dataLoaded=!0)}}};const ot=(0,S.Z)(nt,[["render",e]]);var lt=ot}}]);
//# sourceMappingURL=906.10b4ded2.js.map