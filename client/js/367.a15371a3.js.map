{"version":3,"file":"js/367.a15371a3.js","mappings":"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","sources":["webpack://selosele2/./src/services/breadcrumb/breadcrumbService.js","webpack://selosele2/./src/views/AppYear.vue","webpack://selosele2/./src/views/AppYear.vue?6e20"],"sourcesContent":["import store from '@/store';\r\nimport { isNotEmpty } from '@/utils';\r\n\r\n/** Breadcrumb Service */\r\nclass BreadcrumbService {\r\n\r\n  constructor() {\r\n  }\r\n\r\n  /** 페이지 타이틀 변경 */\r\n  setPageTitle(pageTitle) {\r\n    if (isNotEmpty(pageTitle)) {\r\n      document.title = `${pageTitle} - ${store.state.BlogConfig.data?.title}`;\r\n    } else {\r\n      document.title = store.state.BlogConfig.data?.title;\r\n    }\r\n  }\r\n  \r\n}\r\n\r\nexport const breadcrumbService = new BreadcrumbService();\r\n","<template>\r\n  <app-content-wrapper :pageTitle=\"pageTitle\">\r\n    <div class=\"year__wrapper\">\r\n      <template v-if=\"!dataLoaded\">\r\n        <ui-skeletor :height=\"'1.3rem'\"></ui-skeletor>\r\n        <ui-skeletor :height=\"'1.3rem'\"></ui-skeletor>\r\n        <ui-skeletor :height=\"'1.3rem'\"></ui-skeletor>\r\n      </template>\r\n\r\n      <template v-else>\r\n        <template v-for=\"(item,i) in yearList\" :key=\"i\">\r\n          <h2 class=\"year__list-title\">\r\n            <button type=\"button\"\r\n                    :class=\"[\r\n                      'year__list-btn',\r\n                      { 'year__list-btn--active': i === activeIndex }\r\n                      ]\"\r\n                    @click=\"toggleList(item.year, i)\">\r\n              <span class=\"year__list-name\">{{ item.year }}</span>년에 작성된 포스트\r\n              (<span class=\"sr-only\">개수 : </span>{{ item.count }})\r\n            </button>\r\n          </h2>\r\n\r\n          <ul class=\"year__list\" v-if=\"i === activeIndex\">\r\n            <ui-skeletor :height=\"'1.3rem'\" v-if=\"i !== itemLoadedIndex\"></ui-skeletor>\r\n            <ui-skeletor :height=\"'1.3rem'\" v-if=\"i !== itemLoadedIndex\"></ui-skeletor>\r\n\r\n            <template v-if=\"i === itemLoadedIndex && null !== postList && 0 < postList.length\">\r\n              <li v-for=\"(post,j) in postList\" :key=\"j\">\r\n                <router-link :to=\"`/post/${post.id}`\">\r\n                  <strong class=\"year__title\">{{ post.title }}</strong>\r\n                  <span class=\"year__date\">{{ post.regDate }}</span>\r\n                </router-link>\r\n              </li>\r\n            </template>\r\n          </ul>\r\n\r\n          <button type=\"button\"\r\n                  class=\"btn--more\"\r\n                  @click=\"onMore(item.year, i)\"\r\n                  v-if=\"i === activeIndex && listCnt > pageSize && !isLastPage\">\r\n            <i class=\"xi-ellipsis-h\" aria-hidden=\"true\"></i>\r\n            <span class=\"sr-only\">더보기</span>\r\n          </button>\r\n        </template>\r\n      </template>\r\n    </div>\r\n  </app-content-wrapper>\r\n</template>\r\n\r\n<script>\r\nimport { messageUtil } from '@/utils';\r\nimport { breadcrumbService } from '@/services/breadcrumb/breadcrumbService';\r\n\r\nexport default {\r\n  name: 'app-year',\r\n  data() {\r\n    return {\r\n      pageTitle: '연도별 모아보기',\r\n      page: 1,\r\n      pageSize: 20,\r\n      listCnt: 0,\r\n      yearList: [],\r\n      postList: [],\r\n      activeIndex: -1,\r\n      itemLoadedIndex: -1,\r\n      dataLoaded: false,\r\n      listLoaded: false,\r\n      isLastPage: false,\r\n    }\r\n  },\r\n  created() {\r\n    // 페이지 타이틀 세팅\r\n    breadcrumbService.setPageTitle(this.pageTitle);\r\n    \r\n    this.init();\r\n  },\r\n  methods: {\r\n    /** 초기 세팅 */\r\n    async init() {\r\n      this.page = 1;\r\n      this.dataLoaded = false;\r\n      this.isLastPage = false;\r\n      \r\n      await this.listYearAndCount();\r\n      this.dataLoading();\r\n    },\r\n    /** 포스트의 연도 및 개수 조회 */\r\n    listYearAndCount() {\r\n      return this.$http.get('/post/year')\r\n      .then(res => {\r\n        res.data.map(d => {\r\n          this.yearList.push(d);\r\n        });\r\n        this.listLoaded = true;\r\n      });\r\n    },\r\n    /** 목록 toggle */\r\n    toggleList(year, idx) {\r\n      this.page = 1;\r\n      this.listCnt = 0;\r\n      this.postList = [];\r\n      this.isLastPage = false;\r\n      \r\n      if (idx === this.activeIndex) {\r\n        this.activeIndex = -1;\r\n        this.itemLoadedIndex = -1;\r\n        return;\r\n      }\r\n      \r\n      this.activeIndex = idx;\r\n\r\n      this.listPostByYear(year, idx);\r\n    },\r\n    /** 연도별 포스트 목록 조회 */\r\n    listPostByYear(year, idx) {\r\n      let paginationDto = {\r\n        page: this.page,\r\n        pageSize: this.pageSize,\r\n      };\r\n      \r\n      return this.$http.get(`/post/year/${year}`, { params: paginationDto })\r\n      .then(res => {\r\n        if (0 === res.data[0].length) {\r\n          messageUtil.toastInfo('마지막 페이지입니다.');\r\n          return;\r\n        }\r\n\r\n        res.data[0].map(d => {\r\n          d.regDate = this.$moment(d.regDate).format('YYYY.MM.DD');\r\n          this.postList.push(d);\r\n        });\r\n\r\n        this.listCnt = res.data[1];\r\n        this.itemLoadedIndex = idx;\r\n\r\n        if (this.listCnt === this.postList.length) {\r\n          this.isLastPage = true;\r\n        }\r\n      });\r\n    },\r\n    /** 더보기 */\r\n    onMore(year, idx) {\r\n      this.page++;\r\n      this.listPostByYear(year, idx);\r\n    },\r\n    /** 데이타 로딩 */\r\n    dataLoading() {\r\n      if (0 < this.yearList.length) {\r\n        this.dataLoaded = true;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/assets/scss/components/year.scss';\r\n</style>\r\n","import { render } from \"./AppYear.vue?vue&type=template&id=265ebfb6&scoped=true\"\nimport script from \"./AppYear.vue?vue&type=script&lang=js\"\nexport * from \"./AppYear.vue?vue&type=script&lang=js\"\n\nimport \"./AppYear.vue?vue&type=style&index=0&id=265ebfb6&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\dmitr\\\\Desktop\\\\p\\\\repo\\\\selosele2\\\\frontend\\\\selosele2\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-265ebfb6\"]])\n\nexport default __exports__"],"names":["BreadcrumbService","constructor","setPageTitle","pageTitle","isNotEmpty","document","title","store","breadcrumbService","class","_createElementVNode","_hoisted_11","_hoisted_12","_createBlock","_component_app_content_wrapper","$data","_createElementBlock","_Fragment","key","_renderList","item","i","type","onClick","$options","year","_toDisplayString","_hoisted_6","count","_component_ui_skeletor","height","length","post","j","_createVNode","_component_router_link","to","id","regDate","name","data","page","pageSize","listCnt","yearList","postList","activeIndex","itemLoadedIndex","dataLoaded","listLoaded","isLastPage","created","this","init","methods","async","listYearAndCount","dataLoading","$http","get","then","res","map","d","push","toggleList","idx","listPostByYear","paginationDto","params","$moment","format","messageUtil","onMore","__exports__","render"],"sourceRoot":""}