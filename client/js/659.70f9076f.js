"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[659],{6597:function(t,e,a){a.d(e,{a:function(){return l}});var i=a(9266),s=a(8822);class n{constructor(){}setPageTitle(t){(0,s.UE)(t)?document.title=`${t} - ${i.Z.state.BlogConfig.data.title}`:document.title=i.Z.state.BlogConfig.data.title}}const l=new n},659:function(t,e,a){a.r(e),a.d(e,{default:function(){return I}});var i=a(3396),s=a(7139);const n=t=>((0,i.dD)("data-v-44fff125"),t=t(),(0,i.Cn)(),t),l={class:"year__wrapper"},o={class:"year__list-title"},d=["onClick"],r={class:"year__list-name"},h=n((()=>(0,i._)("span",{class:"sr-only"},"개수 : ",-1))),g={key:0,class:"year__list"},p={class:"year__title"},c={class:"year__date"},u=["onClick"],y=n((()=>(0,i._)("i",{class:"xi-ellipsis-h","aria-hidden":"true"},null,-1))),L=n((()=>(0,i._)("span",{class:"sr-only"},"더보기",-1))),_=[y,L];function m(t,e,a,n,y,L){const m=(0,i.up)("ui-skeletor"),k=(0,i.up)("router-link"),w=(0,i.up)("app-content-wrapper");return(0,i.wg)(),(0,i.j4)(w,{pageTitle:y.pageTitle},{default:(0,i.w5)((()=>[(0,i._)("div",l,[y.dataLoaded?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(y.yearList,((t,e)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:e},[(0,i._)("h2",o,[(0,i._)("button",{type:"button",class:(0,s.C_)(["year__list-btn",{"year__list-btn--active":e===y.activeIndex}]),onClick:a=>L.toggleList(t.year,e)},[(0,i._)("span",r,(0,s.zw)(t.year),1),(0,i.Uk)("년에 작성된 포스트 ("),h,(0,i.Uk)((0,s.zw)(t.count)+") ",1)],10,d)]),e===y.activeIndex?((0,i.wg)(),(0,i.iD)("ul",g,[e!==y.itemLoadedIndex?((0,i.wg)(),(0,i.j4)(m,{key:0,height:"1.3rem"},null,8,["height"])):(0,i.kq)("",!0),e!==y.itemLoadedIndex?((0,i.wg)(),(0,i.j4)(m,{key:1,height:"1.3rem"},null,8,["height"])):(0,i.kq)("",!0),e===y.itemLoadedIndex&&null!==y.postList&&0<y.postList.length?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:2},(0,i.Ko)(y.postList,((t,e)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Wm)(k,{to:`/post/${t.id}`},{default:(0,i.w5)((()=>[(0,i._)("strong",p,(0,s.zw)(t.title),1),(0,i._)("span",c,(0,s.zw)(t.regDate),1)])),_:2},1032,["to"])])))),128)):(0,i.kq)("",!0)])):(0,i.kq)("",!0),e===y.activeIndex&&y.listCnt>y.pageSize&&!y.isLastPage?((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn--more",onClick:a=>L.onMore(t.year,e)},_,8,u)):(0,i.kq)("",!0)],64)))),128)):((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Wm)(m,{height:"1.3rem"},null,8,["height"]),(0,i.Wm)(m,{height:"1.3rem"},null,8,["height"]),(0,i.Wm)(m,{height:"1.3rem"},null,8,["height"])],64))])])),_:1},8,["pageTitle"])}var k=a(8822),w=a(6597),f={name:"app-year",data(){return{pageTitle:"연도별 모아보기",page:1,pageSize:20,listCnt:0,yearList:[],postList:[],activeIndex:-1,itemLoadedIndex:-1,dataLoaded:!1,listLoaded:!1,isLastPage:!1}},created(){w.a.setPageTitle(this.pageTitle),this.init()},methods:{async init(){this.page=1,this.dataLoaded=!1,this.isLastPage=!1,await this.listYearAndCount(),this.dataLoading()},listYearAndCount(){return this.$http.get("/post/year").then((t=>{t.data.map((t=>{this.yearList.push(t)})),this.listLoaded=!0}))},toggleList(t,e){if(this.page=1,this.listCnt=0,this.postList=[],this.isLastPage=!1,e===this.activeIndex)return this.activeIndex=-1,void(this.itemLoadedIndex=-1);this.activeIndex=e,this.listPostByYear(t,e)},listPostByYear(t,e){let a={page:this.page,pageSize:this.pageSize};return this.$http.get(`/post/year/${t}`,{params:a}).then((t=>{0!==t.data[0].length?(t.data[0].map((t=>{t.regDate=this.$moment(t.regDate).format("YYYY.MM.DD"),this.postList.push(t)})),this.listCnt=t.data[1],this.itemLoadedIndex=e,this.listCnt===this.postList.length&&(this.isLastPage=!0)):k.wW.toastInfo("마지막 페이지입니다.")}))},onMore(t,e){this.page++,this.listPostByYear(t,e)},dataLoading(){0<this.yearList.length&&(this.dataLoaded=!0)}}},C=a(89);const v=(0,C.Z)(f,[["render",m],["__scopeId","data-v-44fff125"]]);var I=v}}]);
//# sourceMappingURL=659.70f9076f.js.map