"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[854],{6597:function(t,e,s){s.d(e,{a:function(){return a}});var o=s(9266),n=s(8822);class i{constructor(){}setPageTitle(t){(0,n.UE)(t)?document.title=`${t} - ${o.Z.state.BlogConfig.data?.title}`:document.title=o.Z.state.BlogConfig.data?.title}}const a=new i},8854:function(t,e,s){s.r(e),s.d(e,{default:function(){return E}});var o=s(3396),n=s(7139);const i=t=>((0,o.dD)("data-v-be44446e"),t=t(),(0,o.Cn)(),t),a={class:"post-view__wrapper"},l=["innerHTML"],p={class:"post__contents__like-wrapper"},r={class:"post__contents__like-cnt"},_={class:"post__contents__date-wrapper"},d={class:"post__contents__date post__contents__date--create-at"},c=i((()=>(0,o._)("strong",null,[(0,o._)("i",{class:"xi-time-o","aria-hidden":"true"}),(0,o.Uk)(" 등록일 ")],-1))),u=["datetime"],h={key:0,class:"post__contents__date post__contents__date--modified-at"},m=i((()=>(0,o._)("strong",null,[(0,o._)("i",{class:"xi-time","aria-hidden":"true"}),(0,o.Uk)(" 수정일 ")],-1))),g=["datetime"],k={class:"post__contents__info-wrapper"},w={class:"post__contents__btns"},f=(0,o.Uk)("포스트 작성 "),y=(0,o.Uk)("포스트 수정 "),L=(0,o.Uk)("포스트 삭제 "),v={class:"post__contents__paginations"},b=i((()=>(0,o._)("h2",{class:"sr-only"},"이전/다음 포스트",-1)));function C(t,e,s,i,C,P){const x=(0,o.up)("ui-skeletor"),$=(0,o.up)("ui-hidden-field"),U=(0,o.up)("ui-icon-button"),D=(0,o.up)("router-link"),W=(0,o.up)("app-add-post-reply"),T=(0,o.up)("ui-form"),q=(0,o.up)("app-content-wrapper");return(0,o.wg)(),(0,o.j4)(q,{pageTitle:C.pageTitle},{default:(0,o.w5)((()=>[(0,o._)("div",a,[C.dataLoaded?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(x,{height:"1.3rem"},null,8,["height"]),(0,o.Wm)(x,{height:"1.3rem"},null,8,["height"]),(0,o.Wm)(x,{height:"1.3rem"},null,8,["height"])],64)),C.dataLoaded?((0,o.wg)(),(0,o.j4)(T,{key:1,name:"postForm",onOnsubmit:P.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)($,{name:"id",value:C.post?.id},null,8,["value"]),(0,o._)("div",{class:"post__contents__body line-numbers",innerHTML:C.post?.cont},null,8,l),(0,o._)("div",p,[(0,o.Wm)(U,{icon:C.isPostLiked?"xi-heart":"xi-heart-o",text:"추천수",class:(0,n.C_)("post__contents__like-btn"),title:C.isPostLiked?"포스트 추천 해제하기":"포스트 추천하기",onClick:e[0]||(e[0]=t=>P.savePostLike(C.post?.id))},{default:(0,o.w5)((()=>[(0,o._)("span",r,(0,n.zw)(C.postLikeCnt),1)])),_:1},8,["icon","title"])]),(0,o._)("div",_,[(0,o._)("span",d,[c,(0,o._)("time",{datetime:C.post?.regDate},(0,n.zw)(C.post?.regDate),9,u)]),C.post?.modDate?((0,o.wg)(),(0,o.iD)("span",h,[m,(0,o._)("time",{datetime:C.post?.modDate},(0,n.zw)(C.post?.modDate),9,g)])):(0,o.kq)("",!0)]),(0,o._)("div",k,[0<C.post?.postCategory.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(C.post?.postCategory,((t,e)=>((0,o.wg)(),(0,o.j4)(U,{key:e,routerLink:`/category/${t.category.id}`,icon:"xi-folder-open",text:"카테고리",class:(0,n.C_)("post__contents__info post__contents__info--category")},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.category.nm),1)])),_:2},1032,["routerLink"])))),128)):(0,o.kq)("",!0),0<C.post?.postTag.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(C.post?.postTag,((t,e)=>((0,o.wg)(),(0,o.j4)(U,{key:e,routerLink:`/tag/${t.tag.id}`,icon:"xi-tags",text:"태그",class:(0,n.C_)("post__contents__info post__contents__info--tag")},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.tag.nm),1)])),_:2},1032,["routerLink"])))),128)):(0,o.kq)("",!0)]),(0,o._)("div",w,[(0,o.Wm)(U,{icon:"xi-backspace",color:"secondary",text:"목록으로",class:(0,n.C_)("post__contents__btn post__contents__btn--list"),onClick:P.goToList},null,8,["onClick"]),(0,o.Wm)(U,{icon:"xi-link",color:"dark",text:"URL 복사",class:(0,n.C_)("post__contents__btn post__contents__btn--copy"),onClick:P.copyPostUrl},null,8,["onClick"]),(0,o.Wm)(U,{href:`https://twitter.com/intent/tweet?text=${encodeURI(C.post?.title)}%20${encodeURI(t.$nowUrl)}`,target:"_blank",title:"새창",rel:"noopener noreferrer nofollow",type:"link",color:"twitter",icon:"xi-twitter",text:"트위터 공유",class:(0,n.C_)("post__contents__sns")},null,8,["href"]),(0,o.Wm)(U,{href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURI(t.$nowUrl)}`,target:"_blank",title:"새창",rel:"noopener noreferrer nofollow",type:"link",color:"facebook",icon:"xi-facebook-official",text:"페이스북 공유",class:(0,n.C_)("post__contents__sns")},null,8,["href"]),t.isLogin?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(U,{routerLink:"/add-post",color:"primary",icon:"xi-pen",class:(0,n.C_)("post__contents__btn")},{default:(0,o.w5)((()=>[f])),_:1}),(0,o.Wm)(U,{routerLink:`/edit-post/${C.post?.id}`,color:"success",icon:"xi-pen",class:(0,n.C_)("post__contents__btn")},{default:(0,o.w5)((()=>[y])),_:1},8,["routerLink"]),(0,o.Wm)(U,{type:"submit",color:"dark",icon:"xi-trash",class:(0,n.C_)("post__contents__btn")},{default:(0,o.w5)((()=>[L])),_:1})],64)):(0,o.kq)("",!0)]),(0,o._)("nav",v,[b,null!==C.prevPost?((0,o.wg)(),(0,o.j4)(D,{key:0,to:`/post/${C.prevPost.id}`,rel:"prev",title:"이전 포스트",class:"post__contents__pagination post__contents__pagination--prev"},{default:(0,o.w5)((()=>[(0,o._)("strong",null,(0,n.zw)(C.prevPost.title),1)])),_:1},8,["to"])):(0,o.kq)("",!0),null!==C.nextPost?((0,o.wg)(),(0,o.j4)(D,{key:1,to:`/post/${C.nextPost.id}`,rel:"next",title:"다음 포스트",class:"post__contents__pagination post__contents__pagination--next"},{default:(0,o.w5)((()=>[(0,o._)("strong",null,(0,n.zw)(C.nextPost.title),1)])),_:1},8,["to"])):(0,o.kq)("",!0)]),(0,o.Wm)(W,{id:C.post?.id},null,8,["id"])])),_:1},8,["onOnsubmit"])):(0,o.kq)("",!0)])])),_:1},8,["pageTitle"])}var P=s(8822),x=s(6597);const $=t=>((0,o.dD)("data-v-00338da4"),t=t(),(0,o.Cn)(),t),U={class:"post__reply__wrapper"},D=$((()=>(0,o._)("h2",null,"댓글 남기기",-1))),W={class:"post__reply__write__inputs"},T={class:"post__reply__write__btns"},q=(0,o.Uk)("다시 작성 "),H=(0,o.Uk)("저장 "),Y=$((()=>(0,o._)("p",{class:"post__reply__no-data"},"댓글이 없습니다. 제일 먼저 댓글을 작성해보세요.",-1)));function R(t,e,s,i,a,l){const p=(0,o.up)("ui-hidden-field"),r=(0,o.up)("ui-textarea"),_=(0,o.up)("ui-text-field"),d=(0,o.up)("ui-button"),c=(0,o.up)("ui-form");return(0,o.wg)(),(0,o.iD)("div",U,[D,(0,o.Wm)(c,{name:"addReplyForm",class:(0,n.C_)("post__reply__write-frm"),onOnsubmit:l.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"parentId",id:"parentId",value:s.id},null,8,["value"]),(0,o.Wm)(r,{name:"cont",id:"addReplyCont",title:"댓글 내용 입력",placeholder:"하고싶은 말을 남겨주세요.",cols:"30",rows:"4",resize:"vertical",rules:"required"},null,8,["placeholder"]),(0,o._)("div",W,[(0,o.Wm)(_,{type:"text",name:"author",id:"addPostReplyAuthor",class:(0,n.C_)("post__reply__input"),label:"닉네임",rules:"required|max:20"}),(0,o.Wm)(_,{type:"password",name:"authorPw",id:"addPostReplyAuthorPw",class:(0,n.C_)("post__reply__input"),label:"비밀번호",rules:"required|min:8|max:15"}),(0,o._)("div",T,[(0,o.Wm)(d,{type:"reset",class:(0,n.C_)("post__reply__btn--reset")},{default:(0,o.w5)((()=>[q])),_:1}),(0,o.Wm)(d,{type:"submit",class:(0,n.C_)("post__reply__btn--write")},{default:(0,o.w5)((()=>[H])),_:1})])])])),_:1},8,["onOnsubmit"]),Y])}var S={name:"app-add-post-reply",props:{id:Number},methods:{onSubmit(t){console.log(t)}}},I=s(89);const z=(0,I.Z)(S,[["render",R],["__scopeId","data-v-00338da4"]]);var A=z,M={name:"app-post-view",components:{AppAddPostReply:A},data(){return{pageTitle:"",page:this.$route.query.page,post:null,prevPost:null,nextPost:null,postUrl:null,postLikeCnt:0,isPostLiked:!1,snsCodeList:[],dataLoaded:!1}},created(){this.init(this.$route.params.id)},watch:{"$route.params.id"(t){this.init(t)}},methods:{async init(t){this.dataLoaded=!1,this.post=null,this.prevPost=null,this.nextPost=null,this.postUrl=null,await Promise.all([this.getPost(t),this.getPostLike(t),this.listPrevAndNextPost(t)]),this.dataLoading(),this.postUrl=this.$nowUrl,this.postLikeCnt=this.post.postLike.length,this.snsCodeList=this.$store.state.Code.data.filter((t=>"C01"===t.prefix))},getPost(t){return this.$http.get(`/post/${t}`).then((t=>{this.post={...t.data},this.post.regDate=this.$moment(this.post.regDate).format("YYYY-MM-DD HH:mm:ss"),(0,P.SL)(this.post.modDate)&&(this.post.modDate=this.$moment(this.post.modDate).format("YYYY-MM-DD HH:mm:ss")),this.pageTitle=this.post.title,x.a.setPageTitle(this.pageTitle)}))},listPrevAndNextPost(t){return this.$http.get(`/post/prevnext/${t}`).then((t=>{const[e,s]=t.data;this.prevPost=e||null,this.nextPost=s||null}))},getPostLike(t){return this.$http.get(`/postlike/${t}`).then((t=>{(0,P.UE)(t.data)?this.isPostLiked=!0:this.isPostLiked=!1}))},savePostLike(t){return this.$http.post(`/postlike/${t}`).then((e=>{0===this.postLikeCnt&&-1===e.data||(this.getPostLike(t),this.postLikeCnt+=e.data)}))},async onSubmit(t){const e=await P.wW.confirmSuccess("포스트를 삭제하시겠습니까?");e&&this.$http.delete(`/post/${t.id}`).then((async t=>{P.wW.toastSuccess("삭제되었습니다."),this.goToList()}))},goToList(){this.$store.dispatch("Post/FETCH_MAIN_POSTLIST",{}),this.$store.dispatch("Layout/FETCH_SIDEBAR",{}),this.$router.push({path:"/",query:{page:this.page}})},copyPostUrl(){navigator.clipboard.writeText(this.postUrl),P.wW.toastSuccess("URL이 복사되었습니다.")},dataLoading(){(0,P.UE)(this.post)&&(this.dataLoaded=!0)}}};const j=(0,I.Z)(M,[["render",C],["__scopeId","data-v-be44446e"]]);var E=j}}]);
//# sourceMappingURL=854.4e157f7e.js.map