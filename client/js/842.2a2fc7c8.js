"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[842],{6597:function(e,t,s){var o=s(4460),l=s(4722);class i{constructor(){}setPageTitle(e){(0,l.UE)(e)?document.title=`${e} - ${o.Z.state.blogConfig.title}`:document.title=o.Z.state.blogConfig.title}}const a=new i;t["Z"]=a},5842:function(e,t,s){s.r(t),s.d(t,{default:function(){return J}});var o=s(3396),l=s(7139);const i=e=>((0,o.dD)("data-v-f8d88c20"),e=e(),(0,o.Cn)(),e),a={class:"guestbook__wrapper"},r={class:"guestbook__write"},n={class:"guestbook__write__inputs"},u={for:"writeAuthor"},_=(0,o.Uk)("닉네임 "),d={for:"writePw"},g=(0,o.Uk)("비밀번호 "),c={class:"guestbook__write__btns d-flex-w gap--10"},p=(0,o.Uk)("다시작성 "),m=(0,o.Uk)("등록 "),b={key:1,class:"guestbook__depth1"},h=["innerHTML"],k={class:"guestbook__cont__info depth1"},w={class:"guestbook__author"},y=i((()=>(0,o._)("strong",null,[(0,o._)("i",{class:"xi-user-o","aria-hidden":"true"}),(0,o.Uk)(" 글쓴이 : ")],-1))),f={class:"guestbook__reg-date"},v=i((()=>(0,o._)("strong",null,[(0,o._)("i",{class:"xi-time-o","aria-hidden":"true"}),(0,o.Uk)(" 등록일 : ")],-1))),L=["title"],S=i((()=>(0,o._)("i",{class:"xi-message","aria-hidden":"true"},null,-1))),D={class:"reply_cnt"},x=i((()=>(0,o._)("div",{class:"guestbook__depth2"},[(0,o._)("ul")],-1))),U={class:"guestbook__reply__wrapper"},C={class:"guestbook__reply__btns"},W={class:"guestbook__reply__btns-inner"},Y=["for"],$=(0,o.Uk)("닉네임 "),H=["for"],T=(0,o.Uk)("비밀번호 "),Z=(0,o.Uk)("등록 "),M=i((()=>(0,o._)("div",{class:"guestbook__reply__toggle"},[(0,o._)("button",{type:"button",class:"guestbook__reply__btn--toggle"},[(0,o._)("i",{class:"xi-cog","aria-hidden":"true"}),(0,o._)("span",{class:"sr-only"},"방명록 수정/삭제")]),(0,o._)("div",{class:"guestbook__reply__toggle-list"},[(0,o._)("ul",null,[(0,o._)("li",null,[(0,o._)("button",{type:"button",class:"guestbook__btn--edit1"},[(0,o._)("i",{class:"xi-pen-o","aria-hidden":"true"}),(0,o.Uk)(" 방명록 수정 ")])]),(0,o._)("li",null,[(0,o._)("button",{type:"button",class:"guestbook__btn--delete1"},[(0,o._)("i",{class:"xi-trash-o","aria-hidden":"true"}),(0,o.Uk)(" 방명록 삭제 ")])])])])],-1)));function q(e,t,s,i,q,P){const E=(0,o.up)("ui-textarea"),z=(0,o.up)("ui-text-field"),F=(0,o.up)("ui-button"),R=(0,o.up)("ui-form"),A=(0,o.up)("ui-skeletor"),G=(0,o.up)("app-content-wrapper");return(0,o.wg)(),(0,o.j4)(G,{pageTitle:q.pageTitle},{default:(0,o.w5)((()=>[(0,o._)("div",a,[(0,o.Wm)(R,{class:(0,l.C_)("guestbook__write-frm"),name:"guestbookForm",onOnSubmit:P.onSubmit},{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o.Wm)(E,{name:"cont",id:"guestbookWriteCont",title:"방명록 내용 입력",placeholder:"하고싶은 말을 남겨주세요.",cols:"30",rows:"4",rules:"required"},null,8,["placeholder"]),(0,o._)("div",n,[(0,o._)("label",u,[_,(0,o.Wm)(z,{type:"text",name:"author",id:"writeAuthor",class:(0,l.C_)("guestbook__input"),rules:"required|maxLength:20"})]),(0,o._)("label",d,[g,(0,o.Wm)(z,{type:"password",name:"authorPw",id:"writePw",class:(0,l.C_)("guestbook__input"),rules:"required|minLength:8|maxLength:15"})]),(0,o._)("div",c,[(0,o.Wm)(F,{type:"reset",color:"secondary",class:(0,l.C_)("guestbook__btn guestbook__btn--reset")},{default:(0,o.w5)((()=>[p])),_:1}),(0,o.Wm)(F,{type:"submit",color:"primary",class:(0,l.C_)("guestbook__btn guestbook__btn--write")},{default:(0,o.w5)((()=>[m])),_:1})])])])])),_:1},8,["onOnSubmit"]),q.dataLoaded?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(A,{height:"1.3rem"},null,8,["height"]),(0,o.Wm)(A,{height:"1.3rem"},null,8,["height"]),(0,o.Wm)(A,{height:"1.3rem"},null,8,["height"])],64)),q.dataLoaded?((0,o.wg)(),(0,o.iD)("ul",b,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(q.guestbookList,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{class:"guestbook__depth1__list",key:t},[(0,o._)("p",{class:"guestbook__cont",innerHTML:e.cont},null,8,h),(0,o._)("div",k,[(0,o._)("span",w,[y,(0,o.Uk)(" "+(0,l.zw)(e.author),1)]),(0,o._)("span",f,[v,(0,o.Uk)(" "+(0,l.zw)(e.regDate),1)])]),0<e.guestbookReply.length?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("button",{type:"button",class:"guestbook__btn guestbook__btn--reply-open",title:`댓글 ${e.guestbookReply.length}개 펼쳐보기`},[S,(0,o._)("span",D,(0,l.zw)(e.guestbookReply.length>99?"99+":e.guestbookReply.length),1)],8,L),x],64)):(0,o.kq)("",!0),(0,o._)("div",U,[(0,o.Wm)(R,{name:"guestbookReplyForm"},{default:(0,o.w5)((()=>[(0,o.Wm)(E,{name:"cont",id:`replyCont${t}`,class:(0,l.C_)("guestbook__reply__cont"),title:"댓글 입력",placeholder:"댓글을 남겨주세요.",cols:"30",rows:"3",rules:"required"},null,8,["id","placeholder"]),(0,o._)("div",C,[(0,o._)("div",W,[(0,o._)("label",{for:`replyAuthor${t}`},[$,(0,o.Wm)(z,{type:"text",name:"author",id:`replyAuthor${t}`,class:(0,l.C_)("guestbook__input"),rules:"required|maxLength:20"},null,8,["id"])],8,Y),(0,o._)("label",{for:`replyPw${t}`},[T,(0,o.Wm)(z,{type:"password",name:"authorPw",id:`replyPw${t}`,class:(0,l.C_)("guestbook__input"),rules:"required|minLength:8|maxLength:15"},null,8,["id"])],8,H)]),(0,o.Wm)(F,{type:"submit",color:"primary",class:(0,l.C_)("guestbook__btn guestbook__btn--reply-write")},{default:(0,o.w5)((()=>[Z])),_:1})])])),_:2},1024)]),M])))),128))])):(0,o.kq)("",!0)])])),_:1},8,["pageTitle"])}var P=s(3366),E=s(952);function z(e,t,s,l,i,a){const r=(0,o.up)("Field"),n=(0,o.up)("ErrorMessage");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(r,(0,o.dG)({as:"textarea",id:s.id,ref:s.id,name:s.name,title:s.title,placeholder:s.placeholder,cols:s.cols,rows:s.rows,rules:s.rules,value:s.modelValue},e.$attrs,{onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value))}),null,16,["id","name","title","placeholder","cols","rows","rules","value"]),(0,o.Wm)(n,{class:"form-field-error",name:s.name},null,8,["name"])],64)}var F=s(5708),R={name:"ui-textarea",components:{Field:F.gN,ErrorMessage:F.Bc},props:{id:String,name:String,title:String,placeholder:String,cols:String,rows:String,rules:String,modelValue:String}},A=s(89);const G=(0,A.Z)(R,[["render",z]]);var V=G,I=s(3210),O=s(1197),j=s(6597),B=s(4722),K={name:"app-guestbook",components:{UiForm:P.Z,UiTextField:E.Z,UiTextarea:V,UiSkeletor:I.Z},data(){return{pageTitle:"방명록",page:1,pageSize:6,listCnt:0,guestbookList:[],isScrolled:!1,dataLoaded:!1}},async created(){j.Z.setPageTitle(this.pageTitle),await this.listGuestbook(),this.dataLoading()},mounted(){window.addEventListener("scroll",this.scroll)},unmounted(){window.removeEventListener("scroll",this.scroll)},methods:{listGuestbook(){let e={page:this.page,pageSize:this.pageSize};return this.$http.get("/guestbook",{params:e}).then((e=>{0!==e.data[0].length?(e.data[0].map((e=>{e.cont=e.cont.replace("\n","<br>"),e.regDate=this.$moment(e.regDate).format("YYYY-MM-DD HH:mm:ss"),(0,B.UE)(e.modDate)&&(e.modDate=this.$moment(e.modDate).format("YYYY-MM-DD HH:mm:ss")),this.guestbookList.push(e)})),this.listCnt=e.data[1],this.isScrolled=!1):this.isScrolled=!1}))},scroll(){const{scrollY:e}=window,{clientHeight:t,scrollHeight:s}=document.documentElement,o=t+e+100>=s;o&&!this.isScrolled&&setTimeout((()=>{this.isScrolled=!0,this.page++,this.listGuestbook()}),500)},async onSubmit(e){const t=await O.Z.confirmSuccess("방명록을 등록하시겠습니까?");t&&this.$http.post("/guestbook",e).then((e=>{const t={...e.data};t.regDate=this.$moment(t.regDate).format("YYYY-MM-DD HH:mm:ss"),this.guestbookList.push(t),this.guestbookList=this.guestbookList.sort(((e,t)=>t.id-e.id)),O.Z.toastSuccess("방명록이 등록되었습니다.")}))},dataLoading(){0<this.guestbookList.length&&(this.dataLoaded=!0)}}};const N=(0,A.Z)(K,[["render",q],["__scopeId","data-v-f8d88c20"]]);var J=N}}]);
//# sourceMappingURL=842.2a2fc7c8.js.map