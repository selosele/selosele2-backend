"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[851],{6597:function(e,t,i){var a=i(9803),d=i(4722);class l{constructor(){}setPageTitle(e){(0,d.UE)(e)?document.title=`${e} - ${a.Z.state.BlogConfig.data.title}`:document.title=a.Z.state.BlogConfig.data.title}}const o=new l;t["Z"]=o},9851:function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var a=i(3396);const d={class:"d-flex flex--right gap--10 mb--15"},l=(0,a.Uk)("추가 "),o=(0,a.Uk)("삭제 ");function n(e,t,i,n,s,u){const r=(0,a.up)("ui-skeletor"),c=(0,a.up)("ui-button"),h=(0,a.up)("ui-grid"),m=(0,a.up)("ui-pane"),p=(0,a.up)("app-save-code"),f=(0,a.up)("ui-split-pane"),g=(0,a.up)("app-content-wrapper");return(0,a.wg)(),(0,a.j4)(g,{pageTitle:s.pageTitle},{default:(0,a.w5)((()=>[s.dataLoaded?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("div",d,[(0,a.Wm)(c,{type:"button",color:"primary",onClick:u.addCode},{default:(0,a.w5)((()=>[l])),_:1},8,["onClick"]),(0,a.Wm)(c,{type:"button",color:"dark",onClick:u.removeCode},{default:(0,a.w5)((()=>[o])),_:1},8,["onClick"])]),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,{columnDefs:s.columnDefs,rowData:s.rowData,checkboxIndex:0,pagination:!0,onOnGridReady:u.onGridReady,onRowClicked:u.rowClicked},null,8,["columnDefs","rowData","onOnGridReady","onRowClicked"])])),_:1}),e.isSplitterActive?((0,a.wg)(),(0,a.j4)(m,{key:0},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)(p,{code:s.code,key:s.code.id,onOnSaveCode:u.onSaveCode},null,8,["code","onOnSaveCode"]))])),_:1})):(0,a.kq)("",!0)])),_:1})],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Wm)(r,{height:"1.3rem"},null,8,["height"]),(0,a.Wm)(r,{height:"1.3rem"},null,8,["height"]),(0,a.Wm)(r,{height:"1.3rem"},null,8,["height"])],64))])),_:1},8,["pageTitle"])}var s=i(7139);const u=(0,a._)("label",{for:"codeId"},"코드 ID",-1),r=(0,a._)("label",{for:"codePrefix"},"코드 접두어",-1),c=(0,a._)("label",{for:"codeVal"},"코드 값",-1),h=(0,a._)("label",{for:"codeNm"},"코드 명",-1),m=(0,a._)("label",{for:"codeDesc"},"코드 설명",-1);function p(e,t,i,d,l,o){const n=(0,a.up)("ui-hidden-field"),p=(0,a.up)("ui-text-field"),f=(0,a.up)("ui-textarea"),g=(0,a.up)("ui-radio"),v=(0,a.up)("ui-split-form");return(0,a.wg)(),(0,a.j4)(v,{name:"saveCodeForm",onOnSubmit:o.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"originId",value:i.code.id},null,8,["value"]),u,(0,a._)("div",null,[(0,a.Wm)(p,{type:"text",name:"id",id:"codeId",rules:"required",readonly:!0,modelValue:l.id,"onUpdate:modelValue":t[0]||(t[0]=e=>l.id=e)},null,8,["modelValue"])]),r,(0,a._)("div",null,[(0,a.Wm)(p,{type:"text",name:"prefix",id:"codePrefix",rules:"required",modelValue:l.prefix,"onUpdate:modelValue":t[1]||(t[1]=e=>l.prefix=e)},null,8,["modelValue"])]),c,(0,a._)("div",null,[(0,a.Wm)(p,{type:"text",name:"val",id:"codeVal",rules:"required",modelValue:l.val,"onUpdate:modelValue":t[2]||(t[2]=e=>l.val=e)},null,8,["modelValue"])]),h,(0,a._)("div",null,[(0,a.Wm)(p,{type:"text",name:"nm",id:"codeNm",rules:"required",value:i.code.nm},null,8,["value"])]),m,(0,a._)("div",null,[(0,a.Wm)(f,{type:"text",name:"desc",id:"codeDesc",class:(0,s.C_)("resize--vertical"),rules:"required",value:i.code.desc},null,8,["value"])]),(0,a._)("div",null,[(0,a.Wm)(g,{id:"codeUseYn1",name:"useYn",label:"사용",value:"Y",rules:"required",modelValue:l.useYn,"onUpdate:modelValue":t[3]||(t[3]=e=>l.useYn=e)},null,8,["modelValue"]),(0,a.Wm)(g,{id:"codeUseYn2",name:"useYn",label:"미사용",value:"N",rules:"required",modelValue:l.useYn,"onUpdate:modelValue":t[4]||(t[4]=e=>l.useYn=e)},null,8,["modelValue"])])])),_:1},8,["onOnSubmit"])}var f=i(2222),g=i(4722),v={name:"app-save-code",props:{code:Object},data(){return{id:"",prefix:"",val:"",useYn:""}},created(){this.prefix=this.code.prefix,this.val=this.code.val,this.id=(this.prefix||"")+(this.val||""),this.useYn=this.code.useYn},watch:{prefix:function(e,t){(0,g.fp)(e)||(0,g.fp)(this.val)?this.id="":this.id=e+this.val},val:function(e,t){(0,g.fp)(e)||(0,g.fp)(this.prefix)?this.id="":this.id=this.prefix+e}},methods:{async onSubmit(e){const t=await f.Z.confirmSuccess("저장하시겠습니까?");t&&((0,g.xb)(e.originId)?this.$http.post("/code",e).then((e=>{f.Z.toastSuccess("저장되었습니다."),this.$emit("onSaveCode")})):this.$http.put(`/code/${e.id}`,e).then((e=>{f.Z.toastSuccess("저장되었습니다."),this.$emit("onSaveCode")})))}}},w=i(89);const C=(0,w.Z)(v,[["render",p]]);var x=C,D=i(6597),Y={name:"app-code",components:{AppSaveCode:x},data(){return{pageTitle:"공통코드 관리",columnDefs:[{pinned:"left"},{headerName:"코드 ID",field:"id",width:130},{headerName:"코드 접두어",field:"prefix",width:130},{headerName:"코드 값",field:"val",width:130},{headerName:"코드 명",field:"nm"},{headerName:"코드 설명",field:"desc"},{headerName:"코드 등록일시",field:"regDate"},{headerName:"코드 사용여부",field:"useYn",width:150,align:"center"}],rowData:[],code:null,gridApi:null,dataLoaded:!1}},async created(){D.Z.setPageTitle(this.pageTitle),await this.listCode(),this.dataLoading()},methods:{onGridReady(e){this.gridApi=e},rowClicked(e){this.$http.get(`/code/${e.data.id}`).then((e=>{this.code={...e.data},this.$store.commit("Splitter/TOGGLE",!0)}))},listCode(){return this.$http.get("/code").then((e=>{e.data.map((e=>{e.regDate=this.$moment(e.regDate).format("YYYY-MM-DD HH:mm:ss"),e.useYn=this.getUseYn(e.useYn)})),this.rowData=[...e.data],this.dataLoading()}))},addCode(){this.code={},this.code.id=null,this.$store.commit("Splitter/TOGGLE",!0)},async removeCode(){const e=this.gridApi.getSelectedRows();if(0===e.length)return void f.Z.toastWarning("삭제할 코드를 선택하세요.");const t=await f.Z.confirmQuestion("삭제하시겠습니까?");if(!t)return;let i=[];e.forEach((e=>{i.push({id:e.id})})),this.$http.delete("/code",{data:i}).then((e=>{this.gridApi.removeSelectedRows(),f.Z.toastSuccess("삭제되었습니다."),this.$store.commit("Splitter/TOGGLE",!1),this.$store.dispatch("Code/FETCH_CODE",this.gridApi.getRowNodes())}))},async onSaveCode(){await this.listCode(),this.$store.dispatch("Code/FETCH_CODE",this.rowData)},getUseYn(e){switch(e){case"Y":return"사용";case"N":return"미사용"}},dataLoading(){0<this.rowData.length&&(this.dataLoaded=!0)}}};const k=(0,w.Z)(Y,[["render",n]]);var _=k}}]);
//# sourceMappingURL=851.8117f82b.js.map