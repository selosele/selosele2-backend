"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[85],{2085:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var r=a(3396);const o={class:"d-flex flex--right gap--10 mb--15"};function i(e,t,a,i,n,m){const s=(0,r.up)("ui-icon-button"),d=(0,r.up)("ui-grid"),l=(0,r.up)("app-content-wrapper");return(0,r.wg)(),(0,r.j4)(l,null,{default:(0,r.w5)((()=>[(0,r._)("div",o,[(0,r.Wm)(s,{color:"primary",icon:"xi-pen",text:"그룹 생성",showText:!0,onClick:t[0]||(t[0]=e=>m.openModal("E01001"))}),(0,r.Wm)(s,{color:"dark",icon:"xi-trash",text:"그룹 삭제",showText:!0,onClick:m.removePrograms},null,8,["onClick"])]),(0,r.Wm)(d,{columnDefs:n.columnDefs,rowData:n.rowData,checkboxIndex:0,rowNumIndex:1,pagination:!0,onGridready:m.onGridReady,onCellclicked:m.onCellClicked},null,8,["columnDefs","rowData","onGridready","onCellclicked"])])),_:1})}var n=a(8822),m=a(7139);const s=e=>((0,r.dD)("data-v-ec390c9c"),e=e(),(0,r.Cn)(),e),d={class:"program__write__inputs"},l={class:"program__write__input-box"},c=s((()=>(0,r._)("label",{for:"programNm",class:"program__write__label"},"프로그램 그룹 명",-1))),u={class:"program__write__btns"},p={key:0};function h(e,t,a,o,i,n){const s=(0,r.up)("ui-hidden-field"),h=(0,r.up)("ui-text-field"),g=(0,r.up)("ui-button"),w=(0,r.up)("ui-grid"),D=(0,r.up)("ui-pane"),f=(0,r.up)("ui-split-pane"),_=(0,r.up)("ui-form"),Y=(0,r.up)("ui-modal");return(0,r.wg)(),(0,r.j4)(Y,{title:n.getModalTitle(),name:this.$options.name,full:!0,class:"program-modal__wrapper"},{default:(0,r.w5)((()=>[(0,r.Wm)(_,{name:"programForm",onOnsubmit:n.onSubmit},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{name:"id",value:a.program.id},null,8,["value"]),(0,r._)("div",d,[(0,r._)("div",l,[c,(0,r.Wm)(h,{name:"programNm",id:"programNm",rules:"required|max:50",value:a.program.nm},null,8,["value"])]),(0,r._)("div",u,[(0,r.Wm)(g,{type:"submit",color:"primary",text:"저장",class:(0,m.C_)("program__btn program__btn--write")})])]),"E01002"===a.crudType?((0,r.wg)(),(0,r.iD)("p",p," 총 "+(0,m.zw)(this.rowData.length)+"개의 하위 프로그램 ",1)):(0,r.kq)("",!0),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w,{columnDefs:i.columnDefs,rowData:i.rowData,checkboxIndex:0,pagination:!0,onGridready:n.onGridReady,onCellclicked:n.onCellClicked},null,8,["columnDefs","rowData","onGridready","onCellclicked"])])),_:1}),e.isSplitterActive?((0,r.wg)(),(0,r.j4)(D,{key:0})):(0,r.kq)("",!0)])),_:1})])),_:1},8,["onOnsubmit"])])),_:1},8,["title","name"])}var g={name:"AppProgramModal",props:{crudType:String,program:Object},data(){return{columnDefs:[{},{headerName:"프로그램 명",field:"nm"},{headerName:"요청 메소드",field:"method",width:80},{headerName:"ROUTE PATH",field:"routePath"},{headerName:"사용 여부",field:"useYnNm",width:80},{headerName:"등록일시",field:"regDate",width:100}],rowData:[],gridApi:null}},created(){(0,n.UE)(this.program)&&this.program.programDetail.forEach((e=>{e.useYnNm=this.getUseYn(e.useYn),e.regDate=this.$moment(e.regDate).format("YYYY-MM-DD HH:mm:ss"),this.rowData.push(e)}))},methods:{onGridReady(e){this.gridApi=e},onCellClicked(e){},getModalTitle(){switch(this.crudType){case"E01001":return"프로그램 그룹 등록";case"E01002":return this.program.nm}},getUseYn(e){switch(e){case"Y":return"사용";case"N":return"미사용"}},async onSubmit(e){const t=await n.wW.confirmSuccess("저장하시겠습니까?");t&&this.$http.put("/program",e).then((e=>{n.wW.toastSuccess("저장되었습니다."),this.$modal.hide(this.$options.name)}))}}},w=a(89);const D=(0,w.Z)(g,[["render",h],["__scopeId","data-v-ec390c9c"]]);var f=D,_={name:"AppAdminProgram",components:{AppProgramModal:f},data(){return{columnDefs:[{},{},{headerName:"프로그램 그룹 명",field:"nm"},{headerName:"등록일시",field:"regDate",width:100},{headerName:"수정일시",field:"modDate",width:100}],rowData:[],gridApi:null}},async created(){this.$store.dispatch("Breadcrumb/FETCH_PAGE_TITLE","프로그램 관리"),await this.listProgram()},methods:{onGridReady(e){this.gridApi=e},onCellClicked(e){this.$store.commit("Loading/SET_USE_LOADING",!1),this.$http.get(`/program/${e.data.id}`).then((e=>{e.data.regDate=this.$moment(e.data.regDate).format("YYYY-MM-DD HH:mm:ss"),(0,n.SL)(e.data.modDate)&&(e.data.modDate=this.$moment(e.data.modDate).format("YYYY-MM-DD HH:mm:ss")),this.openModal("E01002",e.data),this.$store.commit("Loading/SET_USE_LOADING",!0)}))},listProgram(){return this.$http.get("/program").then((e=>{e.data.forEach((e=>{e.regDate=this.$moment(e.regDate).format("YYYY-MM-DD HH:mm:ss"),(0,n.SL)(e.modDate)&&(e.modDate=this.$moment(e.modDate).format("YYYY-MM-DD HH:mm:ss"))})),this.rowData=[...e.data]}))},openModal(e,t=null){"E01001"===e?this.$modal.show({component:f,bind:{crudType:e}}):"E01002"===e&&this.$modal.show({component:f,bind:{crudType:e,program:t}})},async removePrograms(){const e=this.gridApi.getSelectedRows();if(0===e.length)return void n.wW.toastWarning("삭제할 그룹을 선택하세요.");const t=await n.wW.confirmQuestion("하위 프로그램도 삭제됩니다. 계속하시겠습니까?");if(!t)return;let a=[];e.forEach((e=>{a.push({id:e.id})})),this.$http.post("/program/remove",a).then((e=>{this.gridApi.removeSelectedRows(),n.wW.toastSuccess("삭제되었습니다.")}))}}};const Y=(0,w.Z)(_,[["render",i]]);var b=Y}}]);