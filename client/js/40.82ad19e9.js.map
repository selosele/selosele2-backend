{"version":3,"file":"js/40.82ad19e9.js","mappings":"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","sources":["webpack://selosele2/./src/views/AppYear.vue","webpack://selosele2/./src/views/AppYear.vue?6e20"],"sourcesContent":["<template>\r\n  <app-content-wrapper>\r\n    <div class=\"year__wrapper\">\r\n      <template v-for=\"(item,i) in yearList\" :key=\"i\">\r\n        <h2 class=\"year__list-title\">\r\n          <ui-button :class=\"[\r\n                      'year__list-btn',\r\n                      { 'year__list-btn--active': i === activeIndex }\r\n                     ]\"\r\n                     @click=\"toggleList(item.year, i)\">\r\n            <span class=\"year__list-name\">{{ item.year }}</span>년에 작성된 포스트\r\n            (<span class=\"sr-only\">개수 : </span>{{ item.count }})\r\n          </ui-button>\r\n        </h2>\r\n\r\n        <ul class=\"year__list\" v-if=\"i === activeIndex\">\r\n          <template v-if=\"i === itemLoadedIndex\">\r\n            <li v-for=\"(post,j) in currentPostList\" :key=\"j\">\r\n              <router-link :to=\"`/post/${post.id}`\">\r\n                <strong class=\"year__title\">{{ post.title }}</strong>\r\n                <span class=\"year__date\">{{ post.regDate }}</span>\r\n              </router-link>\r\n            </li>\r\n          </template>\r\n        </ul>\r\n\r\n        <ui-icon-button :icon=\"'xi-ellipsis-h'\"\r\n                        :text=\"'더보기'\"\r\n                        :class=\"'btn--more'\"\r\n                        @click=\"onMore(item.year, i)\"\r\n                        v-if=\"i === activeIndex && (listCnt > pageSize) && !isLastPage\">\r\n        </ui-icon-button>\r\n      </template>\r\n    </div>\r\n  </app-content-wrapper>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'app-year',\r\n  data() {\r\n    return {\r\n      page: 1,\r\n      pageSize: 5,\r\n      listCnt: 0,\r\n      yearList: [],\r\n      currentPostList: [],\r\n      activeIndex: -1,\r\n      itemLoadedIndex: -1,\r\n      isLastPage: false,\r\n    }\r\n  },\r\n  created() {\r\n    // 페이지 타이틀 세팅\r\n    this.$store.dispatch('Breadcrumb/FETCH_PAGE_TITLE', '연도별 모아보기');\r\n    \r\n    this.init();\r\n  },\r\n  methods: {\r\n    /** 초기 세팅 */\r\n    async init() {\r\n      this.page = 1;\r\n      this.isLastPage = false;\r\n      \r\n      await this.listYearAndCount();\r\n    },\r\n    /** 포스트의 연도 및 개수 조회 */\r\n    listYearAndCount() {\r\n      return this.$http.get('/post/year')\r\n      .then(resp => {\r\n        resp.data.map(d => {\r\n          this.yearList.push(d);\r\n        });\r\n      });\r\n    },\r\n    /** 목록 toggle */\r\n    toggleList(year, idx) {\r\n      this.listCnt = 0;\r\n      this.currentPostList = [];\r\n      this.isLastPage = false;\r\n      \r\n      if (idx === this.activeIndex) {\r\n        this.updateActiveIndex(-1);\r\n        this.updateItemLoadedIndex(-1);\r\n        return;\r\n      }\r\n      \r\n      this.updateActiveIndex(idx);\r\n      this.listPostByYear(year, idx);\r\n    },\r\n    /** 연도별 포스트 목록 조회 */\r\n    async listPostByYear(year, idx, flag = 'new') {\r\n      let paginationDto = {\r\n        page: this.paginationDto(year)?.page ?? this.page,\r\n        pageSize: this.paginationDto(year)?.pageSize ?? this.pageSize,\r\n      };\r\n\r\n      const data = await this.$store.dispatch('Year/GET_YEAR_POSTS', { year, paginationDto, flag });\r\n      const currentData = data[year][0];\r\n      \r\n      currentData.map(d => {\r\n        const date = new Date(d.regDate);\r\n        d.regDate = this.$moment(date).format('YYYY.MM.DD');\r\n      });\r\n\r\n      this.currentPostList.push(...currentData);\r\n      \r\n      this.listCnt = data[year][1];\r\n      this.updateItemLoadedIndex(idx);\r\n\r\n      if (this.listCnt === this.$store.state.Year.data[year][0].length) {\r\n        this.isLastPage = true;\r\n      }\r\n    },\r\n    /** 연도와 매칭되는 페이지네이션 DTO  */\r\n    paginationDto(year) {\r\n      return this.$store.state.Year.data[year]?.paginationDto;\r\n    },\r\n    /** 연도와 매칭되는 데이타가 존재하는지 확인 */\r\n    hasPostList(year) {\r\n      return Object.prototype.hasOwnProperty.call(this.$store.state.Year.data, year);\r\n    },\r\n    /** 로드된 데이타의 Index 업데이트 */\r\n    updateItemLoadedIndex(idx) {\r\n      this.itemLoadedIndex = idx;\r\n    },\r\n    /** 활성화된 버튼의 Index 업데이트 */\r\n    updateActiveIndex(idx) {\r\n      this.activeIndex = idx;\r\n    },\r\n    /** 더보기 */\r\n    onMore(year, idx) {\r\n      this.paginationDto(year).page++;\r\n      this.listPostByYear(year, idx, 'more');\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/assets/scss/components/year.scss';\r\n</style>\r\n","import { render } from \"./AppYear.vue?vue&type=template&id=7e215c71&scoped=true\"\nimport script from \"./AppYear.vue?vue&type=script&lang=js\"\nexport * from \"./AppYear.vue?vue&type=script&lang=js\"\n\nimport \"./AppYear.vue?vue&type=style&index=0&id=7e215c71&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\dmitr\\\\Desktop\\\\p\\\\repo\\\\selosele2\\\\frontend\\\\selosele2\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7e215c71\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createBlock","_component_app_content_wrapper","_createElementBlock","_Fragment","_renderList","$data","item","i","_createVNode","_component_ui_button","onClick","$options","year","_toDisplayString","_hoisted_5","count","key","post","j","_component_router_link","to","id","title","regDate","_component_ui_icon_button","icon","text","name","data","page","pageSize","listCnt","yearList","currentPostList","activeIndex","itemLoadedIndex","isLastPage","created","this","$store","dispatch","init","methods","listYearAndCount","$http","get","then","resp","map","d","push","toggleList","idx","updateActiveIndex","updateItemLoadedIndex","listPostByYear","flag","paginationDto","currentData","date","Date","$moment","format","state","Year","length","hasPostList","Object","prototype","hasOwnProperty","call","onMore","__exports__","render"],"sourceRoot":""}