"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[76],{8076:function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var d=i(3396);const a={class:"d-flex flex--right gap--10 mb--15"};function l(e,t,i,l,o,s){const n=(0,d.up)("ui-button"),r=(0,d.up)("ui-grid"),u=(0,d.up)("ui-pane"),c=(0,d.up)("app-save-code"),m=(0,d.up)("ui-split-pane"),p=(0,d.up)("app-content-wrapper");return(0,d.wg)(),(0,d.j4)(p,null,{default:(0,d.w5)((()=>[(0,d._)("div",a,[(0,d.Wm)(n,{color:"primary",text:"추가",onClick:s.addCode},null,8,["onClick"]),(0,d.Wm)(n,{color:"dark",text:"삭제",onClick:s.removeCode},null,8,["onClick"])]),(0,d.Wm)(m,null,{default:(0,d.w5)((()=>[(0,d.Wm)(u,null,{default:(0,d.w5)((()=>[(0,d.Wm)(r,{columnDefs:o.columnDefs,rowData:o.rowData,checkboxIndex:0,pagination:!0,onGridready:s.onGridReady,onCellclicked:s.onCellClicked},null,8,["columnDefs","rowData","onGridready","onCellclicked"])])),_:1}),e.isSplitterActive?((0,d.wg)(),(0,d.j4)(u,{key:0},{default:(0,d.w5)((()=>[((0,d.wg)(),(0,d.j4)(c,{code:o.code,key:o.code.id,onSaveCode:s.onSaveCode},null,8,["code","onSaveCode"]))])),_:1})):(0,d.kq)("",!0)])),_:1})])),_:1})}function o(e,t,i,a,l,o){const s=(0,d.up)("ui-hidden-field"),n=(0,d.up)("ui-text-field"),r=(0,d.up)("ui-textarea"),u=(0,d.up)("ui-radio"),c=(0,d.up)("ui-radio-group"),m=(0,d.up)("ui-split-form");return(0,d.wg)(),(0,d.j4)(m,{name:"saveCodeForm",onOnsubmit:o.onSubmit},{default:(0,d.w5)((()=>[(0,d.Wm)(s,{name:"originId",value:i.code.id},null,8,["value"]),(0,d.Wm)(n,{type:"text",name:"id",id:"codeId",label:"코드 ID",rules:"required|max:6",readonly:!0,block:!0,modelValue:l.id,"onUpdate:modelValue":t[0]||(t[0]=e=>l.id=e)},null,8,["modelValue"]),(0,d.Wm)(n,{type:"text",name:"prefix",id:"codePrefix",label:"코드 접두어",rules:"required|max:3",block:!0,modelValue:l.prefix,"onUpdate:modelValue":t[1]||(t[1]=e=>l.prefix=e)},null,8,["modelValue"]),(0,d.Wm)(n,{type:"text",name:"val",id:"codeVal",label:"코드 값",rules:"required|max:3",block:!0,modelValue:l.val,"onUpdate:modelValue":t[2]||(t[2]=e=>l.val=e)},null,8,["modelValue"]),(0,d.Wm)(n,{type:"text",name:"nm",id:"codeNm",label:"코드 명",rules:"required|max:30",block:!0,value:i.code.nm},null,8,["value"]),(0,d.Wm)(r,{type:"text",name:"desc",id:"codeDesc",resize:"vertical",label:"코드 설명",rules:"required|max:30",value:i.code.desc},null,8,["value"]),(0,d.Wm)(c,{label:"코드 사용 여부"},{default:(0,d.w5)((()=>[(0,d.Wm)(u,{id:"codeUseYn1",name:"useYn",label:"사용",value:"Y",rules:"required",modelValue:l.useYn,"onUpdate:modelValue":t[3]||(t[3]=e=>l.useYn=e)},null,8,["modelValue"]),(0,d.Wm)(u,{id:"codeUseYn2",name:"useYn",label:"미사용",value:"N",rules:"required",modelValue:l.useYn,"onUpdate:modelValue":t[4]||(t[4]=e=>l.useYn=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["onOnsubmit"])}var s=i(8822),n={name:"AppSaveCode",props:{code:{type:Object,default:()=>({})}},data(){return{id:"",prefix:"",val:"",useYn:""}},created(){this.prefix=this.code.prefix,this.val=this.code.val,this.id=(this.prefix||"")+(this.val||""),this.useYn=this.code.useYn},watch:{prefix(e,t){(0,s.fp)(e)||(0,s.fp)(this.val)?this.id="":this.id=e+this.val},val(e,t){(0,s.fp)(e)||(0,s.fp)(this.prefix)?this.id="":this.id=this.prefix+e}},methods:{async onSubmit(e){const t=await s.wW.confirmSuccess("저장하시겠습니까?");t&&((0,s.xb)(e.originId)?this.addCode(e):this.updateCode(e))},addCode(e){return this.$http.post("/code",e).then((e=>{s.wW.toastSuccess("저장되었습니다."),this.$emit("saveCode")}))},updateCode(e){return this.$http.put("/code",e).then((e=>{s.wW.toastSuccess("저장되었습니다."),this.$emit("saveCode")}))}}},r=i(89);const u=(0,r.Z)(n,[["render",o]]);var c=u,m={name:"AppAdminCode",components:{AppSaveCode:c},data(){return{columnDefs:[{pinned:"left"},{headerName:"코드 ID",field:"id",width:130},{headerName:"코드 접두어",field:"prefix",width:130},{headerName:"코드 값",field:"val",width:130},{headerName:"코드 명",field:"nm"},{headerName:"코드 설명",field:"desc"},{headerName:"코드 등록일시",field:"regDate"},{headerName:"코드 사용 여부",field:"useYn",width:150,align:"center"}],rowData:[],code:null,gridApi:null}},async created(){this.$store.dispatch("Breadcrumb/FETCH_PAGE_TITLE","공통코드 관리"),await this.listCode()},methods:{onGridReady(e){this.gridApi=e},onCellClicked(e){this.$store.commit("Loading/SET_USE_LOADING",!1),this.$http.get(`/code/${e.data.id}`).then((e=>{this.code={...e.data},this.$store.commit("Splitter/TOGGLE",!0),this.$store.commit("Loading/SET_USE_LOADING",!0)}))},listCode(){return this.$store.dispatch("Code/LIST_CODE").then((e=>{e.forEach((e=>{e.regDate=this.$moment(e.regDate).format("YYYY-MM-DD HH:mm:ss"),e.useYn=this.getUseYn(e.useYn)})),this.rowData=[...e]}))},addCode(){this.code={},this.code.id=null,this.$store.commit("Splitter/TOGGLE",!0)},async removeCode(){const e=this.gridApi.getSelectedRows();if(0===e.length)return void s.wW.toastWarning("삭제할 코드를 선택하세요.");const t=await s.wW.confirmQuestion("삭제하시겠습니까?");if(!t)return;let i=[];e.forEach((e=>{i.push({id:e.id})})),this.$http.post("/code/remove",i).then((e=>{this.gridApi.removeSelectedRows(),s.wW.toastSuccess("삭제되었습니다."),this.$store.commit("Splitter/TOGGLE",!1),this.$store.dispatch("Code/FETCH_CODE",this.gridApi.getRowNodes())}))},async onSaveCode(){await this.listCode(),this.$store.dispatch("Code/FETCH_CODE",this.rowData)},getUseYn(e){switch(e){case"Y":return"사용";case"N":return"미사용"}}}};const p=(0,r.Z)(m,[["render",l]]);var h=p}}]);