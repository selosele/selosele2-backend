"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[408],{6597:function(t,e,i){var s=i(4460),a=i(4722);class n{constructor(){}setPageTitle(t){(0,a.UE)(t)?document.title=`${t} - ${s.Z.getters.blogConfig.title}`:document.title=s.Z.getters.blogConfig.title}}const l=new n;e["Z"]=l},5408:function(t,e,i){i.r(e),i.d(e,{default:function(){return I}});var s=i(3396),a=i(7139);const n={class:"year__wrapper"},l={class:"year__list-title"},o=["onClick"],r={class:"year__list-name"},d=(0,s.Uk)("년에 작성된 포스트 ("),h=(0,s._)("span",{class:"sr-only"},"개수 : ",-1),g={key:0,class:"year__list"},p={class:"year__title"},c={class:"year__date"},u=["onClick"],y=(0,s._)("i",{class:"xi-ellipsis-h","aria-hidden":"true"},null,-1),L=(0,s._)("span",{class:"sr-only"},"더보기",-1),m=[y,L];function _(t,e,i,y,L,_){const k=(0,s.up)("ui-skeletor"),w=(0,s.up)("router-link"),C=(0,s.up)("app-content-wrapper");return(0,s.wg)(),(0,s.j4)(C,{pageTitle:L.pageTitle},{default:(0,s.w5)((()=>[(0,s._)("div",n,[L.dataLoaded?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:1},(0,s.Ko)(L.yearList,((t,e)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:e},[(0,s._)("h2",l,[(0,s._)("button",{type:"button",class:(0,a.C_)(["year__list-btn",{"year__list-btn--active":e===L.activeIndex}]),onClick:i=>_.toggleList(t.year,e)},[(0,s._)("span",r,(0,a.zw)(t.year),1),d,h,(0,s.Uk)((0,a.zw)(t.count)+") ",1)],10,o)]),e===L.activeIndex?((0,s.wg)(),(0,s.iD)("ul",g,[e!==L.itemLoadedIndex?((0,s.wg)(),(0,s.j4)(k,{key:0,height:"1.3rem"})):(0,s.kq)("",!0),e!==L.itemLoadedIndex?((0,s.wg)(),(0,s.j4)(k,{key:1,height:"1.3rem"})):(0,s.kq)("",!0),e===L.itemLoadedIndex&&null!==L.postList&&0<L.postList.length?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:2},(0,s.Ko)(L.postList,((t,e)=>((0,s.wg)(),(0,s.iD)("li",{key:e},[(0,s.Wm)(w,{to:`/post/${t.id}`},{default:(0,s.w5)((()=>[(0,s._)("strong",p,(0,a.zw)(t.title),1),(0,s._)("span",c,(0,a.zw)(t.regDate),1)])),_:2},1032,["to"])])))),128)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),e===L.activeIndex&&L.listCnt>L.pageSize&&!L.isLastPage?((0,s.wg)(),(0,s.iD)("button",{key:1,type:"button",class:"btn--more",onClick:i=>_.more(t.year,e)},m,8,u)):(0,s.kq)("",!0)],64)))),128)):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Wm)(k,{height:"1.3rem"}),(0,s.Wm)(k,{height:"1.3rem"}),(0,s.Wm)(k,{height:"1.3rem"})],64))])])),_:1},8,["pageTitle"])}var k=i(643),w=i(6910),C=i(6597),f={name:"app-year",components:{UiSkeletor:k.Z},data(){return{pageTitle:"연도별 모아보기",page:1,pageSize:20,listCnt:0,yearList:[],postList:[],activeIndex:-1,itemLoadedIndex:-1,dataLoaded:!1,listLoaded:!1,isLastPage:!1}},created(){C.Z.setPageTitle(this.pageTitle),this.init()},methods:{async init(){this.page=1,this.dataLoaded=!1,this.isLastPage=!1,await this.listYearAndCount(),this.dataLoading()},listYearAndCount(){return this.$http.get("/post/year/list").then((t=>{t.data.map((t=>{this.yearList.push(t)})),this.listLoaded=!0}))},toggleList(t,e){if(this.page=1,this.listCnt=0,this.postList=[],this.isLastPage=!1,e===this.activeIndex)return this.activeIndex=-1,void(this.itemLoadedIndex=-1);this.activeIndex=e,this.listPostByYear(t,e)},listPostByYear(t,e){let i={page:this.page,pageSize:this.pageSize};return this.$http.get(`/post/year/list/${t}`,{params:i}).then((t=>{0!==t.data[0].length?(t.data[0].map((t=>{t.regDate=this.$moment(t.regDate).format("YYYY.MM.DD"),this.postList.push(t)})),this.listCnt=t.data[1],this.itemLoadedIndex=e,this.listCnt===this.postList.length&&(this.isLastPage=!0)):w.Z.info("마지막 페이지입니다.")}))},more(t,e){this.page++,this.listPostByYear(t,e)},dataLoading(){0<this.yearList.length&&(this.dataLoaded=!0)}}},v=i(89);const x=(0,v.Z)(f,[["render",_]]);var I=x}}]);
//# sourceMappingURL=408.792192d5.js.map