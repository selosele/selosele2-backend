"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[366],{3973:function(e,t,s){s.r(t),s.d(t,{default:function(){return se}});var a=s(3396),i=s(7139),l=s(9242);const o={class:"search__wrapper"},r={class:"search__field",ref:"searchField"},c=(0,a._)("button",{type:"submit",class:"search__btn"},[(0,a._)("i",{class:"xi-search","aria-hidden":"true"}),(0,a._)("span",{class:"sr-only"},"검색")],-1),n={class:"search__detail"},h={class:"search__info"},u=(0,a.Uk)(" 검색 결과를 찾을 수 없습니다. "),p={class:"search__info__txt"},g=(0,a.Uk)("에 대한 검색 결과는 "),d={class:"search__info__txt"},_=(0,a.Uk)("입니다. "),m=["href"],w=(0,a._)("i",{class:"xi-google","aria-hidden":"true"},null,-1),f=(0,a.Uk)(" Google에서 검색 "),k=[w,f],S={class:"search__results__wrapper",ref:"resultsWrapper"},q={key:1,class:"post__wrapper search__results"},y={class:"post__title"},v={key:0,class:"post__og-image"},L={class:"post__og-image__box"},b=["src"],D={class:"post__cont"},P={class:"post__box__item-wrapper"},U={class:"post__box__item post__box__item--regdate"},x=(0,a._)("i",{class:"xi-time-o","aria-hidden":"true"},null,-1),I=(0,a._)("span",{class:"sr-only"},"등록일",-1),C=["datetime"],T=(0,a._)("span",{class:"sr-only"},"카테고리",-1),V=(0,a._)("button",{type:"button",class:"btn search__more"},[(0,a._)("i",{class:"xi-plus-circle","aria-hidden":"true"}),(0,a.Uk)(" 더보기 ")],-1),$=[V],z=(0,a._)("i",{class:"xi-search","aria-hidden":"true"},null,-1),Y=(0,a._)("span",{class:"sr-only"},"검색 필드 바로가기",-1),Z=[z,Y];function M(e,t,s,w,f,V){const z=(0,a.up)("ui-select"),Y=(0,a.up)("ui-text-field"),M=(0,a.up)("ui-checkbox"),N=(0,a.up)("ui-form"),W=(0,a.up)("ui-loading"),H=(0,a.up)("router-link"),A=(0,a.up)("app-content-wrapper");return(0,a.wg)(),(0,a.j4)(A,{pageTitle:f.pageTitle},{default:(0,a.w5)((()=>[(0,a._)("div",o,[(0,a.Wm)(N,{class:(0,i.C_)("search__frm"),name:"searchForm",onOnSubmit:V.onSubmit},{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a.Wm)(z,{name:"t",title:"검색 옵션",class:(0,i.C_)("search__option"),modelValue:f.t,"onUpdate:modelValue":t[0]||(t[0]=e=>f.t=e),data:f.tData,selectedValue:this.$route.query["t"]},null,8,["modelValue","data","selectedValue"]),(0,a.Wm)(Y,{type:"search",name:"q",id:"q",title:"포스트 검색",placeholder:"검색어를 입력하세요.",modelValue:f.q,"onUpdate:modelValue":t[1]||(t[1]=e=>f.q=e)},null,8,["placeholder","modelValue"]),c],512),(0,a._)("div",n,[(0,a.Wm)(M,{name:"c",id:"c",label:"대소문자 구분",values:"Y,N",modelValue:f.c,"onUpdate:modelValue":t[2]||(t[2]=e=>f.c=e),checked:"Y"===this.$route.query["c"]},null,8,["modelValue","checked"])])])),_:1},8,["onOnSubmit"]),(0,a._)("p",h,[0===f.listCnt?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[u],64)):(0,a.kq)("",!0),null!==f.postList&&f.postList.length>0?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("strong",p,(0,i.zw)(this.$route.query["q"]),1),g,(0,a._)("strong",d,(0,i.zw)(f.listCnt)+"개",1),_,(0,a._)("a",{href:f.googleSearchUrl,target:"_blank",title:"새창",rel:"noopener noreferrer nofollow",class:"btn btn--dark search__google"},k,8,m)],64)):(0,a.kq)("",!0)]),(0,a._)("div",S,[e.$route.query["q"]&&0<f.postList.length?((0,a.wg)(),(0,a.j4)(W,{key:0,activeModel:!f.dataLoaded,fullPage:!0},null,8,["activeModel"])):(0,a.kq)("",!0),f.dataLoaded?((0,a.wg)(),(0,a.iD)("ul",q,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.postList,((t,s)=>((0,a.wg)(),(0,a.iD)("li",{class:"post__wrapper__list",key:s},[(0,a._)("article",null,[(0,a._)("h2",y,[(0,a.Wm)(H,{to:`/post/${t.id}`,onClick:V.saveToStorage},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.title),1)])),_:2},1032,["to","onClick"])]),t.ogImgUrl?((0,a.wg)(),(0,a.iD)("p",v,[(0,a._)("span",L,[(0,a._)("img",{src:t.ogImgUrl,alt:""},null,8,b)])])):(0,a.kq)("",!0),(0,a._)("p",D,(0,i.zw)(t.rawText),1),(0,a._)("div",P,[(0,a._)("span",U,[x,I,(0,a._)("time",{datetime:e.$moment(t.regDate).format("YYYY-MM-DD HH:mm:ss")},(0,i.zw)(e.$moment(t.regDate).format("YYYY.MM.DD")),9,C)]),t.postCategory.length>0?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(t.postCategory,((e,t)=>((0,a.wg)(),(0,a.iD)("span",{class:"post__box__item post__box__item--category",key:t},[T,(0,a.Uk)(" "+(0,i.zw)(e.category.nm),1)])))),128)):(0,a.kq)("",!0)])])])))),128))])):(0,a.kq)("",!0),f.listCnt>f.pageSize&&!f.isLastPage?((0,a.wg)(),(0,a.iD)("p",{key:2,class:"search__more__wrapper",onClick:t[3]||(t[3]=(...e)=>V.more&&V.more(...e))},$)):(0,a.kq)("",!0),(0,a._)("a",{href:"#q",class:(0,i.C_)(["btn search__to-input",{"search__to-input--active":this.searchToInputActive}]),onClick:t[4]||(t[4]=(0,l.iM)(((...e)=>V.searchToInput&&V.searchToInput(...e)),["prevent"]))},Z,2)],512)])])),_:1},8,["pageTitle"])}var N=s(716),W=s(2969),H=s(7831);const A=["id","name","title","rules"],F=["disabled"],O=["value","selected"];function E(e,t,s,l,o,r){return(0,a.wg)(),(0,a.iD)("select",{id:s.id,name:s.name,title:s.title,class:(0,i.C_)(s.className),rules:s.rules,onChange:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value))},[s.defaultValue?((0,a.wg)(),(0,a.iD)("option",{key:0,value:"",disabled:!!s.defaultValueDisabled&&"disabled",selected:""},(0,i.zw)(s.defaultValue),9,F)):(0,a.kq)("",!0),s.data&&s.data.length>0?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(s.data,((e,t)=>((0,a.wg)(),(0,a.iD)("option",{key:t,value:e.value,selected:e.value===s.selectedValue},(0,i.zw)(e.text),9,O)))),128)):(0,a.kq)("",!0)],42,A)}var K=s(5708),j={name:"ui-select",components:{Field:K.gN,ErrorMessage:K.Bc},props:{id:String,name:String,title:String,className:String,rules:String,selectedValue:[String,Number],data:Array,defaultValue:String,defaultValueDisabled:Boolean,modelValue:String}},B=s(89);const J=(0,B.Z)(j,[["render",E]]);var R=J,G=s(4821),Q=s(6910),X=s(6597),ee={name:"app-search",components:{UiLoading:N.Z,UiForm:W.Z,UiTextField:H.Z,UiSelect:R,UiCheckbox:G.Z},data(){return{t:this.$route.query["t"]||"001",q:this.$route.query["q"]||"",c:this.$route.query["c"]||"N",tData:[],pageTitle:"포스트 검색",page:1,nowPage:1,pageSize:10,listCnt:null,postList:[],googleSearchUrl:"",searchToInputActive:!1,isLastPage:!1,dataLoaded:!1}},async created(){X.Z.setPageTitle(this.pageTitle),this.$store.state.code.map(((e,t)=>{if("A01"===e.prefix){let t={value:e.val,text:e.nm};this.tData.push(t)}})),this.$route.query["q"]&&(await this.listPostSearch({t:this.t,q:this.q,c:this.c,page:this.page,pageSize:this.pageSize}),this.dataLoading())},beforeRouteUpdate(e,t,s){e.query.q||(this.postList=null),s()},mounted(){document.addEventListener("scroll",this.scroll)},unmounted(){document.removeEventListener("scroll",this.scroll)},methods:{async onSubmit(e){this.t.trim()?this.q.trim()?(this.init(),e.page=this.page,e.pageSize=this.pageSize,await this.listPostSearch(e),this.dataLoading()):Q.Z.warning("검색어를 입력하세요."):Q.Z.warning("검색옵션을 선택하세요.")},init(){localStorage.getItem("searchPage")&&localStorage.removeItem("searchPage"),localStorage.getItem("searchPostList")&&localStorage.removeItem("searchPostList"),this.page=1,this.dataLoaded=!1,this.postList=[],this.isLastPage=!1},listPostSearch(e){const t=localStorage.getItem("searchPostList");return this.$http.get("/post/search",{params:e}).then((async e=>{t?JSON.parse(t):e.data[0];e.data[0].map((e=>{this.postList.push(e)})),this.listCnt=e.data[1],this.listCnt===this.postList.length&&(this.isLastPage=!0),this.googleSearchUrl=encodeURI(`https://www.google.com/search?q=${this.q}`),await this.$router.push({path:"/search",query:{q:this.q,t:this.t,c:this.c}})}))},saveToStorage(){localStorage.setItem("searchPage",localStorage.getItem("searchPage")?this.nowPage:this.page+1),localStorage.setItem("searchPostList",JSON.stringify(this.postList))},more(){localStorage.getItem("searchPostList");this.nowPage=parseInt(localStorage.getItem("searchPage"))||this.page,this.page++,this.listPostSearch({t:this.t,q:this.q,c:this.c,page:this.page,pageSize:this.pageSize})},scroll(){null!==this.postList&&0!==this.postList.length&&(this.$refs.resultsWrapper&&window.pageYOffset>=this.$refs.resultsWrapper.offsetTop?this.searchToInputActive=!0:this.searchToInputActive=!1)},searchToInput(){const e=this.$refs.searchField.offsetTop-100;window.scrollTo(0,e)},dataLoading(){0<this.postList.length&&(this.dataLoaded=!0)}}};const te=(0,B.Z)(ee,[["render",M]]);var se=te}}]);
//# sourceMappingURL=366.f1e3c4d6.js.map