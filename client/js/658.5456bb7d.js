"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[658],{2658:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var r=a(3396);const o={class:"d-flex flex--right gap--10 mb--15"};function i(e,t,a,i,m,n){const s=(0,r.up)("ui-icon-button"),d=(0,r.up)("ui-grid"),l=(0,r.up)("app-content-wrapper");return(0,r.wg)(),(0,r.j4)(l,null,{default:(0,r.w5)((()=>[(0,r._)("div",o,[(0,r.Wm)(s,{color:"primary",icon:"xi-pen",text:"그룹 생성",showText:!0,onClick:t[0]||(t[0]=e=>n.openModal("E01001"))}),(0,r.Wm)(s,{color:"dark",icon:"xi-trash",text:"그룹 삭제",showText:!0,onClick:n.removePrograms},null,8,["onClick"])]),(0,r.Wm)(d,{columnDefs:m.columnDefs,rowData:m.rowData,checkboxIndex:0,rowNumIndex:1,pagination:!0,onGridready:n.onGridReady,onCellclicked:n.onCellClicked},null,8,["columnDefs","rowData","onGridready","onCellclicked"])])),_:1})}var m=a(8822),n=a(7139);const s=e=>((0,r.dD)("data-v-553b6171"),e=e(),(0,r.Cn)(),e),d={class:"program__write__inputs"},l={class:"program__write__input-box"},c=s((()=>(0,r._)("label",{for:"programNm",class:"program__write__label"},"프로그램 그룹 명",-1))),p={class:"program__write__btns"},u={key:1};function h(e,t,a,o,i,m){const s=(0,r.up)("ui-hidden-field"),h=(0,r.up)("ui-text-field"),g=(0,r.up)("ui-button"),w=(0,r.up)("ui-grid"),D=(0,r.up)("ui-pane"),_=(0,r.up)("ui-split-pane"),f=(0,r.up)("ui-form"),b=(0,r.up)("ui-modal");return(0,r.wg)(),(0,r.j4)(b,{title:a.program?i.programNm:"프로그램 그룹 등록",name:this.$options.name,full:!0,class:"program-modal__wrapper"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{name:"programForm",onOnsubmit:m.onSubmit},{default:(0,r.w5)((()=>[a.program?((0,r.wg)(),(0,r.j4)(s,{key:0,name:"id",value:a.program.id},null,8,["value"])):(0,r.kq)("",!0),(0,r._)("div",d,[(0,r._)("div",l,[c,(0,r.Wm)(h,{name:"nm",id:"programNm",rules:"required|max:50",value:a.program?.nm,modelValue:i.programNm,"onUpdate:modelValue":t[0]||(t[0]=e=>i.programNm=e)},null,8,["value","modelValue"])]),(0,r._)("div",p,[(0,r.Wm)(g,{type:"submit",color:"primary",text:"저장",class:(0,n.C_)("program__btn program__btn--write")}),a.program?((0,r.wg)(),(0,r.j4)(g,{key:0,type:"button",color:"dark",text:"삭제",class:(0,n.C_)("program__btn program__btn--write"),onClick:t[1]||(t[1]=e=>m.removePost(a.program.id))})):(0,r.kq)("",!0)])]),"E01002"===a.crudType?((0,r.wg)(),(0,r.iD)("p",u," 총 "+(0,n.zw)(this.rowData.length)+"개의 하위 프로그램 ",1)):(0,r.kq)("",!0),(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w,{columnDefs:i.columnDefs,rowData:i.rowData,checkboxIndex:0,pagination:!0,onGridready:m.onGridReady,onCellclicked:m.onCellClicked},null,8,["columnDefs","rowData","onGridready","onCellclicked"])])),_:1}),e.isSplitterActive?((0,r.wg)(),(0,r.j4)(D,{key:0})):(0,r.kq)("",!0)])),_:1})])),_:1},8,["onOnsubmit"])])),_:1},8,["title","name"])}var g={name:"AppProgramModal",props:{crudType:String,program:Object},data(){return{columnDefs:[{},{headerName:"프로그램 명",field:"nm"},{headerName:"요청 메소드",field:"method",width:80},{headerName:"ROUTE PATH",field:"routePath"},{headerName:"사용 여부",field:"useYnNm",width:80},{headerName:"등록일시",field:"regDate",width:100}],rowData:[],gridApi:null,programNm:""}},created(){(0,m.UE)(this.program)&&this.program.programDetail.forEach((e=>{e.useYnNm=this.getUseYn(e.useYn),e.regDate=this.$moment(e.regDate).format("YYYY-MM-DD HH:mm:ss"),this.rowData.push(e)}))},methods:{onGridReady(e){this.gridApi=e},onCellClicked(e){},getModalTitle(){switch(this.crudType){case"E01001":return"프로그램 그룹 등록";case"E01002":return this.programNm}},getUseYn(e){switch(e){case"Y":return"사용";case"N":return"미사용"}},async onSubmit(e){const t=await m.wW.confirmSuccess("그룹을 저장하시겠습니까?");t&&("E01001"!==this.crudType&&"E01002"!==this.crudType||this.$http.post("/program",e).then((e=>{m.wW.toastSuccess("저장되었습니다."),this.$modal.hide(this.$options.name)})))},async removePost(e){const t=await m.wW.confirmSuccess("그룹을 삭제하시겠습니까?");t&&this.$http.delete(`/program/${e}`).then((e=>{m.wW.toastSuccess("삭제되었습니다."),this.$modal.hide(this.$options.name),this.$store.dispatch("Program/FETCH_REMOVED_PROGRAM",e.data)}))}}},w=a(89);const D=(0,w.Z)(g,[["render",h],["__scopeId","data-v-553b6171"]]);var _=D,f={name:"AppAdminProgram",components:{AppProgramModal:_},data(){return{columnDefs:[{},{},{headerName:"프로그램 그룹 명",field:"nm"},{headerName:"등록일시",field:"regDate",width:100},{headerName:"수정일시",field:"modDate",width:100}],rowData:[],gridApi:null}},async created(){this.$store.dispatch("Breadcrumb/FETCH_PAGE_TITLE","프로그램 관리"),await this.listProgram()},watch:{async"$store.state.Program.removedProgram"(e){0<Object.values(e).length&&(await this.listProgram(),this.$store.dispatch("Program/FETCH_REMOVED_PROGRAM",{}))}},methods:{onGridReady(e){this.gridApi=e},onCellClicked(e){this.$store.commit("Loading/SET_USE_LOADING",!1),this.$http.get(`/program/${e.data.id}`).then((e=>{e.data.regDate=this.$moment(e.data.regDate).format("YYYY-MM-DD HH:mm:ss"),(0,m.SL)(e.data.modDate)&&(e.data.modDate=this.$moment(e.data.modDate).format("YYYY-MM-DD HH:mm:ss")),this.openModal("E01002",e.data),this.$store.commit("Loading/SET_USE_LOADING",!0)}))},listProgram(){return this.$http.get("/program").then((e=>{e.data.forEach((e=>{e.regDate=this.$moment(e.regDate).format("YYYY-MM-DD HH:mm:ss"),(0,m.SL)(e.modDate)&&(e.modDate=this.$moment(e.modDate).format("YYYY-MM-DD HH:mm:ss"))})),this.rowData=[...e.data]}))},openModal(e,t=null){"E01001"===e?this.$modal.show({component:_,bind:{crudType:e}}):"E01002"===e&&this.$modal.show({component:_,bind:{crudType:e,program:t}})},async removePrograms(){const e=this.gridApi.getSelectedRows();if(0===e.length)return void m.wW.toastWarning("삭제할 그룹을 선택하세요.");const t=await m.wW.confirmQuestion("하위 프로그램도 삭제됩니다. 계속하시겠습니까?");if(!t)return;let a=[];e.forEach((e=>{a.push({id:e.id})})),this.$http.post("/program/remove",a).then((e=>{this.gridApi.removeSelectedRows(),m.wW.toastSuccess("삭제되었습니다.")}))}}};const b=(0,w.Z)(f,[["render",i]]);var k=b}}]);