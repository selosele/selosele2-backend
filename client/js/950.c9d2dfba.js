"use strict";(self["webpackChunkselosele2"]=self["webpackChunkselosele2"]||[]).push([[950],{6597:function(t,e,s){s.d(e,{a:function(){return l}});var o=s(9266),i=s(8822);class n{constructor(){}setPageTitle(t){(0,i.UE)(t)?document.title=`${t} - ${o.Z.state.BlogConfig.data?.title}`:document.title=o.Z.state.BlogConfig.data?.title}}const l=new n},1950:function(t,e,s){s.r(e),s.d(e,{default:function(){return ct}});var o=s(3396),i=s(7139);const n=t=>((0,o.dD)("data-v-fba1f7d2"),t=t(),(0,o.Cn)(),t),l={class:"post-view__wrapper"},a=["innerHTML"],_={class:"post__contents__like-wrapper"},p={class:"post__contents__like-cnt"},r={class:"post__contents__date-wrapper"},d={class:"post__contents__date post__contents__date--create-at"},c=n((()=>(0,o._)("strong",null,[(0,o._)("i",{class:"xi-time-o","aria-hidden":"true"}),(0,o.Uk)(" 등록일 ")],-1))),u=["datetime"],h={key:0,class:"post__contents__date post__contents__date--modified-at"},y=n((()=>(0,o._)("strong",null,[(0,o._)("i",{class:"xi-time","aria-hidden":"true"}),(0,o.Uk)(" 수정일 ")],-1))),m=["datetime"],g={class:"post__contents__info-wrapper"},w={class:"post__contents__btns"},k=(0,o.Uk)("포스트 작성 "),f=(0,o.Uk)("포스트 수정 "),b=(0,o.Uk)("포스트 삭제 "),L={class:"post__contents__paginations"},v=n((()=>(0,o._)("h2",{class:"sr-only"},"이전/다음 포스트",-1)));function x(t,e,s,n,x,C){const P=(0,o.up)("ui-skeletor"),$=(0,o.up)("ui-hidden-field"),D=(0,o.up)("ui-icon-button"),U=(0,o.up)("router-link"),W=(0,o.up)("app-add-post-reply"),R=(0,o.up)("ui-form"),Y=(0,o.up)("app-content-wrapper");return(0,o.wg)(),(0,o.j4)(Y,{pageTitle:x.pageTitle},{default:(0,o.w5)((()=>[(0,o._)("div",l,[x.dataLoaded?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(P,{height:"1.3rem"},null,8,["height"]),(0,o.Wm)(P,{height:"1.3rem"},null,8,["height"]),(0,o.Wm)(P,{height:"1.3rem"},null,8,["height"])],64)),x.dataLoaded?((0,o.wg)(),(0,o.j4)(R,{key:1,name:"postForm",onOnsubmit:C.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)($,{name:"id",value:x.post?.id},null,8,["value"]),(0,o._)("div",{class:"post__contents__body line-numbers",innerHTML:x.post?.cont},null,8,a),(0,o._)("div",_,[(0,o.Wm)(D,{icon:x.isPostLiked?"xi-heart":"xi-heart-o",text:"추천수",class:(0,i.C_)("post__contents__like-btn"),title:x.isPostLiked?"포스트 추천 해제하기":"포스트 추천하기",onClick:e[0]||(e[0]=t=>C.savePostLike(x.post?.id))},{default:(0,o.w5)((()=>[(0,o._)("span",p,(0,i.zw)(x.postLikeCnt),1)])),_:1},8,["icon","title"])]),(0,o._)("div",r,[(0,o._)("span",d,[c,(0,o._)("time",{datetime:x.post?.regDate},(0,i.zw)(x.post?.regDate),9,u)]),x.post?.modDate?((0,o.wg)(),(0,o.iD)("span",h,[y,(0,o._)("time",{datetime:x.post?.modDate},(0,i.zw)(x.post?.modDate),9,m)])):(0,o.kq)("",!0)]),(0,o._)("div",g,[0<x.post?.postCategory.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(x.post?.postCategory,((t,e)=>((0,o.wg)(),(0,o.j4)(D,{key:e,routerLink:`/category/${t.category.id}`,icon:"xi-folder-open",text:"카테고리",class:(0,i.C_)("post__contents__info post__contents__info--category")},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(t.category.nm),1)])),_:2},1032,["routerLink"])))),128)):(0,o.kq)("",!0),0<x.post?.postTag.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(x.post?.postTag,((t,e)=>((0,o.wg)(),(0,o.j4)(D,{key:e,routerLink:`/tag/${t.tag.id}`,icon:"xi-tags",text:"태그",class:(0,i.C_)("post__contents__info post__contents__info--tag")},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(t.tag.nm),1)])),_:2},1032,["routerLink"])))),128)):(0,o.kq)("",!0)]),(0,o._)("div",w,[(0,o.Wm)(D,{icon:"xi-backspace",color:"secondary",text:"목록으로",class:(0,i.C_)("post__contents__btn post__contents__btn--list"),onClick:C.goToList},null,8,["onClick"]),(0,o.Wm)(D,{icon:"xi-link",color:"dark",text:"URL 복사",class:(0,i.C_)("post__contents__btn post__contents__btn--copy"),onClick:C.copyPostUrl},null,8,["onClick"]),(0,o.Wm)(D,{href:`https://twitter.com/intent/tweet?text=${encodeURI(x.post?.title)}%20${encodeURI(t.$nowUrl)}`,target:"_blank",title:"새창",rel:"noopener noreferrer nofollow",type:"link",color:"twitter",icon:"xi-twitter",text:"트위터 공유",class:(0,i.C_)("post__contents__sns")},null,8,["href"]),(0,o.Wm)(D,{href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURI(t.$nowUrl)}`,target:"_blank",title:"새창",rel:"noopener noreferrer nofollow",type:"link",color:"facebook",icon:"xi-facebook-official",text:"페이스북 공유",class:(0,i.C_)("post__contents__sns")},null,8,["href"]),t.isLogin?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(D,{routerLink:"/add-post",color:"primary",icon:"xi-pen",class:(0,i.C_)("post__contents__btn")},{default:(0,o.w5)((()=>[k])),_:1}),(0,o.Wm)(D,{routerLink:`/edit-post/${x.post?.id}`,color:"success",icon:"xi-pen",class:(0,i.C_)("post__contents__btn")},{default:(0,o.w5)((()=>[f])),_:1},8,["routerLink"]),(0,o.Wm)(D,{type:"submit",color:"dark",icon:"xi-trash",class:(0,i.C_)("post__contents__btn")},{default:(0,o.w5)((()=>[b])),_:1})],64)):(0,o.kq)("",!0)]),(0,o._)("nav",L,[v,null!==x.prevPost?((0,o.wg)(),(0,o.j4)(U,{key:0,to:`/post/${x.prevPost.id}`,rel:"prev",title:"이전 포스트",class:"post__contents__pagination post__contents__pagination--prev"},{default:(0,o.w5)((()=>[(0,o._)("strong",null,(0,i.zw)(x.prevPost.title),1)])),_:1},8,["to"])):(0,o.kq)("",!0),null!==x.nextPost?((0,o.wg)(),(0,o.j4)(U,{key:1,to:`/post/${x.nextPost.id}`,rel:"next",title:"다음 포스트",class:"post__contents__pagination post__contents__pagination--next"},{default:(0,o.w5)((()=>[(0,o._)("strong",null,(0,i.zw)(x.nextPost.title),1)])),_:1},8,["to"])):(0,o.kq)("",!0)]),(0,o.Wm)(W,{id:x.post?.id},null,8,["id"])])),_:1},8,["onOnsubmit"])):(0,o.kq)("",!0)])])),_:1},8,["pageTitle"])}var C=s(8822),P=s(6597);const $=t=>((0,o.dD)("data-v-78483e5e"),t=t(),(0,o.Cn)(),t),D={class:"post__reply__wrapper"},U=$((()=>(0,o._)("h2",null,"댓글 남기기",-1))),W={class:"post__reply__write__inputs"},R={class:"post__reply__write__btns"},Y=(0,o.Uk)("다시작성 "),T=(0,o.Uk)("저장 "),q={key:0,class:"post__reply__no-data"};function H(t,e,s,n,l,a){const _=(0,o.up)("ui-hidden-field"),p=(0,o.up)("ui-textarea"),r=(0,o.up)("ui-text-field"),d=(0,o.up)("ui-button"),c=(0,o.up)("ui-form"),u=(0,o.up)("app-post-reply-list");return(0,o.wg)(),(0,o.iD)("div",D,[U,(0,o.Wm)(c,{name:"addReplyForm",class:(0,i.C_)("post__reply__write-frm"),onOnsubmit:a.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{name:"parentId",id:"parentId",value:s.id},null,8,["value"]),(0,o.Wm)(p,{name:"cont",id:"addReplyCont",title:"댓글 내용 입력",placeholder:"하고싶은 말을 남겨주세요.",cols:"30",rows:"4",resize:"vertical",rules:"required"},null,8,["placeholder"]),(0,o._)("div",W,[(0,o.Wm)(r,{type:"text",name:"author",id:"addPostReplyAuthor",class:(0,i.C_)("post__reply__input"),label:"닉네임",rules:"required|max:20"}),(0,o.Wm)(r,{type:"password",name:"authorPw",id:"addPostReplyAuthorPw",class:(0,i.C_)("post__reply__input"),label:"비밀번호",rules:"required|min:8|max:15"}),(0,o._)("div",R,[(0,o.Wm)(d,{type:"reset",class:(0,i.C_)("post__reply__btn--reset")},{default:(0,o.w5)((()=>[Y])),_:1}),(0,o.Wm)(d,{type:"submit",class:(0,i.C_)("post__reply__btn--write")},{default:(0,o.w5)((()=>[T])),_:1})])])])),_:1},8,["onOnsubmit"]),0===l.replyList.length?((0,o.wg)(),(0,o.iD)("p",q,"댓글이 없습니다. 제일 먼저 댓글을 작성해보세요.")):((0,o.wg)(),(0,o.j4)(u,{key:1,replyList:l.replyList,realReplyList:l.realReplyList,onRefreshList:a.onRefreshList},null,8,["replyList","realReplyList","onRefreshList"]))])}const A=t=>((0,o.dD)("data-v-b1f7c768"),t=t(),(0,o.Cn)(),t),z={class:"post__reply__count"},I=(0,o.Uk)("댓글 "),S={class:"post__reply__depth1"},M=["data-depth"],E={class:"post__reply__cont"},j={class:"post__reply__info"},N={class:"post__reply__author"},O=A((()=>(0,o._)("i",{class:"xi-user-o","aria-hidden":"true"},null,-1))),Z={class:"post__reply__author-to"},F={class:"post__reply__reg-date"},B=A((()=>(0,o._)("strong",null,[(0,o._)("i",{class:"xi-time-o","aria-hidden":"true"}),(0,o.Uk)(" 등록일 : ")],-1))),K={key:0,class:"post__reply__info-inner"},G={class:"post__reply__write-depth"},J={class:"post__reply__write-to"},Q={class:"post__reply__write__inputs"},V={class:"post__reply__write__inputs-inner"},X=(0,o.Uk)("등록 "),tt={key:0,class:"post__reply__toggle"},et=(0,o.uE)('<div class="post__reply__toggle-list" data-v-b1f7c768><ul data-v-b1f7c768><li data-v-b1f7c768><button type="button" class="post__reply__btn--edit" data-v-b1f7c768><i class="xi-pen-o" aria-hidden="true" data-v-b1f7c768></i> 댓글 수정 </button></li><li data-v-b1f7c768><button type="button" class="post__reply__btn--delete" data-v-b1f7c768><i class="xi-trash-o" aria-hidden="true" data-v-b1f7c768></i> 댓글 삭제 </button></li></ul></div>',1);function st(t,e,s,n,l,a){const _=(0,o.up)("ui-icon-button"),p=(0,o.up)("ui-textarea"),r=(0,o.up)("ui-text-field"),d=(0,o.up)("ui-button");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("strong",z,[I,(0,o._)("span",null,(0,i.zw)(s.realReplyList.length),1)]),(0,o.Wm)(_,{type:"button",color:"primary",icon:"xi-refresh",text:"댓글 목록 새로고침",title:"댓글 목록 새로고침",class:(0,i.C_)("post__reply__btn--refresh"),onClick:a.refreshList},null,8,["onClick"]),(0,o._)("ul",S,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.replyList,((t,e)=>((0,o.wg)(),(0,o.iD)("li",{key:e,"data-depth":t.depth,class:(0,i.C_)({post__reply__list:!0,"post__reply__list--deleted":"Y"===t.delYn,"post__reply__list--admin":"Y"===t.adminYn})},[(0,o._)("p",E,(0,i.zw)(t.cont),1),(0,o._)("div",j,[(0,o._)("p",N,[O,(0,o._)("span",Z,(0,i.zw)(t.author),1)]),(0,o._)("p",F,[B,(0,o._)("span",null,(0,i.zw)(t.regDate),1)]),"N"===t.delYn?((0,o.wg)(),(0,o.iD)("div",K,[(0,o.Wm)(_,{type:"button",color:"secondary",icon:"xi-pen",text:"댓글 남기기",title:"댓글 남기기",class:(0,i.C_)("post__reply__btn--show")})])):(0,o.kq)("",!0)]),(0,o._)("div",G,[(0,o._)("div",J,[(0,o.Wm)(p,{name:"cont",title:"댓글 내용 입력",placeholder:"하고싶은 말을 남겨주세요.",cols:"30",rows:"4"},null,8,["placeholder"]),(0,o._)("div",Q,[(0,o._)("div",V,[(0,o.Wm)(r,{type:"text",name:"author",id:`depthAuthor${t.id}`,class:(0,i.C_)("post__reply__input"),label:"닉네임",value:"관리자",readonly:!0},null,8,["id"])]),(0,o.Wm)(d,{type:"button",class:(0,i.C_)("post__reply__btn--write post__reply__btn--write-depth")},{default:(0,o.w5)((()=>[X])),_:1})])])]),"N"===t.delYn?((0,o.wg)(),(0,o.iD)("div",tt,[(0,o.Wm)(_,{type:"button",icon:"xi-cog",text:"포스트 댓글 수정/삭제",title:"포스트 댓글 수정/삭제",class:(0,i.C_)("post__reply__btn--toggle")}),et])):(0,o.kq)("",!0)],10,M)))),128))])])}var ot={name:"app-post-reply-list",props:{replyList:Array,realReplyList:Array},data(){return{isEmpty:C.xb}},methods:{refreshList(){this.$emit("refreshList")}}},it=s(89);const nt=(0,it.Z)(ot,[["render",st],["__scopeId","data-v-b1f7c768"]]);var lt=nt,at={name:"app-add-post-reply",components:{AppPostReplyList:lt},props:{id:Number},data(){return{replyList:Array,realReplyList:Array}},created(){this.listPostReply()},methods:{onSubmit(t){console.log(t)},listPostReply(){return this.$http.get(`/postreply/list/${this.id}`).then((t=>{t.data[0].map((t=>{t.regDate=this.$moment(t.regDate).format("YYYY-MM-DD HH:mm:ss")})),this.replyList=[...t.data[0]],this.realReplyList=this.replyList.filter((t=>"N"===t.delYn))}))},onRefreshList(){this.listPostReply()}}};const _t=(0,it.Z)(at,[["render",H],["__scopeId","data-v-78483e5e"]]);var pt=_t,rt={name:"app-post-view",components:{AppAddPostReply:pt},data(){return{pageTitle:"",page:this.$route.query.page,post:null,prevPost:null,nextPost:null,postUrl:null,postLikeCnt:0,isPostLiked:!1,snsCodeList:[],dataLoaded:!1}},created(){this.init(this.$route.params.id)},watch:{"$route.params.id"(t){this.init(t)}},methods:{async init(t){this.dataLoaded=!1,this.post=null,this.prevPost=null,this.nextPost=null,this.postUrl=null,await Promise.all([this.getPost(t),this.getPostLike(t),this.listPrevAndNextPost(t)]),this.dataLoading(),this.postUrl=this.$nowUrl,this.postLikeCnt=this.post.postLike.length,this.snsCodeList=this.$store.state.Code.data.filter((t=>"C01"===t.prefix))},getPost(t){return this.$http.get(`/post/${t}`).then((t=>{this.post={...t.data},this.post.regDate=this.$moment(this.post.regDate).format("YYYY-MM-DD HH:mm:ss"),(0,C.SL)(this.post.modDate)&&(this.post.modDate=this.$moment(this.post.modDate).format("YYYY-MM-DD HH:mm:ss")),this.pageTitle=this.post.title,P.a.setPageTitle(this.pageTitle)}))},listPrevAndNextPost(t){return this.$http.get(`/post/prevnext/${t}`).then((t=>{const[e,s]=t.data;this.prevPost=e||null,this.nextPost=s||null}))},getPostLike(t){return this.$http.get(`/postlike/${t}`).then((t=>{(0,C.UE)(t.data)?this.isPostLiked=!0:this.isPostLiked=!1}))},savePostLike(t){return this.$http.post(`/postlike/${t}`).then((e=>{0===this.postLikeCnt&&-1===e.data||(this.getPostLike(t),this.postLikeCnt+=e.data)}))},async onSubmit(t){const e=await C.wW.confirmSuccess("삭제하시겠습니까?");e&&this.$http.delete(`/post/${t.id}`).then((async t=>{C.wW.toastSuccess("삭제되었습니다."),this.goToList()}))},goToList(){this.$store.dispatch("Post/FETCH_MAIN_POSTLIST",{}),this.$store.dispatch("Layout/FETCH_SIDEBAR",{}),this.$router.push({path:"/",query:{page:this.page}})},copyPostUrl(){navigator.clipboard.writeText(this.postUrl),C.wW.toastSuccess("URL이 복사되었습니다.")},dataLoading(){(0,C.UE)(this.post)&&(this.dataLoaded=!0)}}};const dt=(0,it.Z)(rt,[["render",x],["__scopeId","data-v-fba1f7d2"]]);var ct=dt}}]);
//# sourceMappingURL=950.c9d2dfba.js.map